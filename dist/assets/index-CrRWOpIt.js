var er=t=>{throw TypeError(t)};var as=(t,s,r)=>s.has(t)||er("Cannot "+r);var m=(t,s,r)=>(as(t,s,"read from private field"),r?r.call(t):s.get(t)),E=(t,s,r)=>s.has(t)?er("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,r),P=(t,s,r,a)=>(as(t,s,"write to private field"),a?a.call(t,r):s.set(t,r),r),F=(t,s,r)=>(as(t,s,"access private method"),r);var Wt=(t,s,r,a)=>({set _(n){P(t,s,n,r)},get _(){return m(t,s,a)}});import{r as c,a as Rs,R as Ke}from"./react-vendor-wGySg1uH.js";import{i as Ua,g as Ba,a as Wa,G as $a,b as Es,d as fe,o as Ha,s as za,c as Va,e as Qt,f as qa,h as Qa,u as Ya,j as As,q as Lr,k as pt,w as Dr,l as Gt,m as Or,n as Mr}from"./firebase-CHNWK34C.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Fr={exports:{}},Kt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _a=c,Ga=Symbol.for("react.element"),Ka=Symbol.for("react.fragment"),Ja=Object.prototype.hasOwnProperty,Xa=_a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Za={key:!0,ref:!0,__self:!0,__source:!0};function Tr(t,s,r){var a,n={},i=null,o=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(o=s.ref);for(a in s)Ja.call(s,a)&&!Za.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:Ga,type:t,key:i,ref:o,props:n,_owner:Xa.current}}Kt.Fragment=Ka;Kt.jsx=Tr;Kt.jsxs=Tr;Fr.exports=Kt;var e=Fr.exports,ds={},tr=Rs;ds.createRoot=tr.createRoot,ds.hydrateRoot=tr.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var sr="popstate";function en(t={}){function s(a,n){let{pathname:i,search:o,hash:l}=a.location;return us("",{pathname:i,search:o,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:Ct(n)}return sn(s,r,null,t)}function $(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function oe(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function tn(){return Math.random().toString(36).substring(2,10)}function rr(t,s){return{usr:t.state,key:t.key,idx:s}}function us(t,s,r=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof s=="string"?ft(s):s,state:r,key:s&&s.key||a||tn()}}function Ct({pathname:t="/",search:s="",hash:r=""}){return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ft(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substring(r),t=t.substring(0,r));let a=t.indexOf("?");a>=0&&(s.search=t.substring(a),t=t.substring(0,a)),t&&(s.pathname=t)}return s}function sn(t,s,r,a={}){let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,l="POP",d=null,h=u();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function u(){return(o.state||{idx:null}).idx}function x(){l="POP";let f=u(),j=f==null?null:f-h;h=f,d&&d({action:l,location:v.location,delta:j})}function y(f,j){l="PUSH";let b=us(v.location,f,j);h=u()+1;let w=rr(b,h),C=v.createHref(b);try{o.pushState(w,"",C)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;n.location.assign(C)}i&&d&&d({action:l,location:v.location,delta:1})}function g(f,j){l="REPLACE";let b=us(v.location,f,j);h=u();let w=rr(b,h),C=v.createHref(b);o.replaceState(w,"",C),i&&d&&d({action:l,location:v.location,delta:0})}function p(f){return rn(f)}let v={get action(){return l},get location(){return t(n,o)},listen(f){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(sr,x),d=f,()=>{n.removeEventListener(sr,x),d=null}},createHref(f){return s(n,f)},createURL:p,encodeLocation(f){let j=p(f);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:y,replace:g,go(f){return o.go(f)}};return v}function rn(t,s=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),$(r,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:Ct(t);return a=a.replace(/ $/,"%20"),!s&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function Ur(t,s,r="/"){return an(t,s,r,!1)}function an(t,s,r,a){let n=typeof s=="string"?ft(s):s,i=Ce(n.pathname||"/",r);if(i==null)return null;let o=Br(t);nn(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let h=gn(i);l=pn(o[d],h,a)}return l}function Br(t,s=[],r=[],a="",n=!1){let i=(o,l,d=n,h)=>{let u={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(a)&&d)return;$(u.relativePath.startsWith(a),`Absolute route path "${u.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(a.length)}let x=we([a,u.relativePath]),y=r.concat(u);o.children&&o.children.length>0&&($(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Br(o.children,s,y,x,d)),!(o.path==null&&!o.index)&&s.push({path:x,score:mn(x,o.index),routesMeta:y})};return t.forEach((o,l)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,l);else for(let h of Wr(o.path))i(o,l,!0,h)}),s}function Wr(t){let s=t.split("/");if(s.length===0)return[];let[r,...a]=s,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let o=Wr(a.join("/")),l=[];return l.push(...o.map(d=>d===""?i:[i,d].join("/"))),n&&l.push(...o),l.map(d=>t.startsWith("/")&&d===""?"/":d)}function nn(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:xn(s.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var on=/^:[\w-]+$/,ln=3,cn=2,dn=1,un=10,hn=-2,ar=t=>t==="*";function mn(t,s){let r=t.split("/"),a=r.length;return r.some(ar)&&(a+=hn),s&&(a+=cn),r.filter(n=>!ar(n)).reduce((n,i)=>n+(on.test(i)?ln:i===""?dn:un),a)}function xn(t,s){return t.length===s.length&&t.slice(0,-1).every((a,n)=>a===s[n])?t[t.length-1]-s[s.length-1]:0}function pn(t,s,r=!1){let{routesMeta:a}=t,n={},i="/",o=[];for(let l=0;l<a.length;++l){let d=a[l],h=l===a.length-1,u=i==="/"?s:s.slice(i.length)||"/",x=Yt({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},u),y=d.route;if(!x&&h&&r&&!a[a.length-1].route.index&&(x=Yt({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},u)),!x)return null;Object.assign(n,x.params),o.push({params:n,pathname:we([i,x.pathname]),pathnameBase:wn(we([i,x.pathnameBase])),route:y}),x.pathnameBase!=="/"&&(i=we([i,x.pathnameBase]))}return o}function Yt(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=fn(t.path,t.caseSensitive,t.end),n=s.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:a.reduce((h,{paramName:u,isOptional:x},y)=>{if(u==="*"){let p=l[y]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=l[y];return x&&!g?h[u]=void 0:h[u]=(g||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:t}}function fn(t,s=!1,r=!0){oe(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(a.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),a]}function gn(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return oe(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),t}}function Ce(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}var yn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bn=t=>yn.test(t);function vn(t,s="/"){let{pathname:r,search:a="",hash:n=""}=typeof t=="string"?ft(t):t,i;if(r)if(bn(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),oe(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${r}`)}r.startsWith("/")?i=nr(r.substring(1),"/"):i=nr(r,s)}else i=s;return{pathname:i,search:Nn(a),hash:Cn(n)}}function nr(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function ns(t,s,r,a){return`Cannot include a '${t}' character in a manually specified \`to.${s}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jn(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function Ls(t){let s=jn(t);return s.map((r,a)=>a===s.length-1?r.pathname:r.pathnameBase)}function Ds(t,s,r,a=!1){let n;typeof t=="string"?n=ft(t):(n={...t},$(!n.pathname||!n.pathname.includes("?"),ns("?","pathname","search",n)),$(!n.pathname||!n.pathname.includes("#"),ns("#","pathname","hash",n)),$(!n.search||!n.search.includes("#"),ns("#","search","hash",n)));let i=t===""||n.pathname==="",o=i?"/":n.pathname,l;if(o==null)l=r;else{let x=s.length-1;if(!a&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),x-=1;n.pathname=y.join("/")}l=x>=0?s[x]:"/"}let d=vn(n,l),h=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(h||u)&&(d.pathname+="/"),d}var we=t=>t.join("/").replace(/\/\/+/g,"/"),wn=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Nn=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Cn=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Pn(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $r=["POST","PUT","PATCH","DELETE"];new Set($r);var kn=["GET",...$r];new Set(kn);var gt=c.createContext(null);gt.displayName="DataRouter";var Jt=c.createContext(null);Jt.displayName="DataRouterState";c.createContext(!1);var Hr=c.createContext({isTransitioning:!1});Hr.displayName="ViewTransition";var Sn=c.createContext(new Map);Sn.displayName="Fetchers";var In=c.createContext(null);In.displayName="Await";var de=c.createContext(null);de.displayName="Navigation";var Lt=c.createContext(null);Lt.displayName="Location";var ge=c.createContext({outlet:null,matches:[],isDataRoute:!1});ge.displayName="Route";var Os=c.createContext(null);Os.displayName="RouteError";function Rn(t,{relative:s}={}){$(yt(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=c.useContext(de),{hash:n,pathname:i,search:o}=Ot(t,{relative:s}),l=i;return r!=="/"&&(l=i==="/"?r:we([r,i])),a.createHref({pathname:l,search:o,hash:n})}function yt(){return c.useContext(Lt)!=null}function ye(){return $(yt(),"useLocation() may be used only in the context of a <Router> component."),c.useContext(Lt).location}var zr="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vr(t){c.useContext(de).static||c.useLayoutEffect(t)}function Dt(){let{isDataRoute:t}=c.useContext(ge);return t?Hn():En()}function En(){$(yt(),"useNavigate() may be used only in the context of a <Router> component.");let t=c.useContext(gt),{basename:s,navigator:r}=c.useContext(de),{matches:a}=c.useContext(ge),{pathname:n}=ye(),i=JSON.stringify(Ls(a)),o=c.useRef(!1);return Vr(()=>{o.current=!0}),c.useCallback((d,h={})=>{if(oe(o.current,zr),!o.current)return;if(typeof d=="number"){r.go(d);return}let u=Ds(d,JSON.parse(i),n,h.relative==="path");t==null&&s!=="/"&&(u.pathname=u.pathname==="/"?s:we([s,u.pathname])),(h.replace?r.replace:r.push)(u,h.state,h)},[s,r,i,n,t])}c.createContext(null);function Ot(t,{relative:s}={}){let{matches:r}=c.useContext(ge),{pathname:a}=ye(),n=JSON.stringify(Ls(r));return c.useMemo(()=>Ds(t,JSON.parse(n),a,s==="path"),[t,n,a,s])}function An(t,s){return qr(t,s)}function qr(t,s,r,a,n){var b;$(yt(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=c.useContext(de),{matches:o}=c.useContext(ge),l=o[o.length-1],d=l?l.params:{},h=l?l.pathname:"/",u=l?l.pathnameBase:"/",x=l&&l.route;{let w=x&&x.path||"";Qr(h,!x||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let y=ye(),g;if(s){let w=typeof s=="string"?ft(s):s;$(u==="/"||((b=w.pathname)==null?void 0:b.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),g=w}else g=y;let p=g.pathname||"/",v=p;if(u!=="/"){let w=u.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let f=Ur(t,{pathname:v});oe(x||f!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),oe(f==null||f[f.length-1].route.element!==void 0||f[f.length-1].route.Component!==void 0||f[f.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=Fn(f&&f.map(w=>Object.assign({},w,{params:Object.assign({},d,w.params),pathname:we([u,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:we([u,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,r,a,n);return s&&j?c.createElement(Lt.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},j):j}function Ln(){let t=$n(),s=Pn(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=c.createElement(c.Fragment,null,c.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),c.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",c.createElement("code",{style:i},"ErrorBoundary")," or"," ",c.createElement("code",{style:i},"errorElement")," prop on your route.")),c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},s),r?c.createElement("pre",{style:n},r):null,o)}var Dn=c.createElement(Ln,null),On=class extends c.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){this.props.onError?this.props.onError(t,s):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?c.createElement(ge.Provider,{value:this.props.routeContext},c.createElement(Os.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Mn({routeContext:t,match:s,children:r}){let a=c.useContext(gt);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),c.createElement(ge.Provider,{value:t},r)}function Fn(t,s=[],r=null,a=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,o=r==null?void 0:r.errors;if(o!=null){let u=i.findIndex(x=>x.route.id&&(o==null?void 0:o[x.route.id])!==void 0);$(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,d=-1;if(r)for(let u=0;u<i.length;u++){let x=i[u];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(d=u),x.route.id){let{loaderData:y,errors:g}=r,p=x.route.loader&&!y.hasOwnProperty(x.route.id)&&(!g||g[x.route.id]===void 0);if(x.route.lazy||p){l=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}let h=r&&a?(u,x)=>{var y,g;a(u,{location:r.location,params:((g=(y=r.matches)==null?void 0:y[0])==null?void 0:g.params)??{},errorInfo:x})}:void 0;return i.reduceRight((u,x,y)=>{let g,p=!1,v=null,f=null;r&&(g=o&&x.route.id?o[x.route.id]:void 0,v=x.route.errorElement||Dn,l&&(d<0&&y===0?(Qr("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,f=null):d===y&&(p=!0,f=x.route.hydrateFallbackElement||null)));let j=s.concat(i.slice(0,y+1)),b=()=>{let w;return g?w=v:p?w=f:x.route.Component?w=c.createElement(x.route.Component,null):x.route.element?w=x.route.element:w=u,c.createElement(Mn,{match:x,routeContext:{outlet:u,matches:j,isDataRoute:r!=null},children:w})};return r&&(x.route.ErrorBoundary||x.route.errorElement||y===0)?c.createElement(On,{location:r.location,revalidation:r.revalidation,component:v,error:g,children:b(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:h}):b()},null)}function Ms(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tn(t){let s=c.useContext(gt);return $(s,Ms(t)),s}function Un(t){let s=c.useContext(Jt);return $(s,Ms(t)),s}function Bn(t){let s=c.useContext(ge);return $(s,Ms(t)),s}function Fs(t){let s=Bn(t),r=s.matches[s.matches.length-1];return $(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function Wn(){return Fs("useRouteId")}function $n(){var a;let t=c.useContext(Os),s=Un("useRouteError"),r=Fs("useRouteError");return t!==void 0?t:(a=s.errors)==null?void 0:a[r]}function Hn(){let{router:t}=Tn("useNavigate"),s=Fs("useNavigate"),r=c.useRef(!1);return Vr(()=>{r.current=!0}),c.useCallback(async(n,i={})=>{oe(r.current,zr),r.current&&(typeof n=="number"?t.navigate(n):await t.navigate(n,{fromRouteId:s,...i}))},[t,s])}var ir={};function Qr(t,s,r){!s&&!ir[t]&&(ir[t]=!0,oe(!1,r))}c.memo(zn);function zn({routes:t,future:s,state:r,unstable_onError:a}){return qr(t,void 0,r,a,s)}function Vn({to:t,replace:s,state:r,relative:a}){$(yt(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=c.useContext(de);oe(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=c.useContext(ge),{pathname:o}=ye(),l=Dt(),d=Ds(t,Ls(i),o,a==="path"),h=JSON.stringify(d);return c.useEffect(()=>{l(JSON.parse(h),{replace:s,state:r,relative:a})},[l,h,a,s,r]),null}function et(t){$(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qn({basename:t="/",children:s=null,location:r,navigationType:a="POP",navigator:n,static:i=!1}){$(!yt(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=c.useMemo(()=>({basename:o,navigator:n,static:i,future:{}}),[o,n,i]);typeof r=="string"&&(r=ft(r));let{pathname:d="/",search:h="",hash:u="",state:x=null,key:y="default"}=r,g=c.useMemo(()=>{let p=Ce(d,o);return p==null?null:{location:{pathname:p,search:h,hash:u,state:x,key:y},navigationType:a}},[o,d,h,u,x,y,a]);return oe(g!=null,`<Router basename="${o}"> is not able to match the URL "${d}${h}${u}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:c.createElement(de.Provider,{value:l},c.createElement(Lt.Provider,{children:s,value:g}))}function Qn({children:t,location:s}){return An(hs(t),s)}function hs(t,s=[]){let r=[];return c.Children.forEach(t,(a,n)=>{if(!c.isValidElement(a))return;let i=[...s,n];if(a.type===c.Fragment){r.push.apply(r,hs(a.props.children,i));return}$(a.type===et,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$(!a.props.index||!a.props.children,"An index route cannot have child routes.");let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=hs(a.props.children,i)),r.push(o)}),r}var zt="get",Vt="application/x-www-form-urlencoded";function Xt(t){return t!=null&&typeof t.tagName=="string"}function Yn(t){return Xt(t)&&t.tagName.toLowerCase()==="button"}function _n(t){return Xt(t)&&t.tagName.toLowerCase()==="form"}function Gn(t){return Xt(t)&&t.tagName.toLowerCase()==="input"}function Kn(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Jn(t,s){return t.button===0&&(!s||s==="_self")&&!Kn(t)}var $t=null;function Xn(){if($t===null)try{new FormData(document.createElement("form"),0),$t=!1}catch{$t=!0}return $t}var Zn=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function is(t){return t!=null&&!Zn.has(t)?(oe(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vt}"`),null):t}function ei(t,s){let r,a,n,i,o;if(_n(t)){let l=t.getAttribute("action");a=l?Ce(l,s):null,r=t.getAttribute("method")||zt,n=is(t.getAttribute("enctype"))||Vt,i=new FormData(t)}else if(Yn(t)||Gn(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||l.getAttribute("action");if(a=d?Ce(d,s):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||zt,n=is(t.getAttribute("formenctype"))||is(l.getAttribute("enctype"))||Vt,i=new FormData(l,t),!Xn()){let{name:h,type:u,value:x}=t;if(u==="image"){let y=h?`${h}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else h&&i.append(h,x)}}else{if(Xt(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=zt,a=null,n=Vt,o=t}return i&&n==="text/plain"&&(o=i,i=void 0),{action:a,method:r.toLowerCase(),encType:n,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ts(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function ti(t,s,r){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return a.pathname==="/"?a.pathname=`_root.${r}`:s&&Ce(a.pathname,s)==="/"?a.pathname=`${s.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function si(t,s){if(t.id in s)return s[t.id];try{let r=await import(t.module);return s[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ri(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ai(t,s,r){let a=await Promise.all(t.map(async n=>{let i=s.routes[n.route.id];if(i){let o=await si(i,r);return o.links?o.links():[]}return[]}));return li(a.flat(1).filter(ri).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function or(t,s,r,a,n,i){let o=(d,h)=>r[h]?d.route.id!==r[h].route.id:!0,l=(d,h)=>{var u;return r[h].pathname!==d.pathname||((u=r[h].route.path)==null?void 0:u.endsWith("*"))&&r[h].params["*"]!==d.params["*"]};return i==="assets"?s.filter((d,h)=>o(d,h)||l(d,h)):i==="data"?s.filter((d,h)=>{var x;let u=a.routes[d.route.id];if(!u||!u.hasLoader)return!1;if(o(d,h)||l(d,h))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((x=r[0])==null?void 0:x.params)||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function ni(t,s,{includeHydrateFallback:r}={}){return ii(t.map(a=>{let n=s.routes[a.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function ii(t){return[...new Set(t)]}function oi(t){let s={},r=Object.keys(t).sort();for(let a of r)s[a]=t[a];return s}function li(t,s){let r=new Set;return new Set(s),t.reduce((a,n)=>{let i=JSON.stringify(oi(n));return r.has(i)||(r.add(i),a.push({key:i,link:n})),a},[])}function Yr(){let t=c.useContext(gt);return Ts(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ci(){let t=c.useContext(Jt);return Ts(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Us=c.createContext(void 0);Us.displayName="FrameworkContext";function _r(){let t=c.useContext(Us);return Ts(t,"You must render this element inside a <HydratedRouter> element"),t}function di(t,s){let r=c.useContext(Us),[a,n]=c.useState(!1),[i,o]=c.useState(!1),{onFocus:l,onBlur:d,onMouseEnter:h,onMouseLeave:u,onTouchStart:x}=s,y=c.useRef(null);c.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let v=j=>{j.forEach(b=>{o(b.isIntersecting)})},f=new IntersectionObserver(v,{threshold:.5});return y.current&&f.observe(y.current),()=>{f.disconnect()}}},[t]),c.useEffect(()=>{if(a){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[a]);let g=()=>{n(!0)},p=()=>{n(!1),o(!1)};return r?t!=="intent"?[i,y,{}]:[i,y,{onFocus:jt(l,g),onBlur:jt(d,p),onMouseEnter:jt(h,g),onMouseLeave:jt(u,p),onTouchStart:jt(x,g)}]:[!1,y,{}]}function jt(t,s){return r=>{t&&t(r),r.defaultPrevented||s(r)}}function ui({page:t,...s}){let{router:r}=Yr(),a=c.useMemo(()=>Ur(r.routes,t,r.basename),[r.routes,t,r.basename]);return a?c.createElement(mi,{page:t,matches:a,...s}):null}function hi(t){let{manifest:s,routeModules:r}=_r(),[a,n]=c.useState([]);return c.useEffect(()=>{let i=!1;return ai(t,s,r).then(o=>{i||n(o)}),()=>{i=!0}},[t,s,r]),a}function mi({page:t,matches:s,...r}){let a=ye(),{manifest:n,routeModules:i}=_r(),{basename:o}=Yr(),{loaderData:l,matches:d}=ci(),h=c.useMemo(()=>or(t,s,d,n,a,"data"),[t,s,d,n,a]),u=c.useMemo(()=>or(t,s,d,n,a,"assets"),[t,s,d,n,a]),x=c.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let p=new Set,v=!1;if(s.forEach(j=>{var w;let b=n.routes[j.route.id];!b||!b.hasLoader||(!h.some(C=>C.route.id===j.route.id)&&j.route.id in l&&((w=i[j.route.id])!=null&&w.shouldRevalidate)||b.hasClientLoader?v=!0:p.add(j.route.id))}),p.size===0)return[];let f=ti(t,o,"data");return v&&p.size>0&&f.searchParams.set("_routes",s.filter(j=>p.has(j.route.id)).map(j=>j.route.id).join(",")),[f.pathname+f.search]},[o,l,a,n,h,s,t,i]),y=c.useMemo(()=>ni(u,n),[u,n]),g=hi(u);return c.createElement(c.Fragment,null,x.map(p=>c.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...r})),y.map(p=>c.createElement("link",{key:p,rel:"modulepreload",href:p,...r})),g.map(({key:p,link:v})=>c.createElement("link",{key:p,nonce:r.nonce,...v})))}function xi(...t){return s=>{t.forEach(r=>{typeof r=="function"?r(s):r!=null&&(r.current=s)})}}var Gr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Gr&&(window.__reactRouterVersion="7.9.6")}catch{}function pi({basename:t,children:s,window:r}){let a=c.useRef();a.current==null&&(a.current=en({window:r,v5Compat:!0}));let n=a.current,[i,o]=c.useState({action:n.action,location:n.location}),l=c.useCallback(d=>{c.startTransition(()=>o(d))},[o]);return c.useLayoutEffect(()=>n.listen(l),[n,l]),c.createElement(qn,{basename:t,children:s,location:i.location,navigationType:i.action,navigator:n})}var Kr=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jr=c.forwardRef(function({onClick:s,discover:r="render",prefetch:a="none",relative:n,reloadDocument:i,replace:o,state:l,target:d,to:h,preventScrollReset:u,viewTransition:x,...y},g){let{basename:p}=c.useContext(de),v=typeof h=="string"&&Kr.test(h),f,j=!1;if(typeof h=="string"&&v&&(f=h,Gr))try{let R=new URL(window.location.href),k=h.startsWith("//")?new URL(R.protocol+h):new URL(h),B=Ce(k.pathname,p);k.origin===R.origin&&B!=null?h=B+k.search+k.hash:j=!0}catch{oe(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=Rn(h,{relative:n}),[w,C,S]=di(a,y),A=bi(h,{replace:o,state:l,target:d,preventScrollReset:u,relative:n,viewTransition:x});function I(R){s&&s(R),R.defaultPrevented||A(R)}let D=c.createElement("a",{...y,...S,href:f||b,onClick:j||i?s:I,ref:xi(g,C),target:d,"data-discover":!v&&r==="render"?"true":void 0});return w&&!v?c.createElement(c.Fragment,null,D,c.createElement(ui,{page:b})):D});Jr.displayName="Link";var fi=c.forwardRef(function({"aria-current":s="page",caseSensitive:r=!1,className:a="",end:n=!1,style:i,to:o,viewTransition:l,children:d,...h},u){let x=Ot(o,{relative:h.relative}),y=ye(),g=c.useContext(Jt),{navigator:p,basename:v}=c.useContext(de),f=g!=null&&Ci(x)&&l===!0,j=p.encodeLocation?p.encodeLocation(x).pathname:x.pathname,b=y.pathname,w=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(b=b.toLowerCase(),w=w?w.toLowerCase():null,j=j.toLowerCase()),w&&v&&(w=Ce(w,v)||w);const C=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let S=b===j||!n&&b.startsWith(j)&&b.charAt(C)==="/",A=w!=null&&(w===j||!n&&w.startsWith(j)&&w.charAt(j.length)==="/"),I={isActive:S,isPending:A,isTransitioning:f},D=S?s:void 0,R;typeof a=="function"?R=a(I):R=[a,S?"active":null,A?"pending":null,f?"transitioning":null].filter(Boolean).join(" ");let k=typeof i=="function"?i(I):i;return c.createElement(Jr,{...h,"aria-current":D,className:R,ref:u,style:k,to:o,viewTransition:l},typeof d=="function"?d(I):d)});fi.displayName="NavLink";var gi=c.forwardRef(({discover:t="render",fetcherKey:s,navigate:r,reloadDocument:a,replace:n,state:i,method:o=zt,action:l,onSubmit:d,relative:h,preventScrollReset:u,viewTransition:x,...y},g)=>{let p=wi(),v=Ni(l,{relative:h}),f=o.toLowerCase()==="get"?"get":"post",j=typeof l=="string"&&Kr.test(l),b=w=>{if(d&&d(w),w.defaultPrevented)return;w.preventDefault();let C=w.nativeEvent.submitter,S=(C==null?void 0:C.getAttribute("formmethod"))||o;p(C||w.currentTarget,{fetcherKey:s,method:S,navigate:r,replace:n,state:i,relative:h,preventScrollReset:u,viewTransition:x})};return c.createElement("form",{ref:g,method:f,action:v,onSubmit:a?d:b,...y,"data-discover":!j&&t==="render"?"true":void 0})});gi.displayName="Form";function yi(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xr(t){let s=c.useContext(gt);return $(s,yi(t)),s}function bi(t,{target:s,replace:r,state:a,preventScrollReset:n,relative:i,viewTransition:o}={}){let l=Dt(),d=ye(),h=Ot(t,{relative:i});return c.useCallback(u=>{if(Jn(u,s)){u.preventDefault();let x=r!==void 0?r:Ct(d)===Ct(h);l(t,{replace:x,state:a,preventScrollReset:n,relative:i,viewTransition:o})}},[d,l,h,r,a,s,t,n,i,o])}var vi=0,ji=()=>`__${String(++vi)}__`;function wi(){let{router:t}=Xr("useSubmit"),{basename:s}=c.useContext(de),r=Wn();return c.useCallback(async(a,n={})=>{let{action:i,method:o,encType:l,formData:d,body:h}=ei(a,s);if(n.navigate===!1){let u=n.fetcherKey||ji();await t.fetch(u,r,n.action||i,{preventScrollReset:n.preventScrollReset,formData:d,body:h,formMethod:n.method||o,formEncType:n.encType||l,flushSync:n.flushSync})}else await t.navigate(n.action||i,{preventScrollReset:n.preventScrollReset,formData:d,body:h,formMethod:n.method||o,formEncType:n.encType||l,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[t,s,r])}function Ni(t,{relative:s}={}){let{basename:r}=c.useContext(de),a=c.useContext(ge);$(a,"useFormAction must be used inside a RouteContext");let[n]=a.matches.slice(-1),i={...Ot(t||".",{relative:s})},o=ye();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),d=l.getAll("index");if(d.some(u=>u==="")){l.delete("index"),d.filter(x=>x).forEach(x=>l.append("index",x));let u=l.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&n.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:we([r,i.pathname])),Ct(i)}function Ci(t,{relative:s}={}){let r=c.useContext(Hr);$(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Xr("useViewTransitionState"),n=Ot(t,{relative:s});if(!r.isTransitioning)return!1;let i=Ce(r.currentLocation.pathname,a)||r.currentLocation.pathname,o=Ce(r.nextLocation.pathname,a)||r.nextLocation.pathname;return Yt(n.pathname,o)!=null||Yt(n.pathname,i)!=null}var Mt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Pi={setTimeout:(t,s)=>setTimeout(t,s),clearTimeout:t=>clearTimeout(t),setInterval:(t,s)=>setInterval(t,s),clearInterval:t=>clearInterval(t)},Ie,Is,wr,ki=(wr=class{constructor(){E(this,Ie,Pi);E(this,Is,!1)}setTimeoutProvider(t){P(this,Ie,t)}setTimeout(t,s){return m(this,Ie).setTimeout(t,s)}clearTimeout(t){m(this,Ie).clearTimeout(t)}setInterval(t,s){return m(this,Ie).setInterval(t,s)}clearInterval(t){m(this,Ie).clearInterval(t)}},Ie=new WeakMap,Is=new WeakMap,wr),We=new ki;function Si(t){setTimeout(t,0)}var Je=typeof window>"u"||"Deno"in globalThis;function J(){}function Ii(t,s){return typeof t=="function"?t(s):t}function ms(t){return typeof t=="number"&&t>=0&&t!==1/0}function Zr(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Fe(t,s){return typeof t=="function"?t(s):t}function ie(t,s){return typeof t=="function"?t(s):t}function lr(t,s){const{type:r="all",exact:a,fetchStatus:n,predicate:i,queryKey:o,stale:l}=t;if(o){if(a){if(s.queryHash!==Bs(o,s.options))return!1}else if(!kt(s.queryKey,o))return!1}if(r!=="all"){const d=s.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof l=="boolean"&&s.isStale()!==l||n&&n!==s.state.fetchStatus||i&&!i(s))}function cr(t,s){const{exact:r,status:a,predicate:n,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(r){if(Pt(s.options.mutationKey)!==Pt(i))return!1}else if(!kt(s.options.mutationKey,i))return!1}return!(a&&s.state.status!==a||n&&!n(s))}function Bs(t,s){return((s==null?void 0:s.queryKeyHashFn)||Pt)(t)}function Pt(t){return JSON.stringify(t,(s,r)=>ps(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function kt(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>kt(t[r],s[r])):!1}var Ri=Object.prototype.hasOwnProperty;function ea(t,s){if(t===s)return t;const r=dr(t)&&dr(s);if(!r&&!(ps(t)&&ps(s)))return s;const n=(r?t:Object.keys(t)).length,i=r?s:Object.keys(s),o=i.length,l=r?new Array(o):{};let d=0;for(let h=0;h<o;h++){const u=r?h:i[h],x=t[u],y=s[u];if(x===y){l[u]=x,(r?h<n:Ri.call(t,u))&&d++;continue}if(x===null||y===null||typeof x!="object"||typeof y!="object"){l[u]=y;continue}const g=ea(x,y);l[u]=g,g===x&&d++}return n===o&&d===n?t:l}function xs(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function dr(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ps(t){if(!ur(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!ur(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function ur(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ei(t){return new Promise(s=>{We.setTimeout(s,t)})}function fs(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?ea(t,s):s}function Ai(t,s,r=0){const a=[...t,s];return r&&a.length>r?a.slice(1):a}function Li(t,s,r=0){const a=[s,...t];return r&&a.length>r?a.slice(0,-1):a}var Ws=Symbol();function ta(t,s){return!t.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!t.queryFn||t.queryFn===Ws?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Di(t,s){return typeof t=="function"?t(...s):!!t}var $e,Re,rt,Nr,Oi=(Nr=class extends Mt{constructor(){super();E(this,$e);E(this,Re);E(this,rt);P(this,rt,s=>{if(!Je&&window.addEventListener){const r=()=>s();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){m(this,Re)||this.setEventListener(m(this,rt))}onUnsubscribe(){var s;this.hasListeners()||((s=m(this,Re))==null||s.call(this),P(this,Re,void 0))}setEventListener(s){var r;P(this,rt,s),(r=m(this,Re))==null||r.call(this),P(this,Re,s(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(s){m(this,$e)!==s&&(P(this,$e,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(r=>{r(s)})}isFocused(){var s;return typeof m(this,$e)=="boolean"?m(this,$e):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},$e=new WeakMap,Re=new WeakMap,rt=new WeakMap,Nr),$s=new Oi;function gs(){let t,s;const r=new Promise((n,i)=>{t=n,s=i});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),t(n)},r.reject=n=>{a({status:"rejected",reason:n}),s(n)},r}var Mi=Si;function Fi(){let t=[],s=0,r=l=>{l()},a=l=>{l()},n=Mi;const i=l=>{s?t.push(l):n(()=>{r(l)})},o=()=>{const l=t;t=[],l.length&&n(()=>{a(()=>{l.forEach(d=>{r(d)})})})};return{batch:l=>{let d;s++;try{d=l()}finally{s--,s||o()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{n=l}}}var q=Fi(),at,Ee,nt,Cr,Ti=(Cr=class extends Mt{constructor(){super();E(this,at,!0);E(this,Ee);E(this,nt);P(this,nt,s=>{if(!Je&&window.addEventListener){const r=()=>s(!0),a=()=>s(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}}})}onSubscribe(){m(this,Ee)||this.setEventListener(m(this,nt))}onUnsubscribe(){var s;this.hasListeners()||((s=m(this,Ee))==null||s.call(this),P(this,Ee,void 0))}setEventListener(s){var r;P(this,nt,s),(r=m(this,Ee))==null||r.call(this),P(this,Ee,s(this.setOnline.bind(this)))}setOnline(s){m(this,at)!==s&&(P(this,at,s),this.listeners.forEach(a=>{a(s)}))}isOnline(){return m(this,at)}},at=new WeakMap,Ee=new WeakMap,nt=new WeakMap,Cr),_t=new Ti;function Ui(t){return Math.min(1e3*2**t,3e4)}function sa(t){return(t??"online")==="online"?_t.isOnline():!0}var ys=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ra(t){let s=!1,r=0,a;const n=gs(),i=()=>n.status!=="pending",o=v=>{var f;if(!i()){const j=new ys(v);y(j),(f=t.onCancel)==null||f.call(t,j)}},l=()=>{s=!0},d=()=>{s=!1},h=()=>$s.isFocused()&&(t.networkMode==="always"||_t.isOnline())&&t.canRun(),u=()=>sa(t.networkMode)&&t.canRun(),x=v=>{i()||(a==null||a(),n.resolve(v))},y=v=>{i()||(a==null||a(),n.reject(v))},g=()=>new Promise(v=>{var f;a=j=>{(i()||h())&&v(j)},(f=t.onPause)==null||f.call(t)}).then(()=>{var v;a=void 0,i()||(v=t.onContinue)==null||v.call(t)}),p=()=>{if(i())return;let v;const f=r===0?t.initialPromise:void 0;try{v=f??t.fn()}catch(j){v=Promise.reject(j)}Promise.resolve(v).then(x).catch(j=>{var A;if(i())return;const b=t.retry??(Je?0:3),w=t.retryDelay??Ui,C=typeof w=="function"?w(r,j):w,S=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,j);if(s||!S){y(j);return}r++,(A=t.onFail)==null||A.call(t,r,j),Ei(C).then(()=>h()?void 0:g()).then(()=>{s?y(j):p()})})};return{promise:n,status:()=>n.status,cancel:o,continue:()=>(a==null||a(),n),cancelRetry:l,continueRetry:d,canStart:u,start:()=>(u()?p():g().then(p),n)}}var He,Pr,aa=(Pr=class{constructor(){E(this,He)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ms(this.gcTime)&&P(this,He,We.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Je?1/0:5*60*1e3))}clearGcTimeout(){m(this,He)&&(We.clearTimeout(m(this,He)),P(this,He,void 0))}},He=new WeakMap,Pr),ze,it,ne,Ve,V,St,qe,le,be,kr,Bi=(kr=class extends aa{constructor(s){super();E(this,le);E(this,ze);E(this,it);E(this,ne);E(this,Ve);E(this,V);E(this,St);E(this,qe);P(this,qe,!1),P(this,St,s.defaultOptions),this.setOptions(s.options),this.observers=[],P(this,Ve,s.client),P(this,ne,m(this,Ve).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,P(this,ze,mr(this.options)),this.state=s.state??m(this,ze),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=m(this,V))==null?void 0:s.promise}setOptions(s){if(this.options={...m(this,St),...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=mr(this.options);r.data!==void 0&&(this.setState(hr(r.data,r.dataUpdatedAt)),P(this,ze,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&m(this,ne).remove(this)}setData(s,r){const a=fs(this.state.data,s,this.options);return F(this,le,be).call(this,{data:a,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),a}setState(s,r){F(this,le,be).call(this,{type:"setState",state:s,setStateOptions:r})}cancel(s){var a,n;const r=(a=m(this,V))==null?void 0:a.promise;return(n=m(this,V))==null||n.cancel(s),r?r.then(J).catch(J):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(m(this,ze))}isActive(){return this.observers.some(s=>ie(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ws||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>Fe(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!Zr(this.state.dataUpdatedAt,s)}onFocus(){var r;const s=this.observers.find(a=>a.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(r=m(this,V))==null||r.continue()}onOnline(){var r;const s=this.observers.find(a=>a.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(r=m(this,V))==null||r.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),m(this,ne).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(r=>r!==s),this.observers.length||(m(this,V)&&(m(this,qe)?m(this,V).cancel({revert:!0}):m(this,V).cancelRetry()),this.scheduleGc()),m(this,ne).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||F(this,le,be).call(this,{type:"invalidate"})}async fetch(s,r){var d,h,u,x,y,g,p,v,f,j,b,w;if(this.state.fetchStatus!=="idle"&&((d=m(this,V))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(m(this,V))return m(this,V).continueRetry(),m(this,V).promise}if(s&&this.setOptions(s),!this.options.queryFn){const C=this.observers.find(S=>S.options.queryFn);C&&this.setOptions(C.options)}const a=new AbortController,n=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(P(this,qe,!0),a.signal)})},i=()=>{const C=ta(this.options,r),A=(()=>{const I={client:m(this,Ve),queryKey:this.queryKey,meta:this.meta};return n(I),I})();return P(this,qe,!1),this.options.persister?this.options.persister(C,A,this):C(A)},l=(()=>{const C={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:m(this,Ve),state:this.state,fetchFn:i};return n(C),C})();(h=this.options.behavior)==null||h.onFetch(l,this),P(this,it,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&F(this,le,be).call(this,{type:"fetch",meta:(x=l.fetchOptions)==null?void 0:x.meta}),P(this,V,ra({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:C=>{C instanceof ys&&C.revert&&this.setState({...m(this,it),fetchStatus:"idle"}),a.abort()},onFail:(C,S)=>{F(this,le,be).call(this,{type:"failed",failureCount:C,error:S})},onPause:()=>{F(this,le,be).call(this,{type:"pause"})},onContinue:()=>{F(this,le,be).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const C=await m(this,V).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(g=(y=m(this,ne).config).onSuccess)==null||g.call(y,C,this),(v=(p=m(this,ne).config).onSettled)==null||v.call(p,C,this.state.error,this),C}catch(C){if(C instanceof ys){if(C.silent)return m(this,V).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw F(this,le,be).call(this,{type:"error",error:C}),(j=(f=m(this,ne).config).onError)==null||j.call(f,C,this),(w=(b=m(this,ne).config).onSettled)==null||w.call(b,this.state.data,C,this),C}finally{this.scheduleGc()}}},ze=new WeakMap,it=new WeakMap,ne=new WeakMap,Ve=new WeakMap,V=new WeakMap,St=new WeakMap,qe=new WeakMap,le=new WeakSet,be=function(s){const r=a=>{switch(s.type){case"failed":return{...a,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...na(a.data,this.options),fetchMeta:s.meta??null};case"success":const n={...a,...hr(s.data,s.dataUpdatedAt),dataUpdateCount:a.dataUpdateCount+1,...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return P(this,it,s.manual?n:void 0),n;case"error":const i=s.error;return{...a,error:i,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...s.state}}};this.state=r(this.state),q.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),m(this,ne).notify({query:this,type:"updated",action:s})})},kr);function na(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sa(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function hr(t,s){return{data:t,dataUpdatedAt:s??Date.now(),error:null,isInvalidated:!1,status:"success"}}function mr(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,a=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var K,T,It,Y,Qe,ot,ve,Ae,Rt,lt,ct,Ye,_e,Le,dt,U,wt,bs,vs,js,ws,Ns,Cs,Ps,ia,Sr,Wi=(Sr=class extends Mt{constructor(s,r){super();E(this,U);E(this,K);E(this,T);E(this,It);E(this,Y);E(this,Qe);E(this,ot);E(this,ve);E(this,Ae);E(this,Rt);E(this,lt);E(this,ct);E(this,Ye);E(this,_e);E(this,Le);E(this,dt,new Set);this.options=r,P(this,K,s),P(this,Ae,null),P(this,ve,gs()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(m(this,T).addObserver(this),xr(m(this,T),this.options)?F(this,U,wt).call(this):this.updateResult(),F(this,U,ws).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ks(m(this,T),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ks(m(this,T),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,F(this,U,Ns).call(this),F(this,U,Cs).call(this),m(this,T).removeObserver(this)}setOptions(s){const r=this.options,a=m(this,T);if(this.options=m(this,K).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ie(this.options.enabled,m(this,T))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");F(this,U,Ps).call(this),m(this,T).setOptions(this.options),r._defaulted&&!xs(this.options,r)&&m(this,K).getQueryCache().notify({type:"observerOptionsUpdated",query:m(this,T),observer:this});const n=this.hasListeners();n&&pr(m(this,T),a,this.options,r)&&F(this,U,wt).call(this),this.updateResult(),n&&(m(this,T)!==a||ie(this.options.enabled,m(this,T))!==ie(r.enabled,m(this,T))||Fe(this.options.staleTime,m(this,T))!==Fe(r.staleTime,m(this,T)))&&F(this,U,bs).call(this);const i=F(this,U,vs).call(this);n&&(m(this,T)!==a||ie(this.options.enabled,m(this,T))!==ie(r.enabled,m(this,T))||i!==m(this,Le))&&F(this,U,js).call(this,i)}getOptimisticResult(s){const r=m(this,K).getQueryCache().build(m(this,K),s),a=this.createResult(r,s);return Hi(this,a)&&(P(this,Y,a),P(this,ot,this.options),P(this,Qe,m(this,T).state)),a}getCurrentResult(){return m(this,Y)}trackResult(s,r){return new Proxy(s,{get:(a,n)=>(this.trackProp(n),r==null||r(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&m(this,ve).status==="pending"&&m(this,ve).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,n))})}trackProp(s){m(this,dt).add(s)}getCurrentQuery(){return m(this,T)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=m(this,K).defaultQueryOptions(s),a=m(this,K).getQueryCache().build(m(this,K),r);return a.fetch().then(()=>this.createResult(a,r))}fetch(s){return F(this,U,wt).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),m(this,Y)))}createResult(s,r){var R;const a=m(this,T),n=this.options,i=m(this,Y),o=m(this,Qe),l=m(this,ot),h=s!==a?s.state:m(this,It),{state:u}=s;let x={...u},y=!1,g;if(r._optimisticResults){const k=this.hasListeners(),B=!k&&xr(s,r),X=k&&pr(s,a,r,n);(B||X)&&(x={...x,...na(u.data,s.options)}),r._optimisticResults==="isRestoring"&&(x.fetchStatus="idle")}let{error:p,errorUpdatedAt:v,status:f}=x;g=x.data;let j=!1;if(r.placeholderData!==void 0&&g===void 0&&f==="pending"){let k;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(k=i.data,j=!0):k=typeof r.placeholderData=="function"?r.placeholderData((R=m(this,ct))==null?void 0:R.state.data,m(this,ct)):r.placeholderData,k!==void 0&&(f="success",g=fs(i==null?void 0:i.data,k,r),y=!0)}if(r.select&&g!==void 0&&!j)if(i&&g===(o==null?void 0:o.data)&&r.select===m(this,Rt))g=m(this,lt);else try{P(this,Rt,r.select),g=r.select(g),g=fs(i==null?void 0:i.data,g,r),P(this,lt,g),P(this,Ae,null)}catch(k){P(this,Ae,k)}m(this,Ae)&&(p=m(this,Ae),g=m(this,lt),v=Date.now(),f="error");const b=x.fetchStatus==="fetching",w=f==="pending",C=f==="error",S=w&&b,A=g!==void 0,D={status:f,fetchStatus:x.fetchStatus,isPending:w,isSuccess:f==="success",isError:C,isInitialLoading:S,isLoading:S,data:g,dataUpdatedAt:x.dataUpdatedAt,error:p,errorUpdatedAt:v,failureCount:x.fetchFailureCount,failureReason:x.fetchFailureReason,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>h.dataUpdateCount||x.errorUpdateCount>h.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:C&&!A,isPaused:x.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:C&&A,isStale:Hs(s,r),refetch:this.refetch,promise:m(this,ve),isEnabled:ie(r.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const k=ue=>{D.status==="error"?ue.reject(D.error):D.data!==void 0&&ue.resolve(D.data)},B=()=>{const ue=P(this,ve,D.promise=gs());k(ue)},X=m(this,ve);switch(X.status){case"pending":s.queryHash===a.queryHash&&k(X);break;case"fulfilled":(D.status==="error"||D.data!==X.value)&&B();break;case"rejected":(D.status!=="error"||D.error!==X.reason)&&B();break}}return D}updateResult(){const s=m(this,Y),r=this.createResult(m(this,T),this.options);if(P(this,Qe,m(this,T).state),P(this,ot,this.options),m(this,Qe).data!==void 0&&P(this,ct,m(this,T)),xs(r,s))return;P(this,Y,r);const a=()=>{if(!s)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!m(this,dt).size)return!0;const o=new Set(i??m(this,dt));return this.options.throwOnError&&o.add("error"),Object.keys(m(this,Y)).some(l=>{const d=l;return m(this,Y)[d]!==s[d]&&o.has(d)})};F(this,U,ia).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&F(this,U,ws).call(this)}},K=new WeakMap,T=new WeakMap,It=new WeakMap,Y=new WeakMap,Qe=new WeakMap,ot=new WeakMap,ve=new WeakMap,Ae=new WeakMap,Rt=new WeakMap,lt=new WeakMap,ct=new WeakMap,Ye=new WeakMap,_e=new WeakMap,Le=new WeakMap,dt=new WeakMap,U=new WeakSet,wt=function(s){F(this,U,Ps).call(this);let r=m(this,T).fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(J)),r},bs=function(){F(this,U,Ns).call(this);const s=Fe(this.options.staleTime,m(this,T));if(Je||m(this,Y).isStale||!ms(s))return;const a=Zr(m(this,Y).dataUpdatedAt,s)+1;P(this,Ye,We.setTimeout(()=>{m(this,Y).isStale||this.updateResult()},a))},vs=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(m(this,T)):this.options.refetchInterval)??!1},js=function(s){F(this,U,Cs).call(this),P(this,Le,s),!(Je||ie(this.options.enabled,m(this,T))===!1||!ms(m(this,Le))||m(this,Le)===0)&&P(this,_e,We.setInterval(()=>{(this.options.refetchIntervalInBackground||$s.isFocused())&&F(this,U,wt).call(this)},m(this,Le)))},ws=function(){F(this,U,bs).call(this),F(this,U,js).call(this,F(this,U,vs).call(this))},Ns=function(){m(this,Ye)&&(We.clearTimeout(m(this,Ye)),P(this,Ye,void 0))},Cs=function(){m(this,_e)&&(We.clearInterval(m(this,_e)),P(this,_e,void 0))},Ps=function(){const s=m(this,K).getQueryCache().build(m(this,K),this.options);if(s===m(this,T))return;const r=m(this,T);P(this,T,s),P(this,It,s.state),this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))},ia=function(s){q.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(m(this,Y))}),m(this,K).getQueryCache().notify({query:m(this,T),type:"observerResultsUpdated"})})},Sr);function $i(t,s){return ie(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function xr(t,s){return $i(t,s)||t.state.data!==void 0&&ks(t,s,s.refetchOnMount)}function ks(t,s,r){if(ie(s.enabled,t)!==!1&&Fe(s.staleTime,t)!=="static"){const a=typeof r=="function"?r(t):r;return a==="always"||a!==!1&&Hs(t,s)}return!1}function pr(t,s,r,a){return(t!==s||ie(a.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Hs(t,r)}function Hs(t,s){return ie(s.enabled,t)!==!1&&t.isStaleByTime(Fe(s.staleTime,t))}function Hi(t,s){return!xs(t.getCurrentResult(),s)}function fr(t){return{onFetch:(s,r)=>{var u,x,y,g,p;const a=s.options,n=(y=(x=(u=s.fetchOptions)==null?void 0:u.meta)==null?void 0:x.fetchMore)==null?void 0:y.direction,i=((g=s.state.data)==null?void 0:g.pages)||[],o=((p=s.state.data)==null?void 0:p.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const h=async()=>{let v=!1;const f=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(s.signal.aborted?v=!0:s.signal.addEventListener("abort",()=>{v=!0}),s.signal)})},j=ta(s.options,s.fetchOptions),b=async(w,C,S)=>{if(v)return Promise.reject();if(C==null&&w.pages.length)return Promise.resolve(w);const I=(()=>{const B={client:s.client,queryKey:s.queryKey,pageParam:C,direction:S?"backward":"forward",meta:s.options.meta};return f(B),B})(),D=await j(I),{maxPages:R}=s.options,k=S?Li:Ai;return{pages:k(w.pages,D,R),pageParams:k(w.pageParams,C,R)}};if(n&&i.length){const w=n==="backward",C=w?zi:gr,S={pages:i,pageParams:o},A=C(a,S);l=await b(S,A,w)}else{const w=t??i.length;do{const C=d===0?o[0]??a.initialPageParam:gr(a,l);if(d>0&&C==null)break;l=await b(l,C),d++}while(d<w)}return l};s.options.persister?s.fetchFn=()=>{var v,f;return(f=(v=s.options).persister)==null?void 0:f.call(v,h,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r)}:s.fetchFn=h}}}function gr(t,{pages:s,pageParams:r}){const a=s.length-1;return s.length>0?t.getNextPageParam(s[a],s,r[a],r):void 0}function zi(t,{pages:s,pageParams:r}){var a;return s.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,s[0],s,r[0],r):void 0}var Et,he,_,Ge,me,ke,Ir,Vi=(Ir=class extends aa{constructor(s){super();E(this,me);E(this,Et);E(this,he);E(this,_);E(this,Ge);P(this,Et,s.client),this.mutationId=s.mutationId,P(this,_,s.mutationCache),P(this,he,[]),this.state=s.state||qi(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){m(this,he).includes(s)||(m(this,he).push(s),this.clearGcTimeout(),m(this,_).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){P(this,he,m(this,he).filter(r=>r!==s)),this.scheduleGc(),m(this,_).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){m(this,he).length||(this.state.status==="pending"?this.scheduleGc():m(this,_).remove(this))}continue(){var s;return((s=m(this,Ge))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var o,l,d,h,u,x,y,g,p,v,f,j,b,w,C,S,A,I,D,R;const r=()=>{F(this,me,ke).call(this,{type:"continue"})},a={client:m(this,Et),meta:this.options.meta,mutationKey:this.options.mutationKey};P(this,Ge,ra({fn:()=>this.options.mutationFn?this.options.mutationFn(s,a):Promise.reject(new Error("No mutationFn found")),onFail:(k,B)=>{F(this,me,ke).call(this,{type:"failed",failureCount:k,error:B})},onPause:()=>{F(this,me,ke).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>m(this,_).canRun(this)}));const n=this.state.status==="pending",i=!m(this,Ge).canStart();try{if(n)r();else{F(this,me,ke).call(this,{type:"pending",variables:s,isPaused:i}),await((l=(o=m(this,_).config).onMutate)==null?void 0:l.call(o,s,this,a));const B=await((h=(d=this.options).onMutate)==null?void 0:h.call(d,s,a));B!==this.state.context&&F(this,me,ke).call(this,{type:"pending",context:B,variables:s,isPaused:i})}const k=await m(this,Ge).start();return await((x=(u=m(this,_).config).onSuccess)==null?void 0:x.call(u,k,s,this.state.context,this,a)),await((g=(y=this.options).onSuccess)==null?void 0:g.call(y,k,s,this.state.context,a)),await((v=(p=m(this,_).config).onSettled)==null?void 0:v.call(p,k,null,this.state.variables,this.state.context,this,a)),await((j=(f=this.options).onSettled)==null?void 0:j.call(f,k,null,s,this.state.context,a)),F(this,me,ke).call(this,{type:"success",data:k}),k}catch(k){try{throw await((w=(b=m(this,_).config).onError)==null?void 0:w.call(b,k,s,this.state.context,this,a)),await((S=(C=this.options).onError)==null?void 0:S.call(C,k,s,this.state.context,a)),await((I=(A=m(this,_).config).onSettled)==null?void 0:I.call(A,void 0,k,this.state.variables,this.state.context,this,a)),await((R=(D=this.options).onSettled)==null?void 0:R.call(D,void 0,k,s,this.state.context,a)),k}finally{F(this,me,ke).call(this,{type:"error",error:k})}}finally{m(this,_).runNext(this)}}},Et=new WeakMap,he=new WeakMap,_=new WeakMap,Ge=new WeakMap,me=new WeakSet,ke=function(s){const r=a=>{switch(s.type){case"failed":return{...a,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...a,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:s.error,failureCount:a.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=r(this.state),q.batch(()=>{m(this,he).forEach(a=>{a.onMutationUpdate(s)}),m(this,_).notify({mutation:this,type:"updated",action:s})})},Ir);function qi(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var je,ce,At,Rr,Qi=(Rr=class extends Mt{constructor(s={}){super();E(this,je);E(this,ce);E(this,At);this.config=s,P(this,je,new Set),P(this,ce,new Map),P(this,At,0)}build(s,r,a){const n=new Vi({client:s,mutationCache:this,mutationId:++Wt(this,At)._,options:s.defaultMutationOptions(r),state:a});return this.add(n),n}add(s){m(this,je).add(s);const r=Ht(s);if(typeof r=="string"){const a=m(this,ce).get(r);a?a.push(s):m(this,ce).set(r,[s])}this.notify({type:"added",mutation:s})}remove(s){if(m(this,je).delete(s)){const r=Ht(s);if(typeof r=="string"){const a=m(this,ce).get(r);if(a)if(a.length>1){const n=a.indexOf(s);n!==-1&&a.splice(n,1)}else a[0]===s&&m(this,ce).delete(r)}}this.notify({type:"removed",mutation:s})}canRun(s){const r=Ht(s);if(typeof r=="string"){const a=m(this,ce).get(r),n=a==null?void 0:a.find(i=>i.state.status==="pending");return!n||n===s}else return!0}runNext(s){var a;const r=Ht(s);if(typeof r=="string"){const n=(a=m(this,ce).get(r))==null?void 0:a.find(i=>i!==s&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){q.batch(()=>{m(this,je).forEach(s=>{this.notify({type:"removed",mutation:s})}),m(this,je).clear(),m(this,ce).clear()})}getAll(){return Array.from(m(this,je))}find(s){const r={exact:!0,...s};return this.getAll().find(a=>cr(r,a))}findAll(s={}){return this.getAll().filter(r=>cr(s,r))}notify(s){q.batch(()=>{this.listeners.forEach(r=>{r(s)})})}resumePausedMutations(){const s=this.getAll().filter(r=>r.state.isPaused);return q.batch(()=>Promise.all(s.map(r=>r.continue().catch(J))))}},je=new WeakMap,ce=new WeakMap,At=new WeakMap,Rr);function Ht(t){var s;return(s=t.options.scope)==null?void 0:s.id}var xe,Er,Yi=(Er=class extends Mt{constructor(s={}){super();E(this,xe);this.config=s,P(this,xe,new Map)}build(s,r,a){const n=r.queryKey,i=r.queryHash??Bs(n,r);let o=this.get(i);return o||(o=new Bi({client:s,queryKey:n,queryHash:i,options:s.defaultQueryOptions(r),state:a,defaultOptions:s.getQueryDefaults(n)}),this.add(o)),o}add(s){m(this,xe).has(s.queryHash)||(m(this,xe).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const r=m(this,xe).get(s.queryHash);r&&(s.destroy(),r===s&&m(this,xe).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){q.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return m(this,xe).get(s)}getAll(){return[...m(this,xe).values()]}find(s){const r={exact:!0,...s};return this.getAll().find(a=>lr(r,a))}findAll(s={}){const r=this.getAll();return Object.keys(s).length>0?r.filter(a=>lr(s,a)):r}notify(s){q.batch(()=>{this.listeners.forEach(r=>{r(s)})})}onFocus(){q.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){q.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},xe=new WeakMap,Er),H,De,Oe,ut,ht,Me,mt,xt,Ar,_i=(Ar=class{constructor(t={}){E(this,H);E(this,De);E(this,Oe);E(this,ut);E(this,ht);E(this,Me);E(this,mt);E(this,xt);P(this,H,t.queryCache||new Yi),P(this,De,t.mutationCache||new Qi),P(this,Oe,t.defaultOptions||{}),P(this,ut,new Map),P(this,ht,new Map),P(this,Me,0)}mount(){Wt(this,Me)._++,m(this,Me)===1&&(P(this,mt,$s.subscribe(async t=>{t&&(await this.resumePausedMutations(),m(this,H).onFocus())})),P(this,xt,_t.subscribe(async t=>{t&&(await this.resumePausedMutations(),m(this,H).onOnline())})))}unmount(){var t,s;Wt(this,Me)._--,m(this,Me)===0&&((t=m(this,mt))==null||t.call(this),P(this,mt,void 0),(s=m(this,xt))==null||s.call(this),P(this,xt,void 0))}isFetching(t){return m(this,H).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return m(this,De).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=m(this,H).get(s.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=m(this,H).build(this,s),a=r.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Fe(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(a))}getQueriesData(t){return m(this,H).findAll(t).map(({queryKey:s,state:r})=>{const a=r.data;return[s,a]})}setQueryData(t,s,r){const a=this.defaultQueryOptions({queryKey:t}),n=m(this,H).get(a.queryHash),i=n==null?void 0:n.state.data,o=Ii(s,i);if(o!==void 0)return m(this,H).build(this,a).setData(o,{...r,manual:!0})}setQueriesData(t,s,r){return q.batch(()=>m(this,H).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,s,r)]))}getQueryState(t){var r;const s=this.defaultQueryOptions({queryKey:t});return(r=m(this,H).get(s.queryHash))==null?void 0:r.state}removeQueries(t){const s=m(this,H);q.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=m(this,H);return q.batch(()=>(r.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},a=q.batch(()=>m(this,H).findAll(t).map(n=>n.cancel(r)));return Promise.all(a).then(J).catch(J)}invalidateQueries(t,s={}){return q.batch(()=>(m(this,H).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},a=q.batch(()=>m(this,H).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(J)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(J)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=m(this,H).build(this,s);return r.isStaleByTime(Fe(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(J).catch(J)}fetchInfiniteQuery(t){return t.behavior=fr(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(J).catch(J)}ensureInfiniteQueryData(t){return t.behavior=fr(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return _t.isOnline()?m(this,De).resumePausedMutations():Promise.resolve()}getQueryCache(){return m(this,H)}getMutationCache(){return m(this,De)}getDefaultOptions(){return m(this,Oe)}setDefaultOptions(t){P(this,Oe,t)}setQueryDefaults(t,s){m(this,ut).set(Pt(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...m(this,ut).values()],r={};return s.forEach(a=>{kt(t,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(t,s){m(this,ht).set(Pt(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...m(this,ht).values()],r={};return s.forEach(a=>{kt(t,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...m(this,Oe).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=Bs(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===Ws&&(s.enabled=!1),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...m(this,Oe).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){m(this,H).clear(),m(this,De).clear()}},H=new WeakMap,De=new WeakMap,Oe=new WeakMap,ut=new WeakMap,ht=new WeakMap,Me=new WeakMap,mt=new WeakMap,xt=new WeakMap,Ar),oa=c.createContext(void 0),Gi=t=>{const s=c.useContext(oa);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},Ki=({client:t,children:s})=>(c.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(oa.Provider,{value:t,children:s})),la=c.createContext(!1),Ji=()=>c.useContext(la);la.Provider;function Xi(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Zi=c.createContext(Xi()),eo=()=>c.useContext(Zi),to=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},so=t=>{c.useEffect(()=>{t.clearReset()},[t])},ro=({result:t,errorResetBoundary:s,throwOnError:r,query:a,suspense:n})=>t.isError&&!s.isReset()&&!t.isFetching&&a&&(n&&t.data===void 0||Di(r,[t.error,a])),ao=t=>{if(t.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),a=t.staleTime;t.staleTime=typeof a=="function"?(...n)=>r(a(...n)):r(a),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},no=(t,s)=>t.isLoading&&t.isFetching&&!s,io=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,yr=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function oo(t,s,r){var x,y,g,p,v;const a=Ji(),n=eo(),i=Gi(),o=i.defaultQueryOptions(t);(y=(x=i.getDefaultOptions().queries)==null?void 0:x._experimental_beforeQuery)==null||y.call(x,o),o._optimisticResults=a?"isRestoring":"optimistic",ao(o),to(o,n),so(n);const l=!i.getQueryCache().get(o.queryHash),[d]=c.useState(()=>new s(i,o)),h=d.getOptimisticResult(o),u=!a&&t.subscribed!==!1;if(c.useSyncExternalStore(c.useCallback(f=>{const j=u?d.subscribe(q.batchCalls(f)):J;return d.updateResult(),j},[d,u]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),c.useEffect(()=>{d.setOptions(o)},[o,d]),io(o,h))throw yr(o,d,n);if(ro({result:h,errorResetBoundary:n,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;if((p=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||p.call(g,o,h),o.experimental_prefetchInRender&&!Je&&no(h,a)){const f=l?yr(o,d,n):(v=i.getQueryCache().get(o.queryHash))==null?void 0:v.promise;f==null||f.catch(J).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?h:d.trackResult(h)}function ca(t,s){return oo(t,Wi)}const lo=()=>e.jsxs("div",{className:"sticky top-0 z-40 w-full bg-action-primary text-white py-4 px-4 text-center",children:[e.jsx("div",{className:"font-semibold",children:"ðŸŽ‰ Launching Dec 1st"}),e.jsx("div",{className:"text-sm opacity-90",children:"Early Access â€¢ Features in Development"})]}),M=({children:t,className:s,variant:r="primary",size:a="md",...n})=>{const i="font-body font-bold rounded-md focus:outline-none focus:ring-4 transition-all duration-300 transform hover:brightness-105",o={sm:"px-4 py-2 md:py-1.5 text-sm",md:"px-6 py-3 md:py-2.5 text-base",lg:"px-8 py-4 md:py-3.5 text-lg"},l={primary:"bg-action-primary text-white focus:ring-[var(--color-action-primary)]/30",secondary:"border-2 border-action-primary text-action-primary bg-transparent focus:ring-[var(--color-action-primary)]/30 hover:bg-action-primary/10",payment:"bg-action-primary text-white focus:ring-[var(--color-action-primary)]/40 hover:opacity-90",outline:"border-2 border-action-primary text-action-primary bg-transparent focus:ring-[var(--color-action-primary)]/30 hover:bg-action-primary/10",redeem:"bg-urgency-high text-white focus:ring-[var(--color-urgency-high)]/30"};return e.jsx("button",{className:`${i} ${o[a]} ${l[r]} ${s}`,...n,children:t})},da=c.createContext(void 0),co=({children:t})=>{const[s,r]=c.useState("light");c.useEffect(()=>{const i=localStorage.getItem("theme")||"light";r(i)},[]),c.useEffect(()=>{s==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",s)},[s]);const a=()=>{r(n=>n==="light"?"dark":"light")};return e.jsx(da.Provider,{value:{theme:s,toggleTheme:a},children:t})},Te=()=>{const t=c.useContext(da);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},ua=(t,s,r)=>{const a=c.useRef({x:0,y:0}),n=typeof r=="number"?{threshold:r}:r||{},i=n.threshold??50,o=n.directionRatio??1.5;c.useEffect(()=>{if(!t)return;const l=h=>{a.current={x:h.touches[0].clientX,y:h.touches[0].clientY}},d=h=>{var j,b,w,C;const u={x:h.changedTouches[0].clientX,y:h.changedTouches[0].clientY},x=u.x-a.current.x,y=u.y-a.current.y,g=Math.abs(x),p=Math.abs(y),v=g>p*o,f=p>g*o;v&&g>i?x>0?(j=s.onSwipeRight)==null||j.call(s):(b=s.onSwipeLeft)==null||b.call(s):f&&p>i&&(y>0?(w=s.onSwipeDown)==null||w.call(s):(C=s.onSwipeUp)==null||C.call(s))};return t.addEventListener("touchstart",l,!1),t.addEventListener("touchend",d,!1),()=>{t.removeEventListener("touchstart",l,!1),t.removeEventListener("touchend",d,!1)}},[t,s,i,o])},st={tap:()=>{"vibrate"in navigator&&navigator.vibrate(10)},success:()=>{"vibrate"in navigator&&navigator.vibrate([10,20,10])},error:()=>{"vibrate"in navigator&&navigator.vibrate([20,10,20,10,40])},impact:()=>{"vibrate"in navigator&&navigator.vibrate(30)}};let se=null,re=!1,tt=[];console.log("[PWA] pwaPrompt.ts module loading...");const Ss=()=>{tt.forEach(t=>{try{t()}catch(s){console.error("[PWA] Error in availability listener:",s)}})};function uo(){console.log("[PWA] Setting up PWA handlers");const t=r=>{console.log("[PWA] beforeinstallprompt event fired!"),se=r,re=!1,console.log("[PWA] Install prompt captured - allowing browser native UI to show"),Ss()},s=()=>{console.log("[PWA] App installed successfully"),se=null,re=!1};typeof window<"u"&&"addEventListener"in window&&(window.addEventListener("beforeinstallprompt",t,!0),window.addEventListener("appinstalled",s,!0),console.log("[PWA] Event listeners registered"))}uo();if(typeof window<"u"){const t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=/Chrome/.test(navigator.userAgent),r=/Android/.test(navigator.userAgent);console.log("[PWA] Browser detection:",{isSafari:t,isChrome:s,isAndroid:r,userAgent:navigator.userAgent}),t&&console.log('[PWA] Running on Safari - beforeinstallprompt not supported. Use native "Add to Home Screen" from Share menu'),window.debugPWA={getDeferredPrompt:()=>se,getPromptShown:()=>re,isAvailable:()=>!!se&&!re,reset:()=>{se=null,re=!1},getBrowserInfo:()=>({isSafari:t,isChrome:s,isAndroid:r,userAgent:navigator.userAgent}),checkManifest:async()=>{try{const n=await(await fetch("/manifest.json")).json();return console.log("[PWA] Manifest loaded:",n),n}catch(a){console.error("[PWA] Failed to load manifest:",a)}}}}console.log("[PWA] pwaPrompt.ts loaded and initialized");const ho=async()=>{if(console.log("[PWA] showPWAPrompt called",{deferredPrompt:!!se,promptShown:re}),se&&!re){re=!0;try{console.log("[PWA] Calling deferredPrompt.prompt()"),se.prompt();const{outcome:t}=await se.userChoice;console.log(`[PWA] User response: ${t}`),se=null,re=!1,Ss()}catch(t){console.error("[PWA] Error showing PWA prompt:",t),re=!1,Ss()}}else console.log("[PWA] Cannot show prompt:",{deferredPrompt:!!se,promptShown:re})},br=()=>{const t=!!se&&!re;return console.log("[PWA] isPWAPromptAvailable called",{deferredPrompt:!!se,promptShown:re,available:t}),t},mo=t=>(tt.push(t),console.log("[PWA] Listener registered, total listeners:",tt.length),()=>{tt=tt.filter(s=>s!==t),console.log("[PWA] Listener unregistered, remaining listeners:",tt.length)}),os=()=>{const{theme:t,toggleTheme:s}=Te(),[r,a]=c.useState(!1);return c.useEffect(()=>{a(!0)},[]),r?e.jsx("button",{onClick:s,className:"p-2 rounded-full text-action-primary hover:bg-bg-card transition-colors focus:outline-none focus:ring-2 focus:ring-[var(--color-action-primary)]","aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})}):e.jsx("div",{className:"w-10 h-10"})},xo=({onButtonClick:t,buttonText:s,onAuthClick:r,onSignOutClick:a,onActivateClick:n,isAuthenticated:i,userEmail:o,userPhotoURL:l,isSignedIn:d,tabs:h,currentPath:u,onTabClick:x})=>{const{theme:y}=Te(),[g,p]=c.useState(!1),[v,f]=c.useState(!1),[j,b]=c.useState(!1),w=c.useRef(null);c.useEffect(()=>{const R=br();return b(R),mo(()=>{const B=br();b(B)})},[]);const C=()=>{st.tap(),p(!g)},S=R=>{const k=document.getElementById(R);k&&k.scrollIntoView({behavior:"smooth"}),p(!1)},A=()=>{t(),p(!1)};c.useEffect(()=>{const R=()=>{f(window.scrollY>10)};return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[]),c.useEffect(()=>(g?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[g]),ua(g?w.current:null,{onSwipeDown:()=>{p(!1)}},30);const I=[{name:"Showcase",id:"deals-showcase"},{name:"All Deals",id:"full-deal-list"},{name:"FAQ",id:"faq"}];return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:`sticky top-0 z-30 bg-bg-primary transition-all duration-300 ${v?"shadow-lg border-b border-border-subtle":""}`,style:{position:"sticky",top:0,zIndex:30},children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-4 flex justify-between items-center",children:[e.jsx("a",{href:"#",onClick:R=>{R.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},className:"flex items-center md:flex-1",children:e.jsx("img",{src:y==="dark"?"/Images/logo-ocean.svg":"/Images/logo-sand.svg",alt:"Port Alfred Holiday Pass Logo",className:"h-16 w-auto"})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-8 flex-1 justify-between",children:[h&&h.length>0&&e.jsx("nav",{className:"flex items-center gap-1",children:h.map(R=>e.jsx("button",{onClick:()=>{st.tap(),x==null||x(R.path)},className:`px-3 py-2 font-semibold text-sm transition-colors border-b-2 ${u===R.path?"border-action-primary text-action-primary":"border-transparent text-text-secondary hover:text-text-primary"}`,children:R.label},R.id))}),e.jsxs("nav",{className:"flex items-center space-x-8",children:[e.jsx(os,{}),i?e.jsxs(e.Fragment,{children:[e.jsx(M,{onClick:t,variant:"primary",size:"sm",className:"whitespace-nowrap",children:s}),l?e.jsx("img",{src:l,alt:o||"User profile",className:"w-10 h-10 rounded-full object-cover border-2 border-action-primary",onError:R=>{R.target.style.display="none"}}):null,!l&&e.jsx("div",{className:"w-10 h-10 rounded-full bg-action-primary flex items-center justify-center text-text-primary font-semibold text-xs",children:o==null?void 0:o.charAt(0).toUpperCase()}),e.jsx(M,{onClick:a,variant:"outline",size:"sm",children:"Sign Out"})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{onClick:r,variant:"outline",size:"sm",children:"Sign In"}),e.jsx(M,{onClick:t,variant:"primary",size:"sm",children:s})]})]})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(os,{})})]})}),!d&&e.jsxs("button",{onClick:C,className:"fixed bottom-0 left-0 right-0 md:hidden z-20 w-full px-8 py-6 bg-bg-card text-text-primary font-bold text-xl flex items-center justify-center gap-3 rounded-t-3xl shadow-lg border-t-8 hover:shadow-xl hover:bg-gray-50 transition-all border-brand-dark-blue",style:{boxShadow:y==="dark"?"0 -4px 8px rgba(0, 0, 0, 0.4), 0 -12px 20px rgba(0, 0, 0, 0.5)":"0 -4px 8px rgba(0, 0, 0, 0.1), 0 -12px 20px rgba(0, 0, 0, 0.15)"},"aria-label":"Open menu","aria-expanded":g,children:[e.jsx("svg",{className:"h-8 w-8 transition-transform duration-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{transform:g?"rotate(180deg)":"rotate(0deg)"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 14l-7-7m0 0l-7 7m7-7v12"})}),e.jsx("span",{children:"Menu"})]}),!d&&e.jsx("div",{className:`fixed inset-0 modal-backdrop z-40 transition-opacity duration-300 ease-in-out md:hidden ${g?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:C,"aria-hidden":!g,role:"dialog","aria-modal":"true",children:e.jsxs("div",{ref:w,className:`absolute bottom-0 left-0 right-0 bg-bg-card shadow-2xl rounded-t-3xl transform transition-transform duration-300 ease-in-out max-h-[90vh] overflow-y-auto ${g?"translate-y-0":"translate-y-full"}`,onClick:R=>R.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-12 h-1 bg-border-subtle rounded-full"})}),e.jsxs("div",{className:"flex justify-center items-center px-6 pb-6",children:[e.jsx("h2",{className:"text-2xl font-display font-black text-text-primary",children:"Menu"}),e.jsx("div",{className:"absolute right-6",children:e.jsx(os,{})})]}),e.jsxs("nav",{className:"flex flex-col space-y-8 px-6 pb-4 text-center",children:[I.map(R=>e.jsx("a",{href:`#${R.id}`,onClick:k=>{k.preventDefault(),S(R.id)},className:"text-action-primary font-display text-4xl font-extrabold hover:text-urgency-high transition-colors",children:R.name},R.id)),e.jsx("div",{className:"border-t-2 border-action-primary/20 pt-8 mt-8",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 px-2 py-2",children:[l?e.jsx("img",{src:l,alt:o||"User profile",className:"w-12 h-12 rounded-full object-cover border-2 border-action-primary flex-shrink-0",onError:R=>{R.target.style.display="none"}}):null,!l&&e.jsx("div",{className:"w-12 h-12 rounded-full bg-action-primary flex items-center justify-center text-text-primary font-semibold text-lg flex-shrink-0",children:o==null?void 0:o.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-text-primary text-sm font-semibold truncate",children:o})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{onClick:A,variant:"primary",className:"w-full py-4 text-lg font-bold",children:s}),e.jsx(M,{onClick:()=>{a==null||a(),C()},variant:"outline",className:"w-full py-4 text-lg font-bold",children:"Sign Out"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{onClick:()=>{r==null||r(),C()},variant:"outline",className:"w-full py-4 text-lg font-bold",children:"Sign In"}),e.jsx(M,{onClick:A,variant:"primary",className:"w-full py-4 text-lg font-bold",children:s})]})}),j&&e.jsx("div",{className:"border-t-2 border-action-primary/20 pt-8 mt-8",children:e.jsxs("button",{onClick:async()=>{await ho(),b(!1)},className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-white bg-action-primary hover:brightness-110 transition-all font-semibold","aria-label":"Install Holiday Pass app",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),e.jsx("polyline",{points:"16 6 12 2 8 6"}),e.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),e.jsx("span",{children:"Install App"})]})}),e.jsx("div",{className:`${j?"":"border-t-2 border-action-primary/20 pt-8 mt-8"} pb-8`,children:e.jsxs("a",{href:"https://wa.me/27799569040",target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-white bg-[#25D366] hover:brightness-110 transition-all font-semibold","aria-label":"Chat with us on WhatsApp",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.371-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01s-.521.074-.792.372c-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.626.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"})}),e.jsx("span",{children:"WhatsApp Support"})]})})]})]})})]})},po=({onButtonClick:t,buttonText:s,hasPass:r,onPrivacyClick:a,onTermsClick:n})=>{const{theme:i}=Te();return e.jsx("footer",{className:"bg-action-primary text-white relative pt-20 pb-32 md:pb-16",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 text-center scroll-reveal",children:[!r&&e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-black mb-4",children:["Ready for a ",e.jsx("span",{className:"text-value-highlight",children:"Lekker"})," Holiday?"]}),e.jsxs("p",{className:"text-lg md:text-xl text-white/90 mb-8 max-w-2xl mx-auto leading-relaxed",children:["Get instant access to all these deals and more. Make your holiday in Port Alfred the most ",e.jsx("span",{className:"font-bold text-value-highlight",children:"memorable"})," (and ",e.jsx("span",{className:"font-bold text-value-highlight",children:"affordable"}),") one yet."]}),e.jsx(M,{variant:"primary",size:"lg",className:"!bg-white !text-action-primary hover:!bg-white/90 px-12 md:px-14 transform hover:scale-105 shadow-xl",onClick:t,children:s})]}),e.jsxs("div",{className:`${r?"mt-0":"mt-16"} border-t border-white/20 pt-8 text-white/90`,children:[e.jsx("div",{className:"mx-auto mb-6 w-16 h-16 flex-shrink-0",children:e.jsx("img",{src:i==="dark"?"/Images/logo-dark.png":"/Images/logo-light.png",alt:"Port Alfred Holiday Pass Logo",className:"w-full h-full object-contain"})}),e.jsxs("p",{children:["Â© ",new Date().getFullYear()," Port Alfred Holiday Pass. All rights reserved."]}),e.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-4 text-sm",children:[e.jsx("button",{onClick:a,className:"text-white hover:text-value-highlight underline transition",children:"Privacy Policy"}),e.jsx("span",{children:"â€¢"}),e.jsx("button",{onClick:n,className:"text-white hover:text-value-highlight underline transition",children:"Terms of Service"})]})]})]})})},pe=({isOpen:t,onClose:s,title:r,children:a,maxWidth:n="sm",showCloseButton:i=!0,closeButtonPosition:o="top-right"})=>{if(!t)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return e.jsx("div",{className:"fixed inset-0 bg-bg-primary/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:s,role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:`bg-bg-card rounded-2xl shadow-2xl p-6 sm:p-8 ${l[n]} w-full relative border border-border-subtle my-8`,onClick:d=>d.stopPropagation(),children:[i&&o==="top-right"&&e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-text-secondary hover:text-text-primary transition-colors focus:outline-none focus:ring-2 focus:ring-action-primary rounded-md p-1","aria-label":"Close modal",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r&&e.jsx("h2",{className:"text-2xl sm:text-3xl font-display font-black text-accent-primary mb-4",children:r}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(100vh-100px)]",children:a}),i&&o==="bottom"&&e.jsx("button",{onClick:s,className:"w-full mt-6 px-4 py-2 rounded-lg bg-bg-primary text-text-primary font-medium hover:bg-bg-primary/80 transition-colors",children:"Close"})]})})},Ne=({type:t,value:s,onChange:r,placeholder:a,ariaLabel:n,disabled:i=!1,required:o=!1})=>e.jsx("input",{type:t,value:s,onChange:r,placeholder:a,required:o,disabled:i,"aria-label":n,className:"w-full px-4 py-3 bg-bg-primary border-2 border-accent-primary/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-secondary transition text-text-primary"}),ha=c.createContext(void 0),fo=({children:t})=>{const[s,r]=c.useState([]),a=c.useCallback((i,o="info",l=3e3)=>{const d=Date.now().toString(),h={id:d,message:i,type:o,duration:l};r(u=>[...u,h]),l>0&&setTimeout(()=>{n(d)},l)},[]),n=c.useCallback(i=>{r(o=>o.filter(l=>l.id!==i))},[]);return e.jsx(ha.Provider,{value:{toasts:s,showToast:a,removeToast:n},children:t})},ma=()=>{const t=c.useContext(ha);if(!t)throw new Error("useToast must be used within ToastProvider");return t},xa=t=>!t||!t.trim()?{field:"email",message:"Email is required"}:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?null:{field:"email",message:"Please enter a valid email address"},go=(t,s)=>!t||!t.trim()?{field:s,message:`${s} is required`}:null,yo=(t,s=6)=>t?t.length<s?{field:"password",message:`Password must be at least ${s} characters`}:null:{field:"password",message:"Password is required"},bo=(t,s)=>t!==s?{field:"confirmPassword",message:"Passwords do not match"}:null,vo=t=>t?t.length!==4?{field:"pin",message:"PIN must be 4 digits"}:/^\d+$/.test(t)?null:{field:"pin",message:"PIN must contain only numbers"}:{field:"pin",message:"PIN is required"},jo=t=>!t||!t.trim()?{field:"name",message:"Full name is required"}:t.trim().length<2?{field:"name",message:"Please enter your full name"}:null,wo=(t,s,r)=>!t||!s||!r?{field:"consent",message:"You must agree to all terms and conditions to create an account"}:null,No={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},pa=Ua(No),bt=Ba(pa),Q=Wa(pa),Co=new $a,fa=async()=>{try{const t=await Es(fe(Q,"stats","passCount"));return(t.exists()&&t.data().count||0)<50?{price:99,cents:9900,launchPricing:!0}:{price:199,cents:19900,launchPricing:!1}}catch(t){return console.error("Error fetching pass price:",t),{price:199,cents:19900,launchPricing:!1}}},Po=({isOpen:t,onClose:s,passType:r,userEmail:a,userId:n})=>{const{showToast:i}=ma(),[o,l]=c.useState(""),[d,h]=c.useState(a||""),[u,x]=c.useState(!1),[y,g]=c.useState({price:199,cents:19900,launchPricing:!1});c.useEffect(()=>{t&&(async()=>{const j=await fa();g(j)})()},[t]);const p=async()=>{try{x(!0);const f=await fetch("/.netlify/functions/create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:y.cents,passType:"holiday",userEmail:d.trim(),passHolderName:o.trim(),userId:n})}),j=await f.json();if(!f.ok){st.error(),i("Error creating payment: "+(j.error||"Unknown error"),"error"),x(!1);return}j.redirectUrl?window.location.href=j.redirectUrl:(st.error(),i("Error: No payment URL received","error"),x(!1))}catch{st.error(),i("An error occurred. Please try again.","error"),x(!1)}},v=async f=>{f.preventDefault();const j=jo(o);if(j){i(j.message,"error");return}const b=xa(d);if(b){i(b.message,"error");return}await p()};return e.jsxs(pe,{isOpen:t,onClose:s,title:`Get Your ${r.charAt(0).toUpperCase()+r.slice(1)} Pass!`,maxWidth:"md",children:[e.jsx("p",{className:"text-text-secondary mb-8",children:"Enter your details to personalize and purchase your pass."}),e.jsxs("div",{className:"mb-8 space-y-2 text-sm text-text-secondary",children:[e.jsx("p",{children:"â€¢ Secure payment with Yoco"}),e.jsx("p",{children:"â€¢ SSL encrypted and secure"}),e.jsx("p",{children:"â€¢ 14-day money-back guarantee"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-8 text-left",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-action-primary mb-4",children:"1. YOUR DETAILS"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ne,{type:"text",value:o,onChange:f=>l(f.target.value),placeholder:"Your Full Name",ariaLabel:"Your Full Name",disabled:u,required:!0}),e.jsx(Ne,{type:"email",value:d,onChange:f=>h(f.target.value),placeholder:"Your Email Address",ariaLabel:"Your Email Address",disabled:u||!!a,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-action-primary mb-3",children:"2. SELECT PAYMENT METHOD"}),e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"flex-1 h-px bg-border-subtle"}),e.jsx("span",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wide",children:"Pay by Card"}),e.jsx("div",{className:"flex-1 h-px bg-border-subtle"})]}),e.jsx("div",{className:"text-sm text-text-secondary mb-6",children:"You will be redirected to Yoco's secure payment page."}),y.launchPricing&&e.jsx("div",{className:"bg-urgency-high bg-opacity-10 border border-urgency-high rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-urgency-high font-semibold",children:["ðŸŽ‰ Launch Pricing: R",y.price," (Limited time)"]})}),e.jsx(M,{type:"submit",variant:"payment",className:"w-full text-lg bg-brand-yellow !text-gray-900 font-bold",disabled:u,children:u?"Redirecting to Payment...":e.jsxs(e.Fragment,{children:["Pay R",e.jsx("span",{className:"font-bold",children:y.price})," with Card"]})})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-border-subtle text-xs text-text-secondary space-y-2",children:[e.jsx("p",{children:"Your payment is processed by Yoco, South Africa's leading payment processor."}),e.jsx("p",{children:"We never store your card details. Your data is encrypted and secure."})]})]})};var qt={linear:function(t,s,r,a){var n=r-s;return n*t/a+s},easeInQuad:function(t,s,r,a){var n=r-s;return n*(t/=a)*t+s},easeOutQuad:function(t,s,r,a){var n=r-s;return-n*(t/=a)*(t-2)+s},easeInOutQuad:function(t,s,r,a){var n=r-s;return(t/=a/2)<1?n/2*t*t+s:-n/2*(--t*(t-2)-1)+s},easeInCubic:function(t,s,r,a){var n=r-s;return n*(t/=a)*t*t+s},easeOutCubic:function(t,s,r,a){var n=r-s;return n*((t=t/a-1)*t*t+1)+s},easeInOutCubic:function(t,s,r,a){var n=r-s;return(t/=a/2)<1?n/2*t*t*t+s:n/2*((t-=2)*t*t+2)+s},easeInQuart:function(t,s,r,a){var n=r-s;return n*(t/=a)*t*t*t+s},easeOutQuart:function(t,s,r,a){var n=r-s;return-n*((t=t/a-1)*t*t*t-1)+s},easeInOutQuart:function(t,s,r,a){var n=r-s;return(t/=a/2)<1?n/2*t*t*t*t+s:-n/2*((t-=2)*t*t*t-2)+s},easeInQuint:function(t,s,r,a){var n=r-s;return n*(t/=a)*t*t*t*t+s},easeOutQuint:function(t,s,r,a){var n=r-s;return n*((t=t/a-1)*t*t*t*t+1)+s},easeInOutQuint:function(t,s,r,a){var n=r-s;return(t/=a/2)<1?n/2*t*t*t*t*t+s:n/2*((t-=2)*t*t*t*t+2)+s},easeInSine:function(t,s,r,a){var n=r-s;return-n*Math.cos(t/a*(Math.PI/2))+n+s},easeOutSine:function(t,s,r,a){var n=r-s;return n*Math.sin(t/a*(Math.PI/2))+s},easeInOutSine:function(t,s,r,a){var n=r-s;return-n/2*(Math.cos(Math.PI*t/a)-1)+s},easeInExpo:function(t,s,r,a){var n=r-s;return t==0?s:n*Math.pow(2,10*(t/a-1))+s},easeOutExpo:function(t,s,r,a){var n=r-s;return t==a?s+n:n*(-Math.pow(2,-10*t/a)+1)+s},easeInOutExpo:function(t,s,r,a){var n=r-s;return t===0?s:t===a?s+n:(t/=a/2)<1?n/2*Math.pow(2,10*(t-1))+s:n/2*(-Math.pow(2,-10*--t)+2)+s},easeInCirc:function(t,s,r,a){var n=r-s;return-n*(Math.sqrt(1-(t/=a)*t)-1)+s},easeOutCirc:function(t,s,r,a){var n=r-s;return n*Math.sqrt(1-(t=t/a-1)*t)+s},easeInOutCirc:function(t,s,r,a){var n=r-s;return(t/=a/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+s:n/2*(Math.sqrt(1-(t-=2)*t)+1)+s},easeInElastic:function(t,s,r,a){var n=r-s,i,o,l;return l=1.70158,o=0,i=n,t===0?s:(t/=a)===1?s+n:(o||(o=a*.3),i<Math.abs(n)?(i=n,l=o/4):l=o/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*a-l)*(2*Math.PI)/o))+s)},easeOutElastic:function(t,s,r,a){var n=r-s,i,o,l;return l=1.70158,o=0,i=n,t===0?s:(t/=a)===1?s+n:(o||(o=a*.3),i<Math.abs(n)?(i=n,l=o/4):l=o/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*a-l)*(2*Math.PI)/o)+n+s)},easeInOutElastic:function(t,s,r,a){var n=r-s,i,o,l;return l=1.70158,o=0,i=n,t===0?s:(t/=a/2)===2?s+n:(o||(o=a*(.3*1.5)),i<Math.abs(n)?(i=n,l=o/4):l=o/(2*Math.PI)*Math.asin(n/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*a-l)*(2*Math.PI)/o))+s:i*Math.pow(2,-10*(t-=1))*Math.sin((t*a-l)*(2*Math.PI)/o)*.5+n+s)},easeInBack:function(t,s,r,a,n){var i=r-s;return n===void 0&&(n=1.70158),i*(t/=a)*t*((n+1)*t-n)+s},easeOutBack:function(t,s,r,a,n){var i=r-s;return n===void 0&&(n=1.70158),i*((t=t/a-1)*t*((n+1)*t+n)+1)+s},easeInOutBack:function(t,s,r,a,n){var i=r-s;return n===void 0&&(n=1.70158),(t/=a/2)<1?i/2*(t*t*(((n*=1.525)+1)*t-n))+s:i/2*((t-=2)*t*(((n*=1.525)+1)*t+n)+2)+s},easeInBounce:function(t,s,r,a){var n=r-s,i;return i=qt.easeOutBounce(a-t,0,n,a),n-i+s},easeOutBounce:function(t,s,r,a){var n=r-s;return(t/=a)<1/2.75?n*(7.5625*t*t)+s:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+s:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+s:n*(7.5625*(t-=2.625/2.75)*t+.984375)+s},easeInOutBounce:function(t,s,r,a){var n=r-s,i;return t<a/2?(i=qt.easeInBounce(t*2,0,n,a),i*.5+s):(i=qt.easeOutBounce(t*2-a,0,n,a),i*.5+n*.5+s)}},ko=qt;function So(t){return t*Math.PI/180}function te(t,s){return t+Math.random()*(s-t)}function Io(t,s){return Math.floor(t+Math.random()*(s-t+1))}var Nt;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(Nt||(Nt={}));var Se;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Se||(Se={}));const Ro=1e3/60;class Eo{constructor(s,r,a,n){this.getOptions=r;const{colors:i,initialVelocityX:o,initialVelocityY:l}=this.getOptions();this.context=s,this.x=a,this.y=n,this.w=te(5,20),this.h=te(5,20),this.radius=te(5,10),this.vx=typeof o=="number"?te(-o,o):te(o.min,o.max),this.vy=typeof l=="number"?te(-l,0):te(l.min,l.max),this.shape=Io(0,2),this.angle=So(te(0,360)),this.angularSpin=te(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=te(0,1),this.rotationDirection=te(0,1)?Se.Positive:Se.Negative}update(s){const{gravity:r,wind:a,friction:n,opacity:i,drawShape:o}=this.getOptions(),l=s/Ro;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=r*l,this.vx+=a*l,this.vx*=n**l,this.vy*=n**l,this.rotateY>=1&&this.rotationDirection===Se.Positive?this.rotationDirection=Se.Negative:this.rotateY<=-1&&this.rotationDirection===Se.Negative&&(this.rotationDirection=Se.Positive);const d=.1*this.rotationDirection*l;if(this.rotateY+=d,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case Nt.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Nt.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Nt.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Ao{constructor(s,r){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=n=>{this.particles.splice(n,1)},this.getParticle=()=>{const n=te(this.x,this.w+this.x),i=te(this.y,this.h+this.y);return new Eo(this.context,this.getOptions,n,i)},this.animate=n=>{const{canvas:i,context:o,particlesGenerated:l,lastNumberOfPieces:d}=this,{run:h,recycle:u,numberOfPieces:x,debug:y,tweenFunction:g,tweenDuration:p}=this.getOptions();if(!h)return!1;const v=this.particles.length,f=u?v:l;if(f<x){d!==x&&(this.tweenProgress=0,this.tweenFrom=f,this.lastNumberOfPieces=x),this.tweenProgress=Math.min(p,Math.max(0,this.tweenProgress+n));const j=g(this.tweenProgress,this.tweenFrom,x,p),b=Math.round(j-f);for(let w=0;w<b;w++)this.particles.push(this.getParticle());this.particlesGenerated+=b}y&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${v}`,i.width-10,i.height-20));for(let j=this.particles.length-1;j>=0;j--){const b=this.particles[j];b.update(n),(b.y>i.height||b.y<-100||b.x>i.width+100||b.x<-100)&&(u&&f<=x?this.particles[j]=this.getParticle():this.removeParticleAt(j))}return v>0||f<x},this.canvas=s;const a=this.canvas.getContext("2d");if(!a)throw new Error("Could not get canvas context");this.context=a,this.getOptions=r}}const zs={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:ko.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class Lo{constructor(s,r){this.lastFrameTime=0,this.setOptionsWithDefaults=n=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...zs,...n},Object.assign(this,n.confettiSource)},this.update=(n=0)=>{const{options:{run:i,onConfettiComplete:o,frameRate:l},canvas:d,context:h}=this,u=Math.min(n-this.lastFrameTime,50);if(l&&u<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=n-(l?u%l:0),i&&(h.fillStyle="white",h.clearRect(0,0,d.width,d.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=s;const a=this.canvas.getContext("2d");if(!a)throw new Error("Could not get canvas context");this.context=a,this.generator=new Ao(this.canvas,()=>this.options),this.options=r,this.update()}get options(){return this._options}set options(s){var n,i;const r=(n=this._options)==null?void 0:n.run,a=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(s),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof s.recycle=="boolean"&&s.recycle&&a===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof s.run=="boolean"&&s.run&&r===!1&&this.update()}}const Do=Ke.createRef();class Vs extends Ke.Component{constructor(s){super(s),this.canvas=Ke.createRef(),this.canvas=s.canvasRef||Do}componentDidMount(){if(this.canvas.current){const s=ls(this.props)[0];this.confetti=new Lo(this.canvas.current,s)}}componentDidUpdate(){const s=ls(this.props)[0];this.confetti&&(this.confetti.options=s)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[s,r]=ls(this.props),a={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...r.style};return e.jsx("canvas",{width:s.width,height:s.height,ref:this.canvas,...r,style:a})}}Vs.defaultProps={...zs};Vs.displayName="ReactConfetti";function ls(t){const s={},r={},a={},n=[...Object.keys(zs),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const o in t){const l=t[o];n.includes(o)?s[o]=l:i.includes(o)?i[o]=l:a[o]=l}return[s,a,r]}const Oo=Ke.forwardRef((t,s)=>e.jsx(Vs,{canvasRef:s,...t}));function Mo(t){for(var s=[],r=1;r<arguments.length;r++)s[r-1]=arguments[r];t&&t.addEventListener&&t.addEventListener.apply(t,s)}function Fo(t){for(var s=[],r=1;r<arguments.length;r++)s[r-1]=arguments[r];t&&t.removeEventListener&&t.removeEventListener.apply(t,s)}var cs=typeof window<"u",To=function(t){c.useEffect(t,[])},Uo=function(t){var s=c.useRef(t);s.current=t,To(function(){return function(){return s.current()}})},Bo=function(t){var s=c.useRef(0),r=c.useState(t),a=r[0],n=r[1],i=c.useCallback(function(o){cancelAnimationFrame(s.current),s.current=requestAnimationFrame(function(){n(o)})},[]);return Uo(function(){cancelAnimationFrame(s.current)}),[a,i]},Wo=function(t){var s={},r=s.initialWidth,a=r===void 0?1/0:r,n=s.initialHeight,i=n===void 0?1/0:n,o=s.onChange,l=Bo({width:cs?window.innerWidth:a,height:cs?window.innerHeight:i}),d=l[0],h=l[1];return c.useEffect(function(){if(cs){var u=function(){var x=window.innerWidth,y=window.innerHeight;h({width:x,height:y}),o&&o(x,y)};return Mo(window,"resize",u),function(){Fo(window,"resize",u)}}},[]),d};const $o=({name:t,passId:s,onClose:r,onCardClick:a,isNew:n,passType:i="holiday",expiryDate:o})=>{const{theme:l}=Te(),[d,h]=c.useState(new Date),{width:u,height:x}=Wo(),[y,g]=c.useState(n);c.useEffect(()=>{const f=setInterval(()=>h(new Date),1e3);return()=>clearInterval(f)},[]),c.useEffect(()=>{if(n){const f=setTimeout(()=>g(!1),8e3);return()=>clearTimeout(f)}},[n]);const p=new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase(),v=()=>{if(typeof window>"u")return["#FFD166","#FF8C69","#FFFFFF"];const f=getComputedStyle(document.documentElement),j=f.getPropertyValue("--color-brand-yellow").trim()||"#FFD166",b=f.getPropertyValue("--color-brand-red").trim()||"#FF8C69";return[j,b,"#FFFFFF"]};return e.jsxs("div",{className:"modal-backdrop flex items-center justify-center z-50 p-4",onClick:r,children:[y&&u>0&&x>0&&e.jsx(Oo,{width:u,height:x,recycle:!1,numberOfPieces:400,colors:v()}),e.jsxs("div",{className:`relative text-brand-white w-full max-w-sm aspect-[9/16] rounded-3xl shadow-2xl overflow-hidden p-8 sm:p-10 flex flex-col justify-between border-4 border-brand-yellow drop-shadow-2xl ${n&&a?"cursor-pointer hover:scale-105 transition-transform duration-300":""}`,style:{background:"linear-gradient(135deg, var(--color-brand-dark-blue) 0%, #004A7A 50%, var(--color-brand-dark-blue) 100%)"},onClick:f=>{f.stopPropagation(),n&&a&&a()},children:[e.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{backgroundImage:`url('data:image/svg+xml;utf8,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" seed="1"/></filter><rect width="100" height="100" filter="url(%23noise)" opacity="1"/></svg>')`}}),i==="annual"&&e.jsx("div",{className:"absolute top-0 right-0 bg-brand-red text-white text-xs font-bold py-1 px-4 rounded-bl-lg z-20 shadow-lg",children:"VIP"}),e.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-brand-white/70 hover:text-brand-white transition-colors z-20 focus:outline-none focus:ring-2 focus:ring-[var(--color-action-primary)] rounded-md p-1",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("header",{className:"text-center relative z-10 mb-6",children:[e.jsx("h2",{className:"text-xs md:text-sm font-semibold text-brand-yellow uppercase tracking-widest mb-4",children:"Your Exclusive Pass"}),e.jsx("div",{className:"mx-auto mb-6 w-20 h-20 flex-shrink-0 rounded-2xl p-2","aria-label":"Port Alfred Holiday Pass Logo Icon",children:e.jsx("img",{src:l==="dark"?"/Images/logo-ocean.svg":"/Images/logo-sand.svg",alt:"Port Alfred Holiday Pass Logo",className:"w-full h-full object-contain"})}),e.jsx("h1",{className:"font-display text-brand-white text-xl sm:text-2xl mb-1",children:"Port Alfred"}),e.jsx("h2",{className:"font-display font-extrabold text-2xl sm:text-3xl tracking-tight text-brand-yellow",children:"HOLIDAY PASS"})]}),e.jsxs("main",{className:"text-center my-auto relative z-10 space-y-3",children:[e.jsx("p",{className:"text-brand-red text-xs sm:text-sm font-semibold tracking-widest uppercase",children:"Pass Holder"}),e.jsx("p",{className:"font-display text-3xl sm:text-4xl font-bold break-words text-brand-yellow drop-shadow-md",children:t})]}),e.jsxs("footer",{className:"text-center relative z-10 space-y-4 pt-4",children:[e.jsx("div",{className:"border-t-2 border-dashed border-brand-yellow/40"}),e.jsxs("div",{className:"space-y-3 text-center text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-brand-red text-xs font-semibold tracking-wider uppercase",children:"Pass ID"}),e.jsx("p",{className:"font-mono text-xs text-brand-white/80 mt-0.5",children:s})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-brand-red text-xs font-semibold tracking-wider uppercase",children:"Valid Until"}),e.jsx("p",{className:"font-mono text-xs text-brand-white/80 mt-0.5",children:p})]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2","aria-live":"off",title:"Live verification indicator",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-brand-red animate-live-pulse","aria-hidden":"true"}),e.jsx("p",{className:"font-mono text-4xl sm:text-5xl font-bold tracking-wider text-brand-yellow",children:d.toLocaleTimeString("en-GB")}),e.jsx("svg",{className:"w-3 h-3 text-brand-yellow",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})]}),e.jsx("p",{className:"text-center text-xs text-brand-white/50 mt-2",children:"Scan at any partner venue"})]}),e.jsx("div",{className:"flex justify-center pt-3",children:e.jsxs("div",{className:"flex items-center gap-1.5 bg-brand-white/10 backdrop-blur-sm px-2.5 py-1.5 rounded-md border border-brand-yellow/30",children:[e.jsx("svg",{className:"w-3 h-3 text-brand-yellow",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-brand-yellow text-xs font-semibold uppercase tracking-wider",children:"Verified"})]})})]})]})]})},Ho=async(t,s,r)=>{try{const n=(await Va(bt,t,s)).user;return await Qt(fe(Q,"users",n.uid),{uid:n.uid,email:t,displayName:r||"",createdAt:new Date().toISOString()}),{success:!0,user:n}}catch(a){return{success:!1,error:a.message}}},zo=async(t,s)=>{try{return{success:!0,user:(await qa(bt,t,s)).user}}catch(r){return{success:!1,error:r.message}}},Vo=async()=>{try{const s=(await Qa(bt,Co)).user,r=fe(Q,"users",s.uid),n=!(await Es(r)).exists();return n?await Qt(r,{uid:s.uid,email:s.email,displayName:s.displayName,photoURL:s.photoURL,createdAt:new Date().toISOString()}):await Qt(r,{photoURL:s.photoURL,displayName:s.displayName},{merge:!0}),{success:!0,user:s,isNewUser:n}}catch(t){return t.code==="auth/popup-closed-by-user"?{success:!1,error:"Sign-in was cancelled. Please try again.",isNewUser:!1}:{success:!1,error:t.message,isNewUser:!1}}},ga=async()=>{try{return await za(bt),{success:!0}}catch(t){return{success:!1,error:t.message}}},qo=t=>Ha(bt,t),Qo=async t=>{try{const s=bt.currentUser;return s?(await Ya(s,{displayName:t}),await As(fe(Q,"users",s.uid),{displayName:t,profileCompletedAt:new Date().toISOString()}),{success:!0}):{success:!1,error:"No user logged in"}}catch(s){return{success:!1,error:s.message}}},qs=({onClose:t})=>e.jsx("div",{className:"fixed inset-0 bg-bg-primary/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:t,children:e.jsxs("div",{className:"bg-bg-card rounded-2xl shadow-2xl p-6 sm:p-8 max-w-2xl w-full relative border border-border-subtle my-8",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-text-secondary hover:text-text-primary transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-display font-black text-accent-primary mb-4",children:"Privacy Policy"}),e.jsxs("p",{className:"text-text-secondary text-sm",children:["Last updated: ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"space-y-6 text-text-primary overflow-y-auto max-h-[60vh]",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"1. Introduction"}),e.jsx("p",{children:'Port Alfred Holiday Pass ("we", "us", "our") operates the Holiday Pass application. This Privacy Policy explains our practices regarding the collection, use, and protection of your personal information.'})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"2. Information We Collect"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-semibold",children:"We collect information you provide directly:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Name and email address (during account creation)"}),e.jsx("li",{children:"Password (securely stored)"}),e.jsx("li",{children:"Payment information (processed through Yoco)"}),e.jsx("li",{children:"Pass details and redemption information"})]}),e.jsx("p",{className:"font-semibold mt-4",children:"Automatically collected information:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Device information (IP address, browser type, OS)"}),e.jsx("li",{children:"Usage data (pages visited, interactions with the app)"}),e.jsx("li",{children:"Firebase authentication logs"})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"3. How We Use Your Information"}),e.jsx("p",{className:"mb-3",children:"We use your information to:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Create and manage your account"}),e.jsx("li",{children:"Process purchases and payments"}),e.jsx("li",{children:"Track and manage pass redemptions"}),e.jsx("li",{children:"Communicate updates and support"}),e.jsx("li",{children:"Improve our service and user experience"}),e.jsx("li",{children:"Comply with legal obligations"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"4. Data Protection"}),e.jsx("p",{children:"Your personal information is stored securely using Firebase and Firestore. We use industry-standard encryption and security measures to protect your data from unauthorized access, alteration, and disclosure. Payment information is processed securely through Yoco and is not stored on our servers."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"5. Data Sharing"}),e.jsx("p",{children:"We do not sell or rent your personal information to third parties. We may share information with:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 mt-2",children:[e.jsx("li",{children:"Service providers (Firebase, Yoco) who assist in operations"}),e.jsx("li",{children:"Legal authorities if required by law"}),e.jsx("li",{children:"Business partners for redemption purposes"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"6. POPIA Compliance (South African Users)"}),e.jsx("p",{children:"If you are a South African resident, your data is protected under the Protection of Personal Information Act (POPIA). We collect and process your personal information with your explicit consent. You have the right to:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 mt-2",children:[e.jsx("li",{children:"Access your personal information"}),e.jsx("li",{children:"Request correction of inaccurate data"}),e.jsx("li",{children:"Request deletion of your data (subject to legal requirements)"}),e.jsx("li",{children:"Withdraw your consent at any time"}),e.jsx("li",{children:"Lodge a complaint with the Information Regulator"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"7. Cookies and Tracking"}),e.jsx("p",{children:"We use cookies and similar technologies to enhance your experience, remember preferences, and analyze usage. You can control cookie settings through your browser."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"8. Your Rights"}),e.jsx("p",{children:"You have the right to access, update, or delete your personal information at any time by contacting us. We will respond to requests within 30 days."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"9. Data Breach Notification (POPIA Section 22)"}),e.jsx("p",{children:"If we discover a data security breach that compromises your personal information, we will:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 mt-2",children:[e.jsx("li",{children:"Notify the Information Regulator within 30 days of discovery"}),e.jsx("li",{children:"Notify you by email at your registered address within 30 days"}),e.jsx("li",{children:"Provide details of the breach and steps we've taken to remedy it"}),e.jsx("li",{children:"Advise you of preventive measures you can take (e.g., changing your password)"})]}),e.jsx("p",{className:"mt-3 text-sm text-text-secondary",children:"See our Breach Response Plan (available on request) for detailed procedures."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"10. Changes to This Policy"}),e.jsx("p",{children:"We may update this Privacy Policy periodically. We will notify you of significant changes by email or through a prominent notice on our website."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"11. Contact Us"}),e.jsxs("p",{children:["For privacy concerns or requests, contact us at: ",e.jsx("br",{}),e.jsx("strong",{children:"Email:"})," portalfredholidaypass@gmail.com ",e.jsx("br",{}),e.jsx("strong",{children:"WhatsApp:"})," 065 806 2198"]})]})]}),e.jsx("div",{className:"mt-6 border-t border-border-subtle pt-6",children:e.jsx(M,{type:"button",variant:"primary",className:"w-full",onClick:t,children:"I Understand"})})]})}),Qs=({onClose:t})=>e.jsx("div",{className:"fixed inset-0 bg-bg-primary/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:t,children:e.jsxs("div",{className:"bg-bg-card rounded-2xl shadow-2xl p-6 sm:p-8 max-w-2xl w-full relative border border-border-subtle my-8",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-text-secondary hover:text-text-primary transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-display font-black text-accent-primary mb-4",children:"Terms of Service"}),e.jsxs("p",{className:"text-text-secondary text-sm",children:["Last updated: ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"space-y-6 text-text-primary overflow-y-auto max-h-[60vh]",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"1. Acceptance of Terms"}),e.jsx("p",{children:"By accessing and using the Port Alfred Holiday Pass application, you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"2. License"}),e.jsx("p",{children:"We grant you a limited, non-exclusive, non-transferable license to use the application for your personal, non-commercial use only. You may not modify, copy, distribute, or use the application for any other purpose."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"3. User Responsibilities"}),e.jsx("p",{className:"mb-3",children:"You agree to:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Provide accurate and complete information when creating an account"}),e.jsx("li",{children:"Maintain confidentiality of your password"}),e.jsx("li",{children:"Use the app only for legitimate purposes"}),e.jsx("li",{children:"Not engage in fraudulent or illegal activities"}),e.jsx("li",{children:"Not attempt to reverse-engineer or hack the application"}),e.jsx("li",{children:"Comply with all applicable laws and regulations"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"4. Pass Terms"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Validity and Expiration"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Holiday passes are valid from December 1st through January 31st"}),e.jsx("li",{children:"Passes cannot be used after January 31st"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Redemption"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Each deal can be redeemed once per visit"}),e.jsx("li",{children:"Businesses reserve the right to verify pass validity before redemption"}),e.jsx("li",{children:"Redemptions are final and non-transferable"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Transferability"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Plus One passes may be transferred to one additional person"}),e.jsx("li",{children:"Transfers must be done before redemption"}),e.jsx("li",{children:"Only the registered owner or transferred recipient may use the pass"})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"5. Payment and Refunds"}),e.jsx("p",{className:"mb-3",children:"Payments are processed securely through Yoco. All prices are in the currency specified at checkout."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Cooling-Off Period (ECTA Section 25)"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"You have 7 calendar days from purchase to cancel your pass"}),e.jsx("li",{children:"To cancel, email: portalfredholidaypass@gmail.com with your order reference"}),e.jsx("li",{children:"If you have redeemed any deals, cooling-off rights are forfeited"}),e.jsx("li",{children:"This is your statutory right under South African law (ECTA)"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Refund Policy"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Refunds are available within 14 days of purchase if no redemptions have been made"}),e.jsx("li",{children:"Once a pass has been redeemed, it is non-refundable"}),e.jsx("li",{children:"Refunds will be processed to the original payment method"}),e.jsx("li",{children:"Processing time: 5-10 business days"})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"6. Limitation of Liability"}),e.jsx("p",{children:'Port Alfred Holiday Pass is provided "as is" without warranties. We are not liable for direct, indirect, incidental, special, or consequential damages arising from your use of the application, including but not limited to loss of data, business interruption, or personal injury.'})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"7. Business Partner Terms"}),e.jsx("p",{children:"We do not control or endorse the quality of products/services offered by partner businesses. They operate independently and are responsible for their own operations, customer service, and dispute resolution. Claims should be directed to the respective business, not to us."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"8. Suspension and Termination"}),e.jsx("p",{children:"We reserve the right to suspend or terminate your account if you violate these terms, engage in fraudulent activity, or attempt to misuse the service. Violations may result in permanent bans."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"9. Intellectual Property"}),e.jsx("p",{children:"All content, logos, designs, and intellectual property in the application are owned by Port Alfred Holiday Pass or our partners. You may not reproduce, distribute, or use them without explicit permission."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"10. Governing Law"}),e.jsx("p",{children:"These terms are governed by the laws of South Africa. Any disputes will be resolved in the courts of South Africa."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"11. Changes to Terms"}),e.jsx("p",{children:"We may update these terms periodically. Continued use of the application constitutes acceptance of updated terms."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"12. Contact"}),e.jsxs("p",{children:["For questions about these terms, contact us at: ",e.jsx("br",{}),e.jsx("strong",{children:"Email:"})," portalfredholidaypass@gmail.com ",e.jsx("br",{}),e.jsx("strong",{children:"WhatsApp:"})," 065 806 2198"]})]})]}),e.jsx("div",{className:"mt-6 border-t border-border-subtle pt-6",children:e.jsx(M,{type:"button",variant:"primary",className:"w-full",onClick:t,children:"I Accept"})})]})}),Yo=({userEmail:t,onAccept:s,onDecline:r,isOpen:a})=>{const[n,i]=c.useState(!1),[o,l]=c.useState(!1),[d,h]=c.useState(!1),[u,x]=c.useState(!1),[y,g]=c.useState(!1),p=n&&o&&d;return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{isOpen:a,onClose:r,title:"Welcome!",maxWidth:"md",showCloseButton:!1,children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("p",{className:"text-text-secondary text-sm",children:t}),e.jsx("p",{className:"text-text-secondary text-sm mt-3",children:"Please agree to continue"})]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("p",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wide mb-3",children:"Legal Requirements"}),e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border-2 border-accent-primary/20 hover:border-accent-primary/50 hover:bg-accent-primary/5 transition cursor-pointer group",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center h-5 pt-1",children:e.jsx("input",{type:"checkbox",checked:n,onChange:v=>i(v.target.checked),className:"w-5 h-5 rounded accent-accent-primary cursor-pointer"})}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("button",{type:"button",onClick:v=>{v.preventDefault(),x(!0)},className:"text-sm font-semibold text-accent-primary hover:text-action-primary underline transition text-left",children:"Terms of Service"}),e.jsx("span",{className:"text-xs text-text-secondary",children:"I agree to the usage terms and conditions"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border-2 border-accent-primary/20 hover:border-accent-primary/50 hover:bg-accent-primary/5 transition cursor-pointer group",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center h-5 pt-1",children:e.jsx("input",{type:"checkbox",checked:o,onChange:v=>l(v.target.checked),className:"w-5 h-5 rounded accent-accent-primary cursor-pointer"})}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("button",{type:"button",onClick:v=>{v.preventDefault(),g(!0)},className:"text-sm font-semibold text-accent-primary hover:text-action-primary underline transition text-left",children:"Privacy Policy"}),e.jsx("span",{className:"text-xs text-text-secondary",children:"I agree to how my data is collected and used"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border-2 border-accent-primary/20 hover:border-accent-primary/50 hover:bg-accent-primary/5 transition cursor-pointer group",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center h-5 pt-1",children:e.jsx("input",{type:"checkbox",checked:d,onChange:v=>h(v.target.checked),className:"w-5 h-5 rounded accent-accent-primary cursor-pointer"})}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("button",{type:"button",onClick:v=>{v.preventDefault(),g(!0)},className:"text-sm font-semibold text-accent-primary hover:text-action-primary underline transition text-left",children:"POPIA Compliance"}),e.jsx("span",{className:"text-xs text-text-secondary",children:"I consent to data processing (South African privacy law)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[!p&&e.jsx("p",{className:"text-xs text-action-primary bg-action-primary/10 border border-action-primary/30 p-3 rounded-lg text-center",children:"You must agree to all terms to continue"}),e.jsx(M,{variant:"primary",className:`w-full transition-opacity ${p?"":"opacity-50 cursor-not-allowed"}`,disabled:!p,onClick:s,children:"Continue"}),e.jsx(M,{variant:"secondary",className:"w-full",onClick:r,children:"Decline & Sign Out"})]})]}),u&&e.jsx(Qs,{onClose:()=>x(!1)}),y&&e.jsx(qs,{onClose:()=>g(!1)})]})},_o=({isOpen:t,onClose:s,onAuthSuccess:r})=>{const[a,n]=c.useState(!1),[i,o]=c.useState(""),[l,d]=c.useState(""),[h,u]=c.useState(""),[x,y]=c.useState(null),[g,p]=c.useState(!1),[v,f]=c.useState(!1),[j,b]=c.useState(null),w=async I=>{I.preventDefault(),y(null);const D=xa(i);if(D){y(D.message);return}const R=yo(l,6);if(R){y(R.message);return}if(a){const k=bo(l,h);if(k){y(k.message);return}p(!0);const B=await Ho(i,l);p(!1),B.success?r():y(B.error)}else{p(!0);const k=await zo(i,l);p(!1),k.success?r():y(k.error)}},C=async()=>{var D;y(null),p(!0);const I=await Vo();p(!1),I.success?I.isNewUser?(b(((D=I.user)==null?void 0:D.email)||null),f(!0)):r():y(I.error||"An error occurred during sign-in. Please try again.")},S=()=>{f(!1),b(null),r()},A=async()=>{await ga(),f(!1),b(null),y("You must agree to our terms to continue")};return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{isOpen:t,onClose:s,title:a?"Create Account":"Sign In",maxWidth:"md",children:[e.jsx("p",{className:"text-text-secondary text-sm mb-6",children:a?"Join us to manage your passes":"Sign in to your account"}),e.jsxs("form",{onSubmit:w,className:"space-y-4 mb-6",children:[e.jsx(Ne,{type:"email",value:i,onChange:I=>o(I.target.value),placeholder:"Email Address",ariaLabel:"Email Address"}),e.jsx(Ne,{type:"password",value:l,onChange:I=>d(I.target.value),placeholder:"Password",ariaLabel:"Password"}),a&&e.jsx(Ne,{type:"password",value:h,onChange:I=>u(I.target.value),placeholder:"Confirm Password",ariaLabel:"Confirm Password"}),x&&e.jsx("p",{className:"text-action-primary text-sm bg-action-primary/20 border border-action-primary/50 p-3 rounded-lg",children:x}),e.jsx(M,{type:"submit",variant:"primary",className:"w-full text-lg",disabled:g,children:g?"Processing...":a?"Create Account":"Sign In"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border-subtle"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-bg-card text-text-secondary",children:"Or"})})]}),e.jsxs("button",{onClick:C,disabled:g,className:"w-full px-4 py-3 bg-white dark:bg-slate-100 border border-gray-300 dark:border-gray-400 rounded-lg hover:shadow-md hover:border-gray-400 dark:hover:border-gray-500 transition flex items-center justify-center gap-3 text-gray-700 dark:text-gray-800 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),e.jsx("span",{children:a?"Sign up with Google":"Sign in with Google"})]}),e.jsxs("p",{className:"text-center text-text-secondary text-sm mt-6",children:[a?"Already have an account?":"Don't have an account?"," ",e.jsx("button",{onClick:()=>{n(!a),y(null)},className:"text-accent-primary hover:text-action-primary transition font-semibold",children:a?"Sign In":"Create Account"})]})]}),j&&e.jsx(Yo,{isOpen:v,userEmail:j,onAccept:S,onDecline:A})]})},ya=()=>e.jsx("section",{id:"charity",className:"py-20 md:py-32 bg-bg-card",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center scroll-reveal",children:[e.jsx("h3",{className:"text-sm md:text-base font-semibold text-action-primary uppercase tracking-widest mb-4 md:mb-5",children:"Your Impact"}),e.jsx("h2",{className:"text-4xl md:text-5xl font-display font-black text-accent-primary mb-4 md:mb-6",children:"Holidaying with Heart"}),e.jsx("div",{className:"mb-6",children:e.jsx("svg",{className:"w-16 h-16 text-urgency-high mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})}),e.jsxs("p",{className:"text-lg text-text-secondary leading-relaxed",children:["Your holiday makes a real difference. For every Port Alfred Holiday Pass purchased, we proudly ",e.jsx("span",{className:"font-black text-urgency-high",children:"DONATE 25%"})," to a local charity."]}),e.jsxs("p",{className:"text-lg text-text-secondary leading-relaxed mt-4",children:["We're still in the process of choosing a ",e.jsx("span",{className:"font-black text-urgency-high",children:"WORTHY CAUSE"}),". By exploring the best of our town, you're also helping build a brighter future for our community."]}),e.jsxs("p",{className:"text-sm text-text-secondary mt-6",children:["Donations ",e.jsx("span",{className:"font-semibold text-action-primary",children:"verified quarterly"})," with partner charity reports"]})]})})}),Go=[{question:"How does the pass work?",answer:"It's simple! After purchasing, you'll receive a digital pass on your phone. Browse deals, click 'Redeem' on any deal you like, and confirm your redemption. The venue staff will enter a 4-digit PIN to verify, and a green success screen will appear. Show this to the staff member to complete your savings!"},{question:"How much does the pass cost?",answer:"The Holiday Pass is R199 and gives you access to exclusive deals from December 1st to January 31st. It's the perfect companion for your summer holiday or festive season getaway!"},{question:"When can I use my pass?",answer:"Your Holiday Pass is valid from December 1st through January 31st, covering the entire festive season and summer holiday period. Make the most of your Port Alfred visit!"},{question:"How many times can I use a deal?",answer:"You can use each deal once per venue. With dozens of partners, there are plenty of savings to go around during the holiday season!"},{question:"Is there a physical card?",answer:"No, the Port Alfred Holiday Pass is fully digital and lives on your phone. This makes it easy to access and environmentally friendly."}],Ko=t=>({__html:t.replace(/R199/g,'<span class="font-bold text-urgency-high">R199</span>')}),ba=()=>{const[t,s]=c.useState(0),r=c.useRef({}),a=c.useRef(0);c.useEffect(()=>{t!==null&&t!==a.current&&setTimeout(()=>{const o=r.current[t];o&&o.scrollIntoView({behavior:"smooth",block:"nearest"})},600),a.current=t},[t]);const n=o=>{s(t===o?null:o)},i=o=>Ko(o);return e.jsx("section",{id:"faq",className:"py-20 md:py-32 bg-bg-primary",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-16 scroll-reveal",children:[e.jsx("h3",{className:"text-sm md:text-base font-semibold text-action-primary uppercase tracking-widest mb-4 md:mb-5",children:"Got Questions?"}),e.jsx("p",{className:"text-4xl md:text-5xl font-display font-black text-accent-primary mb-4 md:mb-6",children:"We've Got Answers"}),e.jsx("p",{className:"text-lg md:text-xl text-text-secondary leading-relaxed max-w-2xl mx-auto mb-8 md:mb-10",children:"Find answers to everything you need to know about the Holiday Pass"})]}),e.jsx("div",{className:"max-w-3xl mx-auto space-y-4",children:Go.map((o,l)=>e.jsxs("div",{className:"bg-bg-card rounded-lg shadow-md border-4 border-action-primary overflow-hidden scroll-reveal transition-all duration-300 hover:shadow-lg hover:brightness-105",style:{transitionDelay:`${l*100}ms`},children:[e.jsxs("button",{ref:d=>{d&&(r.current[l]=d)},onClick:()=>n(l),className:"w-full flex justify-between items-center text-left p-5 sm:p-6 focus:outline-none","aria-expanded":t===l,children:[e.jsx("h3",{className:`text-lg sm:text-xl font-display font-bold transition-colors duration-300 ${t===l?"text-accent-primary":"text-text-primary"}`,children:o.question}),e.jsx("span",{className:`transform transition-transform duration-300 ${t===l?"rotate-45":"rotate-0"}`,children:e.jsx("svg",{className:"w-6 h-6 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-6-6h12"})})})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${t===l?"max-h-96":"max-h-0"}`,children:e.jsx("div",{className:"p-5 sm:p-6 border-t border-border-subtle",children:e.jsx("p",{className:"text-text-secondary leading-relaxed",dangerouslySetInnerHTML:i(o.answer)})})})]},l))})]})})},Jo=({onClose:t})=>(c.useEffect(()=>{const s=setTimeout(()=>{t()},5e3);return()=>clearTimeout(s)},[t]),e.jsx("div",{className:"fixed inset-0 bg-bg-primary flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-bg-card rounded-2xl shadow-2xl p-8 sm:p-12 max-w-md w-full text-center border border-border-subtle my-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("svg",{className:"w-16 h-16 mx-auto text-accent-primary animate-pulse",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h1",{className:"text-4xl font-display font-black text-accent-primary mb-3",children:"Payment Successful!"}),e.jsx("p",{className:"text-text-secondary mb-6",children:"Your pass has been activated and is now available in your account."}),e.jsx("p",{className:"text-sm text-text-secondary/70 mb-8",children:"Redirecting you home in 5 seconds..."}),e.jsx("button",{onClick:t,className:"w-full px-6 py-3 bg-accent-primary text-white font-bold rounded-lg hover:bg-accent-primary/90 transition-colors",children:"Back to Home"})]})})),Xo=({onClose:t,onRetry:s})=>e.jsx("div",{className:"fixed inset-0 bg-bg-primary flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-bg-card rounded-2xl shadow-2xl p-8 sm:p-12 max-w-md w-full text-center border border-border-subtle my-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("svg",{className:"w-16 h-16 mx-auto text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l-2-2m0 0l-2-2m2 2l2-2m-2 2l-2 2m2-2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h1",{className:"text-4xl font-display font-black text-red-500 mb-3",children:"Payment Failed"}),e.jsx("p",{className:"text-text-secondary mb-6",children:"Unfortunately, your payment could not be processed. Please check your card details and try again."}),e.jsx("p",{className:"text-sm text-text-secondary/70 mb-8",children:"If the problem persists, please contact support or try a different payment method."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 bg-bg-primary border-2 border-border-subtle text-text-primary font-bold rounded-lg hover:bg-bg-card transition-colors",children:"Back to Home"}),e.jsx("button",{onClick:s,className:"flex-1 px-6 py-3 bg-accent-primary text-white font-bold rounded-lg hover:bg-accent-primary/90 transition-colors",children:"Try Again"})]})]})}),Zo=({onClose:t})=>e.jsx("div",{className:"fixed inset-0 bg-bg-primary flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-bg-card rounded-2xl shadow-2xl p-8 sm:p-12 max-w-md w-full text-center border border-border-subtle my-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("svg",{className:"w-16 h-16 mx-auto text-text-secondary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h1",{className:"text-4xl font-display font-black text-text-primary mb-3",children:"Payment Cancelled"}),e.jsx("p",{className:"text-text-secondary mb-6",children:"Your payment has been cancelled. No charges have been made to your account."}),e.jsx("p",{className:"text-sm text-text-secondary/70 mb-8",children:"Feel free to try again whenever you're ready."}),e.jsx("button",{onClick:t,className:"w-full px-6 py-3 bg-accent-primary text-white font-bold rounded-lg hover:bg-accent-primary/90 transition-colors",children:"Back to Home"})]})}),el=({isOpen:t,dealName:s,vendorId:r,onConfirm:a,onCancel:n})=>{const[i,o]=c.useState(!1),l=async()=>{o(!0);try{await a()}catch{}finally{o(!1)}};return e.jsx(pe,{isOpen:t,onClose:n,title:"Redeem Deal?",showCloseButton:!0,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4 inline-flex items-center justify-center w-12 h-12 bg-action-primary/20 rounded-full",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-action-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-text-secondary mb-6",children:"Are you sure you want to redeem:"}),e.jsx("div",{className:"bg-bg-primary border border-accent-primary/30 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"font-display font-bold text-lg text-accent-primary",children:s})}),e.jsx("p",{className:"text-sm text-text-secondary mb-6",children:"Once redeemed, you won't be able to redeem this deal again. Make sure you're ready to use it."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(M,{variant:"secondary",onClick:n,disabled:i,className:"flex-1",children:"Cancel"}),e.jsx(M,{variant:"redeem",onClick:l,disabled:i,className:"flex-1",children:i?"Redeeming...":"Confirm"})]})]})})},tl=async t=>{try{const s=Lr(pt(Q,"passes"),Dr("userId","==",t));return(await Gt(s)).docs.map(a=>a.data())}catch(s){return console.error("Error getting passes:",s),[]}},sl=async(t,s,r,a)=>{try{return await Or(pt(Q,"redemptions"),{passId:t,dealName:s,vendorId:r,redeemedAt:new Date().toISOString(),userId:a}),{success:!0}}catch(n){return console.error("Error recording redemption:",n),{success:!1,error:n.message}}},rl=async t=>{try{const s=Lr(pt(Q,"redemptions"),Dr("passId","==",t));return(await Gt(s)).docs.map(a=>a.data())}catch(s){return console.error("Error getting redemptions:",s),[]}},al=async t=>{try{const s={...t,createdAt:new Date().toISOString()};return Object.keys(s).forEach(r=>{s[r]===void 0&&delete s[r]}),await Qt(fe(Q,"vendors",t.vendorId),s),{success:!0}}catch(s){return console.error("Error creating vendor:",s),{success:!1,error:s.message}}},Ft=async t=>{try{const s=await Es(fe(Q,"vendors",t));return s.exists()?s.data():null}catch(s){return console.error("Error getting vendor:",s),null}},nl=async()=>{try{return(await Gt(pt(Q,"vendors"))).docs.map(s=>s.data())}catch(t){return console.error("Error getting vendors:",t),[]}},il=async(t,s)=>{try{const r=await Ft(t);return r!==null&&r.pin===s}catch(r){return console.error("Error verifying PIN:",r),!1}},ol=async(t,s)=>{try{const r=Object.fromEntries(Object.entries(s).filter(([,a])=>a!==void 0));return await As(fe(Q,"vendors",t),r),{success:!0}}catch(r){return console.error("Error updating vendor:",r),{success:!1,error:r.message}}},ll=async t=>{try{return await Mr(fe(Q,"vendors",t)),{success:!0}}catch(s){return console.error("Error deleting vendor:",s),{success:!1,error:s.message}}},cl=async t=>{try{const s={...t,createdAt:new Date().toISOString()};return Object.keys(s).forEach(a=>{s[a]===void 0&&delete s[a]}),{success:!0,dealId:(await Or(pt(Q,"deals"),s)).id}}catch(s){return console.error("Error creating deal:",s),{success:!1,error:s.message}}},Tt=async()=>{try{const t=await Gt(pt(Q,"deals"));return await Promise.all(t.docs.map(async r=>{const a=r.data();if(!a.category&&a.vendorId){const n=await Ft(a.vendorId);n&&(a.category=n.category)}return{...a,id:r.id}}))}catch(t){return console.error("Error getting deals:",t),[]}},dl=async(t,s)=>{try{const r=Object.fromEntries(Object.entries(s).filter(([,a])=>a!==void 0));return await As(fe(Q,"deals",t),r),{success:!0}}catch(r){return console.error("Error updating deal:",r),{success:!1,error:r.message}}},ul=async t=>{try{return await Mr(fe(Q,"deals",t)),{success:!0}}catch(s){return console.error("Error deleting deal:",s),{success:!1,error:s.message}}},hl=({isOpen:t,vendorId:s,dealName:r,onSuccess:a,onCancel:n})=>{const[i,o]=c.useState(""),[l,d]=c.useState(""),[h,u]=c.useState(!1),[x,y]=c.useState(null),[g,p]=c.useState(!0);Ke.useEffect(()=>{(async()=>{const b=await Ft(s);y(b),p(!1)})()},[s]);const v=async()=>{d("");const j=vo(i);if(j){d(j.message);return}u(!0);try{await il(s,i)?(o(""),await a()):(d("Incorrect PIN. Please try again."),o(""))}catch{d("An error occurred. Please try again.")}finally{u(!1)}},f=j=>{const b=j.target.value.replace(/\D/g,"").slice(0,4);o(b),d("")};return g&&t?e.jsx(pe,{isOpen:t,onClose:n,children:e.jsx("p",{className:"text-text-secondary text-center",children:"Loading vendor information..."})}):e.jsx(pe,{isOpen:t,onClose:n,title:"Vendor Verification",showCloseButton:!0,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4 inline-flex items-center justify-center w-12 h-12 bg-action-primary/20 rounded-full",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-action-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h2",{className:"text-2xl font-display font-black text-accent-primary mb-2",children:"Vendor Verification"}),e.jsx("p",{className:"text-text-secondary mb-4",children:"Please ask the staff to enter their 4-digit PIN to verify this redemption."}),x&&e.jsxs("div",{className:"bg-bg-primary border border-accent-primary/30 rounded-lg p-3 mb-6",children:[e.jsx("p",{className:"text-sm text-text-secondary mb-1",children:"Venue:"}),e.jsx("p",{className:"font-display font-bold text-accent-primary",children:x.name})]}),e.jsxs("div",{className:"bg-bg-primary border border-accent-primary/30 rounded-lg p-3 mb-6",children:[e.jsx("p",{className:"text-sm text-text-secondary mb-1",children:"Deal:"}),e.jsx("p",{className:"font-display font-bold text-accent-primary",children:r})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"4-Digit PIN"}),e.jsx("input",{type:"password",inputMode:"numeric",value:i,onChange:f,placeholder:"â€¢â€¢â€¢â€¢",maxLength:4,className:"w-full px-4 py-3 text-center text-2xl font-mono bg-bg-primary border border-border-default rounded-lg focus:outline-none focus:ring-2 focus:ring-action-primary focus:border-transparent",disabled:h})]}),l&&e.jsx("div",{className:"bg-urgency-high/10 border border-urgency-high rounded-lg p-3 mb-6",children:e.jsx("p",{className:"text-sm font-medium text-urgency-high",children:l})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(M,{variant:"secondary",onClick:n,disabled:h,className:"flex-1",children:"Cancel"}),e.jsx(M,{variant:"redeem",onClick:v,disabled:h||i.length!==4,className:"flex-1",children:h?"Verifying...":"Verify PIN"})]})]})})},ml=({isOpen:t,dealName:s,venueName:r,onClose:a})=>{c.useEffect(()=>{if(t){const o=setTimeout(a,1e4);return()=>clearTimeout(o)}},[t,a]);const n=new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),i=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});return e.jsx(pe,{isOpen:t,onClose:a,maxWidth:"md",showCloseButton:!0,children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-success/20 rounded-full border-4 border-success",children:e.jsx("svg",{className:"w-16 h-16 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),e.jsxs("h1",{className:"text-4xl font-display font-black text-success",children:["DEAL",e.jsx("br",{}),"REDEEMED"]}),e.jsxs("div",{className:"bg-success/10 rounded-xl p-6 border-2 border-success/30 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold uppercase tracking-wider text-text-secondary mb-2",children:"Venue"}),e.jsx("p",{className:"text-2xl font-display font-black text-text-primary",children:r})]}),e.jsxs("div",{className:"border-t-2 border-success/20 pt-4",children:[e.jsx("p",{className:"text-sm font-semibold uppercase tracking-wider text-text-secondary mb-2",children:"Deal"}),e.jsx("p",{className:"text-lg font-bold text-text-primary",children:s})]})]}),e.jsxs("div",{className:"bg-bg-primary rounded-lg px-6 py-4 space-y-2 border border-border-subtle",children:[e.jsx("p",{className:"text-5xl font-mono font-black text-action-primary",children:n}),e.jsx("p",{className:"text-lg font-semibold text-text-secondary",children:i})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-lg font-semibold text-text-primary",children:"Show this screen to staff"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Auto-closes in 10 seconds"})]})]})})},xl=({isOpen:t,onClose:s,onActivate:r})=>{const[a,n]=c.useState(""),[i,o]=c.useState(""),[l,d]=c.useState(""),[h,u]=c.useState(!1),[x,y]=c.useState(null),g=async p=>{if(p.preventDefault(),h||!a.trim()||!i.trim())return;u(!0),y(null);const v=await r(a.trim(),i.trim(),l.trim()||null);v.success||(y(v.message),u(!1))};return e.jsxs(pe,{isOpen:t,onClose:s,title:"Activate Shared Pass",maxWidth:"md",children:[e.jsx("p",{className:"text-text-secondary mb-6",children:"Enter the details from the original pass to activate it on this device."}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx(Ne,{type:"text",value:a,onChange:p=>n(p.target.value.toUpperCase()),placeholder:"Pass ID (e.g., PAHP-XYZ123)",ariaLabel:"Pass ID",disabled:h,required:!0}),e.jsx(Ne,{type:"text",value:i,onChange:p=>o(p.target.value),placeholder:"Primary Pass Holder's Name",ariaLabel:"Primary Pass Holder's Name",disabled:h,required:!0}),e.jsx(Ne,{type:"text",value:l,onChange:p=>d(p.target.value),placeholder:"Your Name (+1, if adding)",ariaLabel:"Your Name",disabled:h}),x&&e.jsx("p",{className:"text-accent-secondary text-sm bg-accent-secondary/20 border border-accent-secondary/50 p-3 rounded-lg",children:x}),e.jsx(M,{type:"submit",variant:"primary",className:"w-full text-lg",disabled:h,children:h?"Activating...":"Activate Pass"})]})]})},pl=({isOpen:t,userEmail:s,onConfirm:r,onCancel:a})=>e.jsx(pe,{isOpen:t,onClose:a,title:"Sign Out",showCloseButton:!0,children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-text-secondary text-sm mb-6",children:s&&e.jsxs(e.Fragment,{children:["Signing out from ",e.jsx("span",{className:"font-semibold text-text-primary",children:s})]})}),e.jsx("p",{className:"text-text-secondary text-center mb-8",children:"Are you sure you want to sign out? You'll need to sign in again to access your pass."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(M,{type:"button",variant:"redeem",className:"w-full !text-white",onClick:r,children:"Yes, Sign Out"}),e.jsx(M,{type:"button",variant:"outline",className:"w-full",onClick:a,children:"Cancel"})]})]})}),fl=({isOpen:t,onClose:s})=>e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[70] flex items-center justify-center p-4 overflow-y-auto",style:{display:t?"flex":"none"},onClick:s,children:e.jsxs("div",{className:"bg-bg-card rounded-2xl shadow-2xl p-6 sm:p-8 max-w-lg w-full relative border-4 border-action-primary my-8",onClick:r=>r.stopPropagation(),children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-text-secondary hover:text-text-primary transition-colors","aria-label":"Close",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-success/20 rounded-full mb-4",children:e.jsx("svg",{className:"w-12 h-12 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-3xl font-display font-black text-accent-primary mb-2",children:"You're All Set! ðŸŽ‰"}),e.jsx("p",{className:"text-text-secondary text-lg",children:"Your Holiday Pass is ready to use"})]}),e.jsxs("div",{className:"bg-bg-primary rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"font-bold text-lg text-text-primary mb-4",children:"How to redeem your deals:"}),e.jsxs("ol",{className:"space-y-4",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-action-primary text-white rounded-full flex items-center justify-center font-bold text-sm",children:"1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-text-primary",children:"Visit any partner venue"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Browse deals below and choose where to go"})]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-action-primary text-white rounded-full flex items-center justify-center font-bold text-sm",children:"2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-text-primary",children:'Tap "Redeem" on the deal'}),e.jsx("p",{className:"text-sm text-text-secondary",children:"This will show a confirmation screen"})]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-action-primary text-white rounded-full flex items-center justify-center font-bold text-sm",children:"3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-text-primary",children:"Show the green screen to staff"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"They'll honor your deal on the spot"})]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-success text-white rounded-full flex items-center justify-center font-bold text-sm",children:"âœ“"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-text-primary",children:"Enjoy your savings!"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Use each deal once per venue"})]})]})]})]}),e.jsx("div",{className:"bg-value-highlight/10 border-2 border-value-highlight/30 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-value-highlight flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-sm text-text-primary mb-1",children:"Pro Tip:"}),e.jsx("p",{className:"text-xs text-text-secondary",children:"Check deal terms before visiting. Some deals may have restrictions like specific days or times."})]})]})}),e.jsx(M,{variant:"primary",onClick:s,className:"w-full text-lg",children:"Start Exploring Deals"}),e.jsx("p",{className:"text-center text-xs text-text-secondary mt-4",children:"Need help? Use the WhatsApp button to chat with us"})]})}),gl=({onClose:t})=>e.jsx("div",{className:"fixed inset-0 bg-bg-primary/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:t,children:e.jsxs("div",{className:"bg-bg-card rounded-2xl shadow-2xl p-6 sm:p-8 max-w-2xl w-full relative border border-border-subtle my-8",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-text-secondary hover:text-text-primary transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-display font-black text-accent-primary mb-4",children:"POPIA Compliance"}),e.jsxs("div",{className:"prose prose-sm max-w-none text-text-primary space-y-4 overflow-y-auto max-h-96",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"font-semibold text-accent-primary text-lg mb-2",children:"Protection of Personal Information Act (POPIA)"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"In compliance with South Africa's Protection of Personal Information Act, 2013 (Act No. 4 of 2013), we inform you of the following:"})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"font-semibold text-accent-primary mb-2",children:"1. Collection and Processing of Personal Information"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"We collect and process your personal information, including but not limited to your name, email address, and payment details, to provide you with our holiday pass services."})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"font-semibold text-accent-primary mb-2",children:"2. Purpose of Processing"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Your personal information is processed for the following purposes:"}),e.jsxs("ul",{className:"text-sm text-text-secondary list-disc list-inside space-y-1",children:[e.jsx("li",{children:"To create and manage your account"}),e.jsx("li",{children:"To process pass purchases and redemptions"}),e.jsx("li",{children:"To provide customer support"}),e.jsx("li",{children:"To comply with legal and regulatory requirements"}),e.jsx("li",{children:"To send you relevant updates about your passes and services"})]})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"font-semibold text-accent-primary mb-2",children:"3. Legal Basis for Processing"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"We process your personal information based on your explicit consent, which you provide by checking this box during account creation."})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"font-semibold text-accent-primary mb-2",children:"4. Data Security"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"We implement appropriate technical and organizational measures to protect your personal information from unauthorized access, alteration, disclosure, or destruction."})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"font-semibold text-accent-primary mb-2",children:"5. Data Retention"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"We retain your personal information for as long as necessary to provide our services and fulfill our legal obligations. When you request account deletion, we will remove your personal information in accordance with POPIA requirements."})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"font-semibold text-accent-primary mb-2",children:"6. Your Rights"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Under POPIA, you have the right to:"}),e.jsxs("ul",{className:"text-sm text-text-secondary list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Request access to your personal information"}),e.jsx("li",{children:"Request correction or deletion of your data"}),e.jsx("li",{children:"Object to the processing of your data"}),e.jsx("li",{children:"Request restriction of processing"}),e.jsx("li",{children:"Withdraw your consent at any time"})]})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"font-semibold text-accent-primary mb-2",children:"7. Contact Information"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"If you have any questions about how we handle your personal information or wish to exercise your rights under POPIA, please contact us at support@holidaypass.com."})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"font-semibold text-accent-primary mb-2",children:"8. Consent Confirmation"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"By checking the POPIA Compliance checkbox, you explicitly confirm that you have read and understood this notice, and you consent to the collection and processing of your personal information as described above."})]})]}),e.jsx("button",{onClick:t,className:"w-full mt-6 px-4 py-3 bg-accent-primary text-white rounded-lg hover:bg-accent-secondary transition font-semibold",children:"I Understand"})]})}),yl=({isOpen:t,userEmail:s,onClose:r,onProfileComplete:a})=>{const[n,i]=c.useState(""),[o,l]=c.useState(null),[d,h]=c.useState(!1),[u,x]=c.useState(!1),[y,g]=c.useState(!1),[p,v]=c.useState(!1),[f,j]=c.useState(!1),[b,w]=c.useState(!1),[C,S]=c.useState(!1),A=async I=>{I.preventDefault(),l(null);const D=go(n,"Full name");if(D){l(D.message);return}const R=wo(u,y,p);if(R){l(R.message);return}h(!0);const k=await Qo(n.trim());h(!1),k.success?(a(n.trim()),i(""),x(!1),g(!1),v(!1)):l(k.error||"Failed to save profile")};return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{isOpen:t,onClose:r,title:"Complete Your Profile",maxWidth:"md",showCloseButton:!1,children:[e.jsx("p",{className:"text-text-secondary text-sm mb-6",children:"Just a few details to get started"}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary mb-2 text-left",children:"Email"}),e.jsx("p",{className:"w-full px-4 py-3 bg-bg-primary border-2 border-border-subtle rounded-lg text-text-primary",children:s})]}),e.jsx(Ne,{type:"text",value:n,onChange:I=>i(I.target.value),placeholder:"Your Full Name",ariaLabel:"Your Full Name",disabled:d,required:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wide mb-3",children:"Legal Requirements"}),e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border-2 border-accent-primary/20 hover:border-accent-primary/50 hover:bg-accent-primary/5 transition cursor-pointer group",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center h-5 pt-1",children:e.jsx("input",{type:"checkbox",checked:u,onChange:I=>x(I.target.checked),className:"w-5 h-5 rounded accent-accent-primary cursor-pointer",disabled:d})}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("button",{type:"button",onClick:I=>{I.preventDefault(),j(!0)},className:"text-sm font-semibold text-accent-primary hover:text-action-primary underline transition text-left",children:"Terms of Service"}),e.jsx("span",{className:"text-xs text-text-secondary",children:"I agree to the usage terms and conditions"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border-2 border-accent-primary/20 hover:border-accent-primary/50 hover:bg-accent-primary/5 transition cursor-pointer group",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center h-5 pt-1",children:e.jsx("input",{type:"checkbox",checked:y,onChange:I=>g(I.target.checked),className:"w-5 h-5 rounded accent-accent-primary cursor-pointer",disabled:d})}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("button",{type:"button",onClick:I=>{I.preventDefault(),w(!0)},className:"text-sm font-semibold text-accent-primary hover:text-action-primary underline transition text-left",children:"Privacy Policy"}),e.jsx("span",{className:"text-xs text-text-secondary",children:"I agree to how my data is collected and used"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border-2 border-accent-primary/20 hover:border-accent-primary/50 hover:bg-accent-primary/5 transition cursor-pointer group",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center h-5 pt-1",children:e.jsx("input",{type:"checkbox",checked:p,onChange:I=>v(I.target.checked),className:"w-5 h-5 rounded accent-accent-primary cursor-pointer",disabled:d})}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("button",{type:"button",onClick:I=>{I.preventDefault(),S(!0)},className:"text-sm font-semibold text-accent-primary hover:text-action-primary underline transition text-left",children:"POPIA Compliance"}),e.jsx("span",{className:"text-xs text-text-secondary",children:"I consent to data processing (South African privacy law)"})]})]})]}),o&&e.jsx("p",{className:"text-action-primary text-sm bg-action-primary/20 border border-action-primary/50 p-3 rounded-lg",children:o}),!u||!y||!p?e.jsx("p",{className:"text-xs text-action-primary bg-action-primary/10 border border-action-primary/30 p-3 rounded-lg text-center",children:"You must agree to all terms and conditions to continue"}):null,e.jsx(M,{type:"submit",variant:"primary",className:`w-full text-lg transition-opacity ${!u||!y||!p?"opacity-50 cursor-not-allowed":""}`,disabled:d||!u||!y||!p,children:d?"Saving...":"Complete Profile"})]})]}),f&&e.jsx(Qs,{onClose:()=>j(!1)}),b&&e.jsx(qs,{onClose:()=>w(!1)}),C&&e.jsx(gl,{onClose:()=>S(!1)})]})},bl=()=>e.jsxs("div",{className:"fixed inset-0 z-50 bg-bg-primary flex items-center justify-center",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 h-1 bg-action-primary/20 overflow-hidden",children:e.jsx("div",{className:"h-full bg-action-primary animate-pulse",style:{width:"70%",animation:"indeterminate 1.5s ease-in-out infinite"}})}),e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-bg-card animate-pulse"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-text-primary font-semibold mb-2",children:"Loading your pass..."}),e.jsx("p",{className:"text-text-secondary text-sm",children:"Just a moment"})]}),e.jsx("div",{className:"w-8 h-8 border-2 border-action-primary/30 border-t-action-primary rounded-full",style:{animation:"spin 1s linear infinite"}})]}),e.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
        @keyframes indeterminate {
          0% { transform: translateX(-100%); }
          50% { transform: translateX(100vw); }
          100% { transform: translateX(100vw); }
        }
      `})]}),vl=({onButtonClick:t,buttonText:s,onActivateClick:r,appStatus:a})=>{const n=a==="loading",i=n?"Checking Pass...":s;return e.jsx(e.Fragment,{children:e.jsxs("section",{className:"relative min-h-screen flex flex-col items-center justify-start md:justify-center text-center overflow-hidden",children:[e.jsx("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover md:hidden z-0",children:e.jsx("source",{src:"/Videos/hero-background.mp4",type:"video/mp4"})}),e.jsx("div",{className:"hidden md:block absolute inset-0 bg-cover bg-center bg-fixed z-0",style:{backgroundImage:"url('https://portalfred.co.za/wp-content/uploads/2021/09/West-beach-from-air-Copy-scaled.jpg')",backgroundAttachment:"fixed"}}),e.jsx("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/60 z-0"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 pt-24 md:pt-16 relative z-10 flex flex-col items-center",children:e.jsxs("div",{className:"max-w-3xl mx-auto scroll-reveal",children:[e.jsxs("h2",{className:"text-sm md:text-base font-semibold text-white uppercase tracking-widest mb-4 md:mb-5 drop-shadow-sm flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C7.13 2 3 6.13 3 11c0 5.25 9 13 9 13s9-7.75 9-13c0-4.87-4.13-9-9-9zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),"Port Alfred Holiday Pass"]}),e.jsxs("h1",{className:"font-display text-white leading-tight mb-12 md:mb-16 drop-shadow-lg",children:[e.jsxs("span",{className:"block text-2xl md:text-4xl font-normal",children:[e.jsx("span",{className:"font-bold text-yellow-300",children:"Holiday"})," Like a ",e.jsx("span",{className:"font-bold text-yellow-300",children:"Local"})," on"]}),e.jsx("span",{className:"block text-5xl md:text-7xl font-black",children:"SA's Blue Flag Coast"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-8",children:[e.jsx(M,{variant:"primary",size:"lg",className:"px-12 transform transition-transform duration-300 hover:scale-105 animate-subtle-pulse disabled:animate-none disabled:bg-gray-500",onClick:t,disabled:n,children:i}),e.jsx("div",{className:"mt-12 opacity-60",style:{animation:"gentle-bob 2.5s ease-in-out infinite"},children:e.jsx("svg",{className:"w-6 h-6 text-white drop-shadow-md",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 5v14M19 12l-7 7m0 0l-7-7",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("style",{children:`
                   @keyframes gentle-bob {
                     0%, 100% { transform: translateY(0px); }
                     50% { transform: translateY(8px); }
                   }
                  `})]})]})})]})})},jl=({variant:t="intro"})=>{const s="https://portalfred.co.za/wp-content/uploads/2021/09/West-beach-from-air-Copy-scaled.jpg",a={intro:{tag:"Welcome",heading:"Discover Port Alfred Like Never Before",body:"Where the gentle Kowie River meets the endless Indian Ocean. We believe a holiday is more than just seeing the sights, it's the feeling of warm sand between your toes, the taste of salt on the air, and the stories you'll share for years. Your real holiday starts now."},welcome:{tag:"Welcome Aboard",heading:"Your Port Alfred Adventure Begins.",body:"Where the gentle Kowie River meets the endless Indian Ocean. We believe a holiday is more than just seeing the sights, it's the feeling of warm sand between your toes, the taste of salt on the air, and the stories you'll share for years. Your real holiday starts now."},welcomeWithPass:{tag:"VIP Access",heading:"Exclusive Savings Unlocked",body:"You're now part of an exclusive community of savvy holidaymakers. Explore curated deals at premium venues and enjoy authentic Port Alfred experiences at unbeatable savings."}}[t];return e.jsx("section",{id:"welcome",className:"py-20 md:py-32 bg-bg-primary",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:`${t==="intro"?"grid md:grid-cols-2":""} gap-12 md:gap-16 items-center`,children:[t==="intro"&&e.jsx("div",{className:"scroll-reveal",children:e.jsx("img",{src:s,alt:"An aerial view of Port Alfred's coastline and the Kowie River mouth.",className:"rounded-lg shadow-2xl w-full h-full object-cover border-4 border-action-primary"})}),e.jsxs("div",{className:`scroll-reveal ${t==="intro"?"text-center":"max-w-2xl mx-auto text-center"}`,style:{transitionDelay:"150ms"},children:[e.jsx("h2",{className:"text-sm md:text-base font-semibold text-action-primary uppercase tracking-widest mb-4 md:mb-5",children:a.tag}),e.jsx("h1",{className:"text-4xl md:text-5xl font-display font-black text-text-primary mb-4 md:mb-6",children:a.heading}),e.jsx("p",{className:"text-lg md:text-xl text-text-secondary leading-relaxed mb-8 md:mb-10",children:a.body})]})]})})})},wl=()=>{const t=[{title:"Get Your Pass",description:e.jsxs(e.Fragment,{children:["Purchase the ",e.jsx("span",{className:"font-bold",children:"Holiday Pass"})," and get instant access to exclusive deals from December 1st to January 31st."]})},{title:"Show Your Pass",description:"Present the digital pass on your phone at any partner venue."},{title:"Save Instantly",description:"Enjoy your exclusive deal on the spot. It's that easy!"}];return e.jsx("section",{id:"how-it-works",className:"py-20 md:py-32 bg-bg-card",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-16 scroll-reveal",children:[e.jsx("h2",{className:"text-sm md:text-base font-semibold text-action-primary uppercase tracking-widest mb-4 md:mb-5",children:"Three Simple Steps"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-display font-black text-accent-primary mb-4 md:mb-6",children:"Howzit Work?"}),e.jsx("p",{className:"text-lg md:text-xl text-text-secondary leading-relaxed mb-8 md:mb-10",children:"Get your Holiday Pass in 3 easy steps and start saving at your favorite venues"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12",children:t.map((s,r)=>e.jsxs("div",{className:"text-left scroll-reveal",style:{transitionDelay:`${r*150}ms`},children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("div",{className:"text-5xl font-display font-black text-action-primary",children:["0",r+1]}),e.jsx("h3",{className:"text-2xl font-display font-black text-accent-primary ml-4",children:s.title})]}),e.jsx("p",{className:"text-text-secondary leading-relaxed md:pl-16",children:s.description})]},r))})]})})},Ys=()=>{const{data:t=[],isLoading:s,error:r}=ca({queryKey:["deals"],queryFn:()=>Tt(),staleTime:3e5,gcTime:6e5});return{deals:t,isLoading:s,error:r?r.message:null}},va=t=>{const{data:s=null,isLoading:r,error:a,refetch:n}=ca({queryKey:["vendor",t],queryFn:()=>Ft(t),staleTime:3e5,gcTime:6e5,enabled:!!t});return{vendor:s,isLoading:r,error:a?a.message:null,refreshVendor:n}},ja=({images:t,alt:s,className:r="",heightClass:a="h-full",dotsClass:n="absolute bottom-3 left-1/2 -translate-x-1/2",showDots:i=!0,showArrows:o=!0})=>{const[l,d]=c.useState(0),h=c.useRef(null),u=()=>{d(g=>g===t.length-1?0:g+1)},x=()=>{d(g=>g===0?t.length-1:g-1)},y=(g,p)=>{p==null||p.stopPropagation(),d(g)};return!t||t.length===0?e.jsx("div",{className:`bg-gray-200 ${a} w-full flex items-center justify-center text-gray-400`,children:"No Image"}):t.length===1?e.jsx("img",{src:t[0],alt:s,className:`w-full ${a} object-cover ${r}`}):e.jsxs("div",{ref:h,className:`relative group w-full ${a} ${r}`,children:[e.jsx("div",{className:"w-full h-full overflow-hidden",children:e.jsx("img",{src:t[l],alt:`${s} ${l+1}`,className:"w-full h-full object-cover transition-transform duration-500"})}),o&&t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:x,className:`absolute left-2 sm:left-3 top-2 sm:top-3 text-white p-2 sm:p-3 
                            transition-all duration-300 z-20 opacity-70 hover:opacity-100 active:scale-95`,"aria-label":"Previous image",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 sm:h-7 sm:w-7 drop-shadow-md",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:u,className:`absolute right-2 sm:right-3 top-2 sm:top-3 text-white p-2 sm:p-3 
                            transition-all duration-300 z-20 opacity-70 hover:opacity-100 active:scale-95`,"aria-label":"Next image",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 sm:h-7 sm:w-7 drop-shadow-md",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]}),i&&e.jsxs("div",{className:`${n} flex flex-col items-center gap-2 z-20`,children:[e.jsx("div",{className:"flex gap-1.5 px-2 py-1 rounded-full bg-black/20 backdrop-blur-[2px]",children:t.map((g,p)=>e.jsx("button",{onClick:v=>y(p,v),className:`w-2 h-2 rounded-full transition-all duration-300 shadow-sm ${p===l?"bg-white w-4":"bg-white/60 hover:bg-white/90"}`,"aria-label":`Go to image ${p+1}`},p))}),t.length>1&&e.jsx("p",{className:"text-xs text-white/70 font-medium drop-shadow-md mt-1.5 px-2",children:"Use arrows to view images"})]})]})},_s=({email:t,phone:s,className:r="",buttonClassName:a=""})=>{const[n,i]=c.useState(!1),o=c.useRef(null);return c.useEffect(()=>{const l=d=>{o.current&&!o.current.contains(d.target)&&i(!1)};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[]),!t&&!s?null:e.jsxs("div",{className:`relative ${r}`,ref:o,children:[e.jsxs("button",{onClick:l=>{l.stopPropagation(),i(!n)},className:`inline-flex items-center justify-center gap-2 w-full font-bold text-text-primary bg-bg-card border border-border-subtle rounded-md hover:bg-bg-secondary transition-all ${n?"ring-2 ring-accent-primary border-transparent":""} ${a||"px-4 py-2.5 sm:py-3 text-sm sm:text-base"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})}),e.jsx("span",{children:"Contact"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 transition-transform duration-200 ${n?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),n&&e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-72 bg-bg-card rounded-lg shadow-xl border border-border-subtle overflow-hidden z-50 animate-in fade-in slide-in-from-bottom-2 duration-200",children:e.jsxs("div",{className:"p-1",children:[s&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:`tel:${s}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-bg-secondary rounded-md transition-colors text-text-primary",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"bg-action-primary/10 p-2 rounded-full text-action-primary",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-text-secondary font-medium",children:"Call"}),e.jsx("span",{className:"font-bold text-sm",children:s})]})]}),e.jsxs("a",{href:`https://wa.me/${s.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 hover:bg-bg-secondary rounded-md transition-colors text-text-primary",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"bg-[#25D366]/10 p-2 rounded-full text-[#25D366]",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-text-secondary font-medium",children:"WhatsApp"}),e.jsx("span",{className:"font-bold text-sm",children:"Chat now"})]})]})]}),t&&e.jsxs("a",{href:`mailto:${t}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-bg-secondary rounded-md transition-colors text-text-primary",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"bg-accent-primary/10 p-2 rounded-full text-accent-primary",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-text-secondary font-medium",children:"Email"}),e.jsx("span",{className:"font-bold text-sm break-all",children:t})]})]})]})})]})},wa=({isOpen:t,onClose:s,images:r,dealName:a,location:n})=>{const[i,o]=c.useState(0),l=c.useRef(null);return c.useEffect(()=>{t&&o(0)},[t]),!t||!r||r.length===0?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/90 z-40",onClick:s}),e.jsxs("div",{ref:l,className:"fixed inset-0 z-50 flex flex-col",children:[e.jsx("div",{className:"bg-black/80 backdrop-blur-sm px-4 py-3 sm:px-6 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-white font-bold text-lg sm:text-xl truncate",children:a}),n&&e.jsx("p",{className:"text-gray-300 text-xs sm:text-sm truncate",children:n})]}),e.jsx("button",{onClick:s,className:"ml-3 text-white hover:text-gray-300 transition-colors p-3 flex-shrink-0 min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Close gallery",children:e.jsx("svg",{className:"w-6 h-6 sm:w-7 sm:h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-6 sm:px-6 overflow-hidden",children:e.jsx("div",{className:"w-full h-full max-w-2xl",children:e.jsxs("div",{className:"relative h-full",children:[e.jsx("img",{src:r[i],alt:`${a} image ${i+1}`,className:"w-full h-full object-contain"}),r.length>1&&e.jsx("button",{onClick:()=>o(d=>d===0?r.length-1:d-1),className:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 text-white p-3 rounded-full transition-colors z-20 min-w-[48px] min-h-[48px] flex items-center justify-center","aria-label":"Previous image",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.length>1&&e.jsx("button",{onClick:()=>o(d=>d===r.length-1?0:d+1),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 text-white p-3 rounded-full transition-colors z-20 min-w-[48px] min-h-[48px] flex items-center justify-center","aria-label":"Next image",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})}),e.jsx("div",{className:"bg-black/80 backdrop-blur-sm px-4 py-3 sm:px-6 sm:py-4",children:e.jsxs("p",{className:"text-gray-300 text-sm",children:["Image ",i+1," of ",r.length]})})]})]})},Gs=({deal:t,index:s,hasPass:r,isRedeemed:a,onRedeemClick:n,cardHeight:i="h-96"})=>{const[o,l]=c.useState(!1),{vendor:d}=va(t.vendorId),h=(d==null?void 0:d.mapsUrl)||null,u=t.offer,x=v=>{const f=v.target;f.closest("button")||f.closest("a")||f.closest('[role="button"]')||f.closest("[data-interactive]")||l(!0)},y=t.imageUrl||(d==null?void 0:d.imageUrl),g=t.images&&t.images.length>0?t.images:(d==null?void 0:d.images)||[],p=y?[y,...g.filter(v=>v!==y)]:g;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"scroll-reveal rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl",style:{transitionDelay:`${s*100}ms`},children:e.jsxs("div",{className:`relative ${i} group bg-gray-300 dark:bg-gray-600 cursor-pointer`,onClick:x,children:[e.jsx(ja,{images:p,alt:t.name,className:"w-full h-full",dotsClass:"absolute top-4 left-1/2 -translate-x-1/2"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent pointer-events-none"}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-3 sm:p-4 z-10",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-display font-black text-white mb-2 leading-tight",children:t.name}),e.jsx("p",{className:"text-sm sm:text-base text-gray-100 font-medium mb-3 line-clamp-2",children:u}),t.terms&&e.jsxs("p",{className:"text-xs text-gray-200 font-medium italic mb-4 border-t border-gray-300/50 pt-2",children:[e.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Terms:"})," ",t.terms]}),e.jsx("div",{className:"flex flex-col gap-2 sm:gap-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r&&e.jsx(e.Fragment,{children:a?e.jsxs("div",{className:"col-span-2 inline-flex items-center justify-center gap-2 px-4 py-2.5 sm:py-3 rounded-md bg-success text-white text-sm sm:text-base font-bold whitespace-nowrap",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Redeemed"})]}):e.jsx("button",{onClick:()=>n==null?void 0:n(t.name),className:"col-span-2 w-full px-4 py-2.5 sm:py-3 text-sm sm:text-base font-bold text-white bg-urgency-high rounded-md hover:brightness-110 transition-all",children:"Redeem"})}),h&&e.jsxs("a",{href:h,target:"_blank",rel:"noopener noreferrer","aria-label":`Get directions to ${t.name}`,className:"inline-flex items-center justify-center gap-2 w-full px-4 py-2.5 sm:py-3 text-sm sm:text-base font-bold text-white bg-action-primary rounded-md hover:brightness-105 transition-all",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11.5a1 1 0 012 0v4.071a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}),e.jsx("span",{children:"Directions"})]}),e.jsx(_s,{email:d==null?void 0:d.email,phone:d==null?void 0:d.phone,className:h?"":"col-span-2"})]})})]})]})},t.name),p&&p.length>0&&Rs.createPortal(e.jsx(wa,{isOpen:o,onClose:()=>l(!1),images:p,dealName:t.name,location:d==null?void 0:d.city}),document.body)]})},Nl=({hasPass:t,redeemedDeals:s=[],onRedeemClick:r,isFreeUser:a=!1,onSignInClick:n})=>{const{deals:i,isLoading:o}=Ys();let l=i.filter(h=>h.featured);a&&(l=l.slice(0,3));const d=h=>s.includes(h);return e.jsx("section",{id:"deals-showcase",className:"bg-bg-primary",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 relative py-12 md:py-20",children:[e.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-12",children:[e.jsx("h2",{className:"text-sm md:text-base font-semibold text-action-primary uppercase tracking-widest mb-4 md:mb-5",children:"Featured Deals"}),e.jsx("p",{className:"text-3xl md:text-4xl font-display font-black text-accent-primary mb-4 md:mb-6",children:"The Heavy Hitters"}),e.jsx("p",{className:"text-lg md:text-xl text-text-secondary leading-relaxed mb-8 md:mb-10",children:"Get the best savings at Port Alfred's premier venues"})]}),o&&e.jsx("p",{className:"text-center text-text-secondary",children:"Loading featured deals..."}),!o&&l.length===0&&e.jsx("p",{className:"text-center text-text-secondary",children:"No featured deals yet. Check back soon!"}),!o&&l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((h,u)=>e.jsx(Gs,{deal:h,index:u,hasPass:t,isRedeemed:d(h.name),onRedeemClick:r,cardHeight:"h-96"},h.name))}),a&&e.jsxs("div",{className:"text-center mt-12",children:[e.jsx("p",{className:"text-text-secondary mb-4",children:"Interested in more deals? Sign in to browse all available offers."}),e.jsx("button",{onClick:n,className:"text-action-primary font-semibold hover:underline",children:"Sign in to view all deals"})]})]})]})})},Cl=({onSelectPass:t})=>{const[s,r]=c.useState(!1),[a,n]=c.useState({price:199,cents:19900,launchPricing:!1});c.useEffect(()=>{(async()=>{const d=await fa();n(d)})()},[]);const i=()=>{window.open("https://chat.whatsapp.com/HRSAKdexnaR0FkzGohcLqX","_blank")},o=()=>{t&&(r(!0),t("holiday"))};return e.jsx("section",{id:"pricing-options",className:"py-20 md:py-32 bg-bg-primary",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-16 scroll-reveal",children:[e.jsx("h2",{className:"text-sm md:text-base font-semibold text-action-primary uppercase tracking-widest mb-4 md:mb-5",children:"Select Your Plan"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-display font-black text-text-primary mb-4 md:mb-6",children:"Choose Your Pass"}),e.jsx("p",{className:"text-lg md:text-xl text-text-secondary mb-8 md:mb-10",children:"One town, two ways to unlock incredible savings."})]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"border-2 border-action-primary bg-bg-card rounded-2xl p-6 sm:p-8 flex flex-col scroll-reveal relative",children:[e.jsx("div",{className:"absolute top-0 -translate-y-1/2 left-1/2 -translate-x-1/2 bg-action-primary text-white dark:bg-action-primary dark:text-white font-bold text-sm px-4 py-1 rounded-full shadow-lg",children:"The Only Pass"}),e.jsx("h3",{className:"text-3xl font-display font-black text-text-primary text-center mb-4",children:"Holiday Pass"}),e.jsx("div",{className:"text-center mb-6",children:e.jsxs("div",{children:[e.jsxs("span",{className:"text-5xl font-display font-black text-action-primary",children:["R",a.price]}),a.launchPricing&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"block text-sm text-urgency-high font-bold mt-1",children:"ðŸŽ‰ Launch Pricing!"}),e.jsx("span",{className:"block text-xs text-urgency-high mt-1",children:"From Nov 30 â€¢ Limited to first 50 users"})]}),e.jsx("span",{className:"text-text-secondary block text-sm mt-2",children:"Dec 1 - Jan 31"})]})}),e.jsx("p",{className:"text-text-secondary text-center mb-6",children:"Unlock exclusive deals at premium Port Alfred venues. Valid from December 1st through January 31st."}),e.jsxs("ul",{className:"space-y-3 mb-8",children:[e.jsxs("li",{className:"flex items-start text-text-secondary",children:[e.jsx("span",{className:"text-action-primary mr-3 font-bold",children:"âœ“"}),e.jsx("span",{children:"Valid from December 1st to January 31st"})]}),e.jsxs("li",{className:"flex items-start text-text-secondary",children:[e.jsx("span",{className:"text-action-primary mr-3 font-bold",children:"âœ“"}),e.jsx("span",{children:"Access to all Port Alfred deals"})]}),e.jsxs("li",{className:"flex items-start text-text-secondary",children:[e.jsx("span",{className:"text-action-primary mr-3 font-bold",children:"âœ“"}),e.jsx("span",{children:"One redemption per venue"})]})]}),e.jsx("div",{className:"border-t border-border-subtle pt-4 mt-auto space-y-2 text-center text-sm text-text-secondary mb-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4 text-action-primary",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),e.jsx("span",{children:"Instant digital access"})]})}),e.jsxs("div",{className:"pt-3 space-y-3",children:[e.jsx(M,{variant:"primary",className:"w-full text-lg py-3 transform transition-transform duration-300 hover:scale-105 animate-subtle-pulse disabled:animate-none",onClick:i,children:"Join Waiting List"}),e.jsx(M,{variant:"secondary",className:"w-full text-lg py-3 opacity-75",onClick:o,disabled:s,children:s?"Processing...":`Test Payment (R${a.price})`})]})]})})})]})})},Pl=({onSelectPass:t,onActivateClick:s,onMainCtaClick:r,onAuthClick:a})=>e.jsxs("main",{children:[e.jsx(vl,{onButtonClick:r,buttonText:"Get My Holiday Pass Now",passHolderName:null,onActivateClick:s,appStatus:"guest"}),e.jsx(jl,{variant:"intro"}),e.jsx(wl,{}),e.jsx(Nl,{hasPass:!1,onRedeemClick:()=>{},redeemedDeals:[],isFreeUser:!0,onSignInClick:a}),e.jsx(ya,{}),e.jsx(ba,{}),e.jsx(Cl,{onSelectPass:t})]}),kl=({userName:t,onSelectPass:s})=>e.jsxs("main",{className:"pb-24 sm:pb-0",children:[e.jsx("section",{className:"bg-bg-primary pt-8 md:pt-16 pb-4 md:pb-12",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center scroll-reveal",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-display font-black text-text-primary mb-3",children:["Welcome, ",t||"Friend"]}),e.jsx("p",{className:"text-lg md:text-xl text-text-secondary mb-6",children:"You're signed in, but your pass isn't active yet."}),e.jsx("div",{className:"inline-block px-4 py-2 bg-urgency-high/20 rounded-full border-2 border-urgency-high",children:e.jsx("span",{className:"text-urgency-high font-bold text-sm",children:"Free Account"})})]})})}),e.jsx("section",{className:"bg-bg-primary py-6 md:py-16",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-action-primary rounded-2xl p-6 sm:p-8 md:p-12 shadow-xl scroll-reveal",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-display font-black text-white mb-3",children:"Unlock Your Holiday Pass"}),e.jsx("p",{className:"text-lg text-white/90 mb-2",children:"Join 70+ locals saving big this December"}),e.jsx("p",{className:"text-sm text-white/80 mb-6 md:mb-8",children:"Instant access to R2,000+ in verified savings across Port Alfred's best venues"}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-4 md:p-6 mb-6 md:mb-8 backdrop-blur-sm border border-white/30",children:[e.jsx("p",{className:"text-white/80 text-sm font-semibold mb-2",children:"Limited Launch Offer"}),e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsx("span",{className:"text-4xl font-display font-black text-white",children:"R99"}),e.jsx("span",{className:"text-white/70 line-through",children:"R299"}),e.jsx("span",{className:"text-value-highlight font-bold",children:"67% OFF"})]})]}),e.jsx("button",{onClick:s,className:"w-full bg-white text-action-primary font-bold text-lg py-4 px-6 rounded-lg hover:bg-white/95 transition-all duration-300 shadow-lg",children:"Get My Pass Now â†’"})]})})})}),e.jsx("section",{className:"hidden md:block bg-bg-primary py-12 md:py-16",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-sm md:text-base font-semibold text-action-primary uppercase tracking-widest mb-4 text-center",children:"What You'll Unlock"}),e.jsx("p",{className:"text-3xl md:text-4xl font-display font-black text-accent-primary mb-12 text-center",children:"Access to Premium Deals"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[{emoji:"ðŸ½ï¸",title:"Food & Dining",desc:"2-for-1s, discounts & exclusive meals"},{emoji:"ðŸ„",title:"Adventure",desc:"Water sports, tours & outdoor activities"},{emoji:"ðŸ›ï¸",title:"Retail",desc:"Shopping discounts at local favorites"}].map(r=>e.jsxs("div",{className:"bg-bg-card rounded-xl p-6 border-4 border-action-primary shadow-lg scroll-reveal hover:shadow-xl transition-all text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:r.emoji}),e.jsx("h3",{className:"text-lg font-display font-bold text-text-primary mb-2",children:r.title}),e.jsx("p",{className:"text-text-secondary text-sm",children:r.desc})]},r.title))}),e.jsxs("div",{className:"bg-bg-card rounded-xl p-8 border-4 border-value-highlight shadow-lg",children:[e.jsx("h3",{className:"text-xl font-display font-black text-text-primary mb-6",children:"Your Benefits:"}),e.jsx("ul",{className:"space-y-4",children:["Browse 70+ verified deals at local venues","Instant digital pass delivered to your phone","Easy one-tap redemptions in-store","Real-time tracking of your savings","Support from our team via WhatsApp"].map((r,a)=>e.jsxs("li",{className:"flex items-start gap-4",children:[e.jsx("span",{className:"text-2xl flex-shrink-0",children:"âœ“"}),e.jsx("span",{className:"text-text-primary font-medium",children:r})]},a))})]})]})})}),e.jsx("section",{className:"bg-action-primary py-8 md:py-16",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-display font-black text-white mb-4",children:"Ready to Save?"}),e.jsx("p",{className:"text-lg text-white/90 mb-6 md:mb-8",children:"Join the Port Alfred Holiday Pass community today"}),e.jsx("button",{onClick:s,className:"inline-block bg-white text-action-primary font-bold text-lg py-4 px-12 rounded-lg hover:bg-white/95 transition-all duration-300 shadow-lg",children:"Get Pass - R99 â†’"})]})})})]}),Sl=t=>{const[s,r]=c.useState(0),[a,n]=c.useState(!0),[i,o]=c.useState(null);return c.useEffect(()=>{(async()=>{try{if(n(!0),o(null),t.length===0){r(0),n(!1);return}const d=await Tt();console.log("ðŸ“Š useTotalSavings - All deals from Firestore:",d),console.log("ðŸ“Š useTotalSavings - Redeemed deal names:",t);const h=t.reduce((u,x)=>{const y=d.find(g=>g.name===x);return console.log(`ðŸ“Š Looking for deal "${x}":`,y),u+((y==null?void 0:y.savings)||0)},0);console.log("ðŸ“Š useTotalSavings - Total calculated:",h),r(h)}catch(d){console.error("Error calculating total savings:",d),o(d instanceof Error?d.message:"Failed to calculate savings")}finally{n(!1)}})()},[t]),{totalSavings:s,isLoading:a,error:i}},Il=({userName:t,redeemedDeals:s=[],onBrowseDeals:r,onRedeemClick:a,onViewPass:n})=>{const{deals:i,isLoading:o}=Ys(),{totalSavings:l,isLoading:d}=Sl(s),h=i.filter(y=>y.featured),u=h.length>0?h[Math.floor(Math.random()*h.length)]:null,x=(u==null?void 0:u.name)&&s.includes(u.name);return e.jsxs("main",{className:"pb-24 sm:pb-0",children:[e.jsx("section",{className:"bg-bg-primary pt-8 md:pt-16 pb-4 md:pb-12",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center scroll-reveal",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-display font-black text-text-primary mb-3",children:["Welcome back, ",t||"Member"]}),e.jsx("p",{className:"text-lg md:text-xl text-text-secondary mb-6",children:"Your pass is active and ready to use"}),e.jsx("div",{className:"inline-block px-4 py-2 bg-success/20 rounded-full border-2 border-success",children:e.jsx("span",{className:"text-success font-bold text-sm",children:"Active Member"})})]})})}),e.jsx("section",{className:"bg-bg-primary py-6 md:py-16",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6 scroll-reveal",children:[e.jsxs("div",{className:"bg-action-primary/10 rounded-xl p-4 md:p-6 border-4 border-action-primary shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-3xl",children:"ðŸŽ¯"}),e.jsx("span",{className:"text-4xl font-display font-black text-action-primary",children:s.length})]}),e.jsx("p",{className:"text-text-secondary font-semibold",children:"Deals Redeemed"}),s.length>0&&e.jsx("p",{className:"text-xs text-text-secondary mt-2",children:s.length===1?"1 step closer to mastery":"Great progress!"})]}),e.jsxs("div",{className:"bg-value-highlight/10 rounded-xl p-4 md:p-6 border-4 border-value-highlight shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-3xl",children:"ðŸ’°"}),e.jsxs("span",{className:"text-4xl font-display font-black text-value-highlight",children:["R",d?"...":l]})]}),e.jsx("p",{className:"text-text-secondary font-semibold",children:"Estimated Savings"}),e.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Based on average deal value"}),l>0&&e.jsxs("p",{className:"text-xs text-text-secondary mt-2",children:["That's ",Math.round(l/3500*100),"% of pass value back!"]})]})]})})})}),e.jsx("section",{id:"home-pass-section",className:"bg-bg-primary py-4 md:py-12",style:{scrollMarginTop:"80px"},children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx("div",{className:"scroll-reveal",children:e.jsxs("button",{onClick:n,className:"w-full bg-action-primary rounded-2xl p-6 sm:p-8 shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 text-left group cursor-pointer",style:{color:"#FFFFFF"},children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-display font-black leading-tight group-hover:opacity-95 transition-opacity",style:{color:"#FFFFFF"},children:"Your Digital Pass"}),e.jsx("span",{className:"text-4xl flex-shrink-0 group-hover:scale-110 transition-transform duration-300",children:"ðŸ“±"})]}),e.jsx("p",{className:"text-base sm:text-lg font-semibold mb-4",style:{color:"rgba(255, 255, 255, 0.85)"},children:"Quick access to view your pass and redemption history"}),e.jsxs("div",{className:"inline-flex items-center gap-2 font-bold group-hover:gap-3 transition-all duration-300",style:{color:"#FFFFFF"},children:[e.jsx("span",{children:"View My Pass"}),e.jsx("svg",{className:"w-5 h-5 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})})})}),u&&!o&&e.jsx("section",{className:"hidden md:block bg-bg-primary py-12 md:py-16",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-sm md:text-base font-semibold text-action-primary uppercase tracking-widest mb-4 text-center",children:"Featured Offer"}),e.jsx("p",{className:"text-3xl md:text-4xl font-display font-black text-accent-primary mb-8 text-center",children:"Don't Miss Out"}),e.jsx("div",{className:"scroll-reveal",children:e.jsx(Gs,{deal:u,index:0,hasPass:!0,isRedeemed:x||!1,onRedeemClick:a,cardHeight:"h-96"})})]})})}),(o||d)&&e.jsx("section",{className:"hidden md:block bg-bg-primary py-12 md:py-16",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-bg-card rounded-2xl p-8 border-4 border-border-subtle animate-pulse",children:[e.jsx("div",{className:"h-8 bg-border-subtle rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-4 bg-border-subtle rounded w-1/2"})]})})})}),e.jsx("section",{className:"bg-bg-primary py-8 md:py-16",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-display font-black text-text-primary mb-6",children:"Ready to explore more?"}),e.jsxs(M,{onClick:r,variant:"primary",className:"px-8 py-4",children:["Browse All ",i.length," Deals"]})]})})})]})},Rl=({hasPass:t,userName:s,onSelectPass:r,redeemedDeals:a=[],onNavigateToDeal:n,pass:i,onRedeemClick:o,onNavigateToPass:l})=>t?e.jsx(Il,{userName:s,redeemedDeals:a,pass:i,onBrowseDeals:n,onRedeemClick:o,onViewPass:l}):e.jsx(kl,{userName:s,onSelectPass:()=>r==null?void 0:r("holiday")}),El=({passHolderName:t,onViewPass:s,onSeeAllDeals:r})=>{const a=()=>{if(r)r();else{const n=document.getElementById("deals-showcase");n&&n.scrollIntoView({behavior:"smooth"})}};return e.jsx("section",{className:"bg-bg-primary pt-12 md:pt-16 pb-12 md:pb-20",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsx("div",{className:"max-w-2xl mx-auto scroll-reveal",children:e.jsxs("div",{className:"bg-bg-primary p-6 sm:p-8 rounded-xl border-4 border-action-primary shadow-lg flex flex-col items-center text-center",children:[e.jsx("h2",{className:"text-2xl font-display font-black text-accent-primary mb-8",children:"Your Digital Pass"}),e.jsxs("button",{onClick:s,className:"w-48 h-auto aspect-[9/16] bg-action-primary rounded-2xl p-4 flex flex-col justify-between items-center text-white border-2 border-value-highlight shadow-md hover:shadow-xl hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-value-highlight mb-8","aria-label":"View your digital pass",children:[e.jsx("div",{className:"font-display font-black text-sm text-value-highlight",children:"PAHP"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-urgency-high text-xs font-semibold",children:"PASS HOLDER"}),e.jsx("p",{className:"font-display text-lg font-bold text-white break-words",children:t})]}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-urgency-high animate-live-pulse"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full",children:[e.jsx(M,{onClick:s,variant:"primary",className:"flex-1",children:"View My Pass"}),e.jsx(M,{onClick:a,variant:"secondary",className:"flex-1",children:"See All Deals"})]})]})})})})},Al=({pass:t,redeemedDeals:s,onViewPass:r})=>{const a=Dt(),[n,i]=c.useState([]);c.useEffect(()=>{(async()=>{try{const u=await Tt();i(u)}catch(u){console.error("Error loading deals:",u)}})()},[]);const o=()=>{r()},l=()=>{a("/deals")},d=s.map(h=>n.find(u=>u.name===h)).filter(h=>h!==void 0);return e.jsxs("main",{className:"pb-24 sm:pb-0",children:[e.jsx(El,{passHolderName:t.passHolderName,onViewPass:o,onSeeAllDeals:l}),e.jsxs("section",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-12 bg-bg-primary",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-display font-black text-text-primary mb-6",children:"Redemption History"}),d.length===0?e.jsx("div",{className:"bg-bg-card rounded-lg border border-border-subtle p-6 text-center",children:e.jsx("p",{className:"text-text-secondary",children:"Your redemptions will appear here as you use deals from your pass."})}):e.jsx("div",{className:"space-y-4",children:d.map(h=>e.jsx("div",{className:"bg-bg-card rounded-lg border border-border-subtle p-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-display font-bold text-accent-primary text-lg mb-2",children:h.name}),e.jsx("p",{className:"text-text-secondary font-medium mb-2",children:h.offer}),h.terms&&e.jsxs("p",{className:"text-xs text-text-secondary italic",children:["Terms: ",h.terms]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-md bg-success text-white font-bold",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Redeemed"})]})})]})},h.name))})]})]})},Ll=t=>{switch(t){case"restaurant":return{bg:"bg-urgency-high/10",border:"border-urgency-high",text:"text-urgency-high"};case"activity":return{bg:"bg-action-primary/10",border:"border-action-primary",text:"text-action-primary"};case"shopping":return{bg:"bg-value-highlight/10",border:"border-value-highlight",text:"text-value-highlight"};default:return{bg:"bg-bg-card",border:"border-border-subtle",text:"text-text-secondary"}}},Dl=({title:t,description:s,subtitle:r,categories:a,selectedCategory:n,onCategoryChange:i})=>e.jsxs("div",{className:"text-center",children:[r&&e.jsx("h3",{className:"text-sm md:text-base font-semibold text-action-primary uppercase tracking-widest mb-4 md:mb-5",children:r}),e.jsx("p",{className:"text-3xl md:text-4xl font-display font-black text-accent-primary mb-4 md:mb-6",children:t}),e.jsx("p",{className:"text-lg md:text-xl text-text-secondary leading-relaxed max-w-2xl mx-auto mb-8 md:mb-10",children:s}),a.length>0&&e.jsxs("div",{className:"flex justify-center gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>i(null),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${n===null?"bg-action-primary text-white":"bg-bg-card border border-border-subtle text-text-secondary hover:brightness-110"}`,children:"All Categories"}),a.map(o=>{const l=Ll(o),d=n===o;return e.jsx("button",{onClick:()=>i(o),className:`px-4 py-2 rounded-full text-sm font-medium transition-all border-2 ${d?`${l.bg} ${l.border} ${l.text}`:`${l.bg} ${l.border} ${l.text} opacity-60 hover:opacity-100`}`,children:o.charAt(0).toUpperCase()+o.slice(1)},o)})]})]}),Ol=t=>{switch(t){case"restaurant":return{bg:"bg-urgency-high/10",border:"border-urgency-high",text:"text-urgency-high"};case"activity":return{bg:"bg-action-primary/10",border:"border-action-primary",text:"text-action-primary"};case"shopping":return{bg:"bg-value-highlight/10",border:"border-value-highlight",text:"text-value-highlight"};default:return{bg:"bg-bg-card",border:"border-border-subtle",text:"text-text-secondary"}}},Ml=({name:t,offer:s,mapsUrl:r,hasPass:a,isRedeemed:n=!1,onRedeemClick:i,category:o,showCategory:l=!1,terms:d,location:h,images:u,email:x,phone:y})=>{const[g,p]=c.useState(!1),v=s.match(/Save R(\d+)/),f=v?v[0]:null,j=s.replace(/\(Save R\d+[^)]*\)|\(Free \w+[^)]*\)/g,"").trim(),b=Ol(o);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`relative rounded-lg border-l-4 border-r-2 border-t-2 border-b-2 transition-all overflow-hidden ${n?"bg-bg-primary/50 opacity-70 border-border-subtle":`${b.border} bg-bg-card hover:shadow-lg hover:brightness-105`}`,children:[u&&u.length>0&&e.jsxs("button",{onClick:()=>p(!0),className:"absolute top-3 right-3 w-16 h-16 md:w-20 md:h-20 rounded-lg overflow-hidden border-2 border-bg-card shadow-md hover:shadow-lg hover:scale-105 transition-all z-20 bg-gray-300","aria-label":`View ${u.length} images`,children:[e.jsx("img",{src:u[0],alt:`${t} gallery`,className:"w-full h-full object-cover"}),u.length>1&&e.jsxs("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center text-white text-xs font-bold",children:["+",u.length-1]})]}),e.jsxs("div",{className:"p-6 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-display font-black text-accent-primary text-lg md:text-xl leading-tight",children:t})}),f&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"inline-block bg-value-highlight px-2.5 py-1 rounded-lg whitespace-nowrap",children:e.jsx("p",{className:"text-gray-900 font-black text-lg md:text-xl",children:f})})})]}),h&&e.jsx("p",{className:"text-xs text-text-secondary font-medium mb-2",children:h}),e.jsx("p",{className:"text-sm md:text-base text-text-secondary font-medium mb-2 flex-grow",children:j}),d&&e.jsxs("p",{className:"text-xs text-text-secondary font-medium italic mb-3 border-t-2 border-border-subtle pt-2 bg-bg-primary/30 rounded",children:[e.jsx("span",{className:"text-xs font-bold text-text-secondary uppercase tracking-wide",children:"Terms:"})," ",d]}),l&&o&&e.jsx("span",{className:`inline-block px-2.5 py-1 text-xs font-medium rounded-full border mb-3 w-fit ${b.bg} ${b.border} border ${b.text}`,children:o.charAt(0).toUpperCase()+o.slice(1)}),e.jsx("div",{className:"flex flex-col gap-3 mt-auto",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a&&e.jsx(e.Fragment,{children:n?e.jsxs("button",{disabled:!0,className:"col-span-2 inline-flex items-center justify-center gap-1.5 px-6 py-3 md:py-2.5 rounded-md bg-success text-white text-base font-bold whitespace-nowrap",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Redeemed"})]}):e.jsx("button",{type:"button",onClick:()=>i==null?void 0:i(t),className:"col-span-2 inline-flex items-center justify-center gap-1.5 px-6 py-3 md:py-2.5 rounded-md text-base font-bold text-white bg-urgency-high hover:brightness-110 transition-all whitespace-nowrap",children:e.jsx("span",{children:"Redeem"})})}),r&&e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer","aria-label":`Get directions to ${t}`,className:"inline-flex items-center justify-center gap-2 px-6 py-3 md:py-2.5 text-base font-bold text-white bg-action-primary rounded-md hover:brightness-110 transition-all whitespace-nowrap shadow-lg",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11.5a1 1 0 012 0v4.071a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}),e.jsx("span",{children:"Directions"})]}),e.jsx(_s,{email:x,phone:y,className:r?"":"col-span-2",buttonClassName:"px-6 py-3 md:py-2.5 text-base"})]})})]})]}),u&&u.length>0&&Rs.createPortal(e.jsx(wa,{isOpen:g,onClose:()=>p(!1),images:u,dealName:t,location:h}),document.body)]})},Fl=({deal:t,hasPass:s,isRedeemed:r,onRedeemClick:a})=>{const{vendor:n}=va(t.vendorId),i=t.imageUrl||(n==null?void 0:n.imageUrl),o=t.images&&t.images.length>0?t.images:(n==null?void 0:n.images)||[],l=i?[i,...o.filter(d=>d!==i)]:o;return e.jsx(Ml,{name:t.name,offer:t.offer,mapsUrl:n==null?void 0:n.mapsUrl,terms:t.terms,hasPass:s,isRedeemed:r,onRedeemClick:a,category:t.category,location:n==null?void 0:n.city,vendorId:t.vendorId,images:l,email:n==null?void 0:n.email,phone:n==null?void 0:n.phone})},Tl=({hasPass:t,redeemedDeals:s=[],onRedeemClick:r,isFreeUser:a=!1})=>{const[n,i]=c.useState(null),{deals:o,isLoading:l}=Ys(),d=a?[]:o.filter(p=>p.featured),h=o.filter(p=>!p.featured),u=o.length,x=Array.from(new Set(o.map(p=>p.category).filter(Boolean))),y=n?d.filter(p=>p.category===n):d,g=n?h.filter(p=>p.category===n):h;return e.jsxs("section",{id:"full-deal-list",className:"bg-bg-primary relative",children:[e.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-8",children:e.jsx(Dl,{subtitle:a?"Browse All Partners":void 0,title:"Deals By Category",description:`Explore all ${u}+ partner venues organized by what you love`,categories:x,selectedCategory:n,onCategoryChange:i})}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-12 md:py-20",children:[l&&e.jsx("p",{className:"text-center text-text-secondary",children:"Loading deals..."}),!l&&o.length===0&&e.jsx("p",{className:"text-center text-text-secondary",children:"No deals available yet."}),!l&&y.filter(p=>!s.includes(p.name)).length>0&&e.jsxs("div",{className:"mb-12 pb-8 border-b border-border-subtle",children:[e.jsx("h3",{className:"text-2xl font-bold text-accent-primary mb-6 text-center",children:"Featured Deals"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:y.filter(p=>!s.includes(p.name)).map((p,v)=>e.jsx(Gs,{deal:p,index:v,hasPass:t,isRedeemed:s.includes(p.name),onRedeemClick:r,cardHeight:"h-80"},p.name))})]}),!l&&g.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-accent-primary mb-6 text-center",children:y.length>0?"All Other Deals":"All Deals"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:g.filter(p=>!s.includes(p.name)).map(p=>e.jsx(Fl,{deal:p,hasPass:t,isRedeemed:s.includes(p.name),onRedeemClick:r},p.name))})]}),!l&&y.length===0&&g.length===0&&o.length>0&&e.jsx("p",{className:"text-center text-text-secondary",children:"No deals in this category."})]})]})},Ul=({hasPass:t,onRedeemClick:s,redeemedDeals:r})=>e.jsx("main",{className:"pb-24 sm:pb-0",children:e.jsx(Tl,{hasPass:t,onRedeemClick:s,redeemedDeals:r})}),Bl=({userEmail:t,userPhotoURL:s,onSignOut:r,hasPass:a,onPrivacyClick:n,onTermsClick:i,onCharityClick:o,onFaqClick:l})=>{const d=t?t.split("@")[0].charAt(0).toUpperCase()+t.split("@")[0].slice(1):"User";return e.jsxs("main",{className:"pb-16 md:pb-0 bg-bg-primary",children:[e.jsx("section",{className:"bg-gradient-to-b from-action-primary/10 to-bg-primary py-8 md:py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-6",children:[s?e.jsx("img",{src:s,alt:t||"User profile",className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-3 border-action-primary shadow-lg",onError:h=>{h.target.style.display="none"}}):null,!s&&t&&e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-action-primary flex items-center justify-center text-bg-primary font-display font-extrabold text-4xl shadow-lg",children:t.charAt(0).toUpperCase()}),e.jsxs("div",{className:"text-center sm:text-left flex-1",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl font-display font-black text-text-primary mb-2",children:["Welcome, ",d]}),e.jsx("p",{className:"text-text-secondary text-sm mb-4",children:t}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-action-primary/10 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-action-primary"}),e.jsx("span",{className:"text-xs font-semibold text-action-primary",children:"Account Active"})]})]})]})})}),e.jsxs("section",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-8",children:[e.jsxs("div",{className:"bg-bg-card rounded-xl border border-border-subtle p-6 sm:p-8 mb-6",children:[e.jsxs("h2",{className:"text-xl font-display font-bold text-text-primary mb-6 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-action-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Account Details"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"pb-6 border-b border-border-subtle last:pb-0 last:border-0",children:[e.jsx("p",{className:"text-text-secondary text-sm font-semibold uppercase tracking-wide mb-2",children:"Email Address"}),e.jsx("p",{className:"text-text-primary text-lg",children:t})]}),a&&e.jsxs("div",{className:"pb-6 border-b border-border-subtle last:pb-0 last:border-0",children:[e.jsx("p",{className:"text-text-secondary text-sm font-semibold uppercase tracking-wide mb-2",children:"Subscription"}),e.jsx("p",{className:"text-text-primary text-lg",children:"Holiday Pass Member"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-text-secondary text-sm font-semibold uppercase tracking-wide mb-2",children:"Account Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-text-primary text-lg",children:"Active"})]})]})]})]}),e.jsxs("div",{className:"bg-bg-card rounded-xl border border-border-subtle p-6 sm:p-8 mb-6",children:[e.jsxs("h2",{className:"text-xl font-display font-bold text-text-primary mb-6 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-action-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Support & Resources"]}),e.jsxs("nav",{className:"space-y-2",children:[e.jsx("button",{onClick:n,className:"w-full text-left px-4 py-3 rounded-lg text-action-primary hover:bg-action-primary/10 transition-colors font-semibold",children:"Privacy Policy"}),e.jsx("button",{onClick:i,className:"w-full text-left px-4 py-3 rounded-lg text-action-primary hover:bg-action-primary/10 transition-colors font-semibold",children:"Terms of Service"}),e.jsx("button",{onClick:l,className:"w-full text-left px-4 py-3 rounded-lg text-action-primary hover:bg-action-primary/10 transition-colors font-semibold",children:"FAQ"}),e.jsx("button",{onClick:o,className:"w-full text-left px-4 py-3 rounded-lg text-action-primary hover:bg-action-primary/10 transition-colors font-semibold",children:"Holidaying with Heart"}),e.jsxs("a",{href:"https://wa.me/27799569040",target:"_blank",rel:"noopener noreferrer",className:"block px-4 py-3 rounded-lg text-action-primary hover:bg-action-primary/10 transition-colors font-semibold flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.371-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01s-.521.074-.792.372c-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.626.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"})}),"Chat with us on WhatsApp"]})]})]}),e.jsxs("div",{className:"bg-urgency-high/5 rounded-xl border border-urgency-high/20 p-6 sm:p-8",children:[e.jsxs("h2",{className:"text-xl font-display font-bold text-urgency-high mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4v2m0 4v2"})}),"Account Actions"]}),e.jsx("p",{className:"text-text-secondary mb-6 text-sm",children:"Once you sign out, you'll need to sign in again to access your pass and redemptions."}),e.jsx(M,{variant:"outline",className:"w-full py-3 text-lg font-bold border-urgency-high text-urgency-high hover:bg-urgency-high/10",onClick:r,children:"Sign Out"})]})]})]})},Wl=({className:t="w-6 h-6"})=>{const{theme:s}=Te();return e.jsx("img",{src:"/Images/home.svg",alt:"Home",className:t,style:{filter:s==="dark"?"brightness(1.2) invert(1)":"brightness(0.9)"}})},$l=({className:t="w-6 h-6"})=>{const{theme:s}=Te();return e.jsx("img",{src:"/Images/pass.svg",alt:"Pass",className:t,style:{filter:s==="dark"?"brightness(1.2) invert(1)":"brightness(0.9)"}})},Hl=({className:t="w-6 h-6"})=>{const{theme:s}=Te();return e.jsx("img",{src:"/Images/all-deals.svg",alt:"All Deals",className:t,style:{filter:s==="dark"?"brightness(1.2) invert(1)":"brightness(0.9)"}})},zl=({className:t="w-6 h-6"})=>{const{theme:s}=Te();return e.jsx("img",{src:"/Images/profile.svg",alt:"Profile",className:t,style:{filter:s==="dark"?"brightness(1.2) invert(1)":"brightness(0.9)"}})},Vl=({userState:t,pass:s,redeemedDeals:r,user:a,userEmail:n,userPhotoURL:i,onMainCta:o,onRedeemClick:l,onSignOut:d,onSelectPass:h,onPrivacyClick:u,onTermsClick:x,onCharityClick:y,onFaqClick:g})=>{const p=ye(),v=Dt(),f=t==="signed-in-with-pass"&&s!==null,j=c.useRef(!1),b=c.useRef(null);c.useEffect(()=>{!j.current&&(p.pathname==="/"||p.pathname==="")&&(j.current=!0,v("/home",{replace:!0}))},[v]),c.useEffect(()=>{window.scrollTo(0,0),b.current&&(b.current.scrollTop=0),setTimeout(()=>{window.scrollTo(0,0)},50)},[p.pathname]);const w=()=>{if(s!=null&&s.passHolderName)return s.passHolderName.split(" ")[0];if(a!=null&&a.displayName)return a.displayName.split(" ")[0];if(n){const A=n.split("@")[0];return A.charAt(0).toUpperCase()+A.slice(1)}},C=c.useMemo(()=>[{id:"home",label:"Home",path:"/home",icon:e.jsx(Wl,{})},{id:"deals",label:"All Deals",path:"/deals",icon:e.jsx(Hl,{})},...f?[{id:"pass",label:"My Pass",path:"/pass",icon:e.jsx($l,{})}]:[],{id:"profile",label:"Profile",path:"/profile",icon:e.jsx(zl,{})}],[f]),S=c.useMemo(()=>C.findIndex(A=>A.path===p.pathname),[C,p.pathname]);return ua(b.current,{onSwipeLeft:()=>{S<C.length-1&&v(C[S+1].path)},onSwipeRight:()=>{S>0&&v(C[S-1].path)}}),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:b,className:"bg-bg-primary",children:e.jsxs(Qn,{children:[e.jsx(et,{path:"/home",element:e.jsx(Rl,{hasPass:f,userName:w(),onSelectPass:h,redeemedDeals:r,onNavigateToDeal:()=>v("/deals"),pass:s,onRedeemClick:l,onNavigateToPass:()=>v("/pass")})}),f&&e.jsx(et,{path:"/pass",element:e.jsx(Al,{pass:s,redeemedDeals:r,onViewPass:o})}),e.jsx(et,{path:"/deals",element:e.jsx(Ul,{hasPass:f,onRedeemClick:l,redeemedDeals:r})}),e.jsx(et,{path:"/profile",element:e.jsx(Bl,{userEmail:n,userPhotoURL:i,onSignOut:d,hasPass:f,onPrivacyClick:u,onTermsClick:x,onCharityClick:y,onFaqClick:g})}),e.jsx(et,{path:"*",element:e.jsx(Vn,{to:"/home",replace:!0})})]})}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-20 bg-bg-card border-t-8 border-brand-dark-blue md:hidden rounded-t-3xl shadow-lg",style:{boxShadow:"var(--box-shadow, 0 -4px 8px rgba(0, 0, 0, 0.1))"},children:e.jsx("div",{className:"flex justify-around items-center h-16 sm:h-20 gap-1 px-2",children:C.map((A,I)=>e.jsxs("button",{onClick:()=>{st.tap(),v(A.path)},className:`flex-1 flex flex-col items-center justify-center gap-1 py-3 px-1 text-xs sm:text-sm font-semibold transition-all rounded-xl ${S===I?"text-action-primary bg-action-primary/10":"text-text-secondary hover:text-text-primary"}`,children:[A.icon&&e.jsx("div",{className:"h-6 w-6 sm:h-7 sm:w-7 flex items-center justify-center flex-shrink-0",style:{filter:S===I?"brightness(0) saturate(100%) invert(32%) sepia(65%) saturate(2000%) hue-rotate(175deg) brightness(1.1)":"brightness(0.5) opacity(0.7)"},children:A.icon}),e.jsx("span",{className:"line-clamp-1",children:A.label})]},A.id))})})]})},vr=()=>{const{toasts:t,removeToast:s}=ma();return e.jsx("div",{className:"fixed bottom-24 sm:bottom-6 left-4 right-4 sm:left-6 sm:right-auto sm:max-w-sm z-50 space-y-2 pointer-events-none",children:t.map(r=>e.jsxs("div",{onClick:()=>s(r.id),className:`
            pointer-events-auto px-4 py-3 rounded-lg shadow-lg animate-in fade-in slide-in-from-bottom-4 duration-300 flex items-center gap-3 cursor-pointer
            ${r.type==="success"?"bg-green-500 text-white":""}
            ${r.type==="error"?"bg-red-500 text-white":""}
            ${r.type==="info"?"bg-blue-500 text-white":""}
          `,children:[r.type==="success"&&e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.type==="error"&&e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),r.type==="info"&&e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm font-medium",children:r.message})]},r.id))})},jr=({url:t,alt:s})=>!t||!t.trim()?null:e.jsx("div",{className:"mt-2 rounded-lg overflow-hidden border border-border-subtle bg-bg-primary aspect-video w-full max-w-xs",children:e.jsx("img",{src:t,alt:s,onError:r=>{r.target.style.opacity="0.3"},className:"w-full h-full object-cover"})}),Pe=({icon:t,title:s,description:r,children:a,className:n})=>e.jsxs("div",{className:`border-t border-border-subtle pt-4 mt-4 first:border-t-0 first:pt-0 first:mt-0 ${n||""}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-lg",children:t}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:s}),r&&e.jsx("p",{className:"text-xs text-text-secondary",children:r})]})]}),e.jsx("div",{className:"space-y-3 ml-6",children:a})]}),ql=({deal:t,vendor:s,onEdit:r,onDelete:a})=>{const[n,i]=Ke.useState(!1),o=t.imageUrl||(s==null?void 0:s.imageUrl),l=t.images&&t.images.length>0?t.images:(s==null?void 0:s.images)||[],d=o?[o,...l.filter(h=>h!==o)]:l;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-bg-primary rounded-lg border border-border-subtle overflow-hidden hover:border-action-primary/50 hover:shadow-md transition-all group",children:[d.length>0&&e.jsxs("div",{className:"bg-action-primary/10 px-3 py-2 text-xs font-medium text-action-primary flex items-center justify-between",children:[e.jsxs("span",{children:["ðŸ“¸ ",d.length," image",d.length!==1?"s":""]}),e.jsx("button",{onClick:()=>i(!0),className:"text-action-primary hover:underline font-semibold",children:"View"})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"flex items-start justify-between gap-2 mb-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsx("p",{className:"font-semibold text-text-primary text-sm",children:t.name}),t.featured&&e.jsx("span",{className:"text-xs bg-value-highlight/30 text-value-highlight px-1.5 py-0.5 rounded font-bold",children:"â­ Featured"})]}),e.jsx("p",{className:"text-xs text-text-secondary line-clamp-1",children:s==null?void 0:s.name})]})}),e.jsx("p",{className:"text-xs text-text-secondary line-clamp-2 mb-2",children:t.offer}),e.jsxs("div",{className:"flex gap-1 mb-3 flex-wrap",children:[t.savings&&e.jsxs("span",{className:"text-xs bg-value-highlight/20 text-value-highlight px-1.5 py-0.5 rounded font-medium",children:["ðŸ’° R",t.savings]}),t.city&&e.jsxs("span",{className:"text-xs bg-action-primary/20 text-action-primary px-1.5 py-0.5 rounded font-medium",children:["ðŸ“ ",t.city]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(_s,{email:s==null?void 0:s.email,phone:s==null?void 0:s.phone,className:"flex-1",buttonClassName:"px-2 py-1.5 text-xs"}),e.jsx("button",{onClick:r,className:"px-2 py-1.5 text-xs bg-action-primary/20 text-action-primary hover:bg-action-primary/40 rounded transition-colors whitespace-nowrap font-medium",children:"âœï¸ Edit"}),e.jsx("button",{onClick:a,className:"px-2 py-1.5 text-xs bg-urgency-high/20 text-urgency-high hover:bg-urgency-high/40 rounded transition-colors whitespace-nowrap font-medium",children:"ðŸ—‘ï¸ Delete"})]})]})]}),n&&d.length>0&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-bg-primary rounded-lg border border-border-subtle max-w-2xl w-full mx-4 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-subtle",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white",children:[t.name," - Images"]}),e.jsx("button",{onClick:()=>i(!1),className:"text-text-secondary hover:text-text-primary",children:"âœ•"})]}),e.jsx("div",{className:"h-96 w-full",children:e.jsx(ja,{images:d,alt:t.name,className:"w-full h-full",showDots:d.length>1,showArrows:d.length>1})})]})})]})},Ql=()=>{const[t,s]=c.useState("vendors"),[r,a]=c.useState([]),[n,i]=c.useState([]),[o,l]=c.useState(!1),[d,h]=c.useState(!1),[u,x]=c.useState({name:"",email:"",phone:"",pin:"",category:"restaurant",city:"",address:"",mapsUrl:"",imageUrl:"",images:""}),[y,g]=c.useState(""),[p,v]=c.useState(""),[f,j]=c.useState(null),[b,w]=c.useState({vendorId:"",name:"",offer:"",savings:"",imageUrl:"",category:"restaurant",city:"",terms:"",featured:!1,images:""}),[C,S]=c.useState(""),[A,I]=c.useState(""),[D,R]=c.useState(null);c.useEffect(()=>{k(),B()},[]);const k=async()=>{l(!0);try{const N=await nl();a(N)}catch(N){console.error("Error loading vendors:",N)}finally{l(!1)}},B=async()=>{h(!0);try{const N=await Tt();i(N)}catch(N){console.error("Error loading deals:",N)}finally{h(!1)}},X=async N=>{var W;if(N.preventDefault(),g(""),v(""),!u.name.trim()||!u.email.trim()||!u.pin.trim()){g("Please fill in all required fields (Name, Email, PIN)");return}if(u.pin.length!==4||!/^\d+$/.test(u.pin)){g("PIN must be exactly 4 digits");return}try{if(f){const O={name:u.name.trim(),email:u.email.trim(),phone:u.phone.trim(),pin:u.pin,category:u.category,city:u.city.trim(),address:u.address.trim(),images:u.images.split(/[\n,]+/).map(z=>z.trim()).filter(Boolean)};u.mapsUrl.trim()&&(O.mapsUrl=u.mapsUrl.trim()),u.imageUrl.trim()&&(O.imageUrl=u.imageUrl.trim());const Z=await ol(f,O);if(Z.success){const z=u.images.split(/[\n,]+/).map(Ze=>Ze.trim()).filter(Boolean).length;v(`Vendor "${u.name.trim()}" updated successfully with ${z} images!`),j(null),x({name:"",email:"",phone:"",pin:"",category:"restaurant",city:"",address:"",mapsUrl:"",imageUrl:"",images:""}),k()}else g(Z.error||"Failed to update vendor")}else{const O={vendorId:`vendor_${Date.now()}`,name:u.name.trim(),email:u.email.trim(),phone:u.phone.trim(),pin:u.pin,category:u.category,city:u.city.trim(),address:u.address.trim(),mapsUrl:u.mapsUrl.trim()||void 0,imageUrl:u.imageUrl.trim()||void 0,images:u.images.split(/[\n,]+/).map(z=>z.trim()).filter(Boolean),createdAt:new Date().toISOString(),isActive:!0},Z=await al(O);if(Z.success){const z=((W=O.images)==null?void 0:W.length)||0;v(`Vendor "${O.name}" created successfully with ${z} images!`),x({name:"",email:"",phone:"",pin:"",category:"restaurant",city:"",address:"",mapsUrl:"",imageUrl:"",images:""}),k()}else g(Z.error||"Failed to create vendor")}}catch(O){g(O.message||"An error occurred")}},ue=N=>{x({name:N.name,email:N.email,phone:N.phone,pin:N.pin,category:N.category,city:N.city,address:N.address||"",mapsUrl:N.mapsUrl||"",imageUrl:N.imageUrl||"",images:N.images?N.images.join(`
`):""}),j(N.vendorId),g(""),v("")},vt=()=>{j(null),x({name:"",email:"",phone:"",pin:"",category:"restaurant",city:"",address:"",mapsUrl:"",imageUrl:"",images:""}),g(""),v("")},Zt=async(N,W)=>{if(window.confirm(`Delete vendor "${W}"? This cannot be undone.`))try{const O=await ll(N);O.success?(v(`Vendor "${W}" deleted successfully!`),k()):g(O.error||"Failed to delete vendor")}catch(O){g(O.message||"An error occurred")}},Ut=async N=>{var W;if(N.preventDefault(),S(""),I(""),!b.vendorId||!b.name.trim()||!b.offer.trim()){S("Please fill in all required fields (Vendor, Name, Offer)");return}if(b.savings&&isNaN(Number(b.savings))){S("Savings must be a number");return}try{if(D){const O={vendorId:b.vendorId,name:b.name.trim(),offer:b.offer.trim(),category:b.category,featured:b.featured,images:b.images.split(/[\n,]+/).map(z=>z.trim()).filter(Boolean)};b.savings&&(O.savings=Number(b.savings)),b.imageUrl.trim()&&(O.imageUrl=b.imageUrl.trim()),b.city.trim()&&(O.city=b.city.trim()),b.terms.trim()&&(O.terms=b.terms.trim());const Z=await dl(D,O);if(Z.success){const z=b.images.split(/[\n,]+/).map(Ze=>Ze.trim()).filter(Boolean).length;I(`Deal "${b.name.trim()}" updated successfully with ${z} images!`),R(null),w({vendorId:"",name:"",offer:"",savings:"",imageUrl:"",category:"restaurant",city:"",terms:"",featured:!1,images:""}),B()}else S(Z.error||"Failed to update deal")}else{const O={vendorId:b.vendorId,name:b.name.trim(),offer:b.offer.trim(),savings:b.savings?Number(b.savings):void 0,imageUrl:b.imageUrl.trim()||void 0,category:b.category,city:b.city.trim(),terms:b.terms.trim()||void 0,featured:b.featured,images:b.images.split(/[\n,]+/).map(z=>z.trim()).filter(Boolean),createdAt:new Date().toISOString()},Z=await cl(O);if(Z.success){const z=((W=O.images)==null?void 0:W.length)||0;I(`Deal "${O.name}" created successfully with ${z} images!`),w({vendorId:"",name:"",offer:"",savings:"",imageUrl:"",category:"restaurant",city:"",terms:"",featured:!1,images:""}),B()}else S(Z.error||"Failed to create deal")}}catch(O){S(O.message||"An error occurred")}},es=N=>{var W;w({vendorId:N.vendorId,name:N.name,offer:N.offer,savings:((W=N.savings)==null?void 0:W.toString())||"",imageUrl:N.imageUrl||"",category:N.category||"restaurant",city:N.city||"",terms:N.terms||"",featured:N.featured||!1,images:N.images?N.images.join(`
`):""}),R(N.id||null),S(""),I("")},Xe=()=>{R(null),w({vendorId:"",name:"",offer:"",savings:"",imageUrl:"",category:"restaurant",city:"",terms:"",featured:!1,images:""}),S(""),I("")},Ue=async(N,W)=>{if(N&&window.confirm(`Delete deal "${W}"? This cannot be undone.`))try{const O=await ul(N);O.success?(I(`Deal "${W}" deleted successfully!`),B()):S(O.error||"Failed to delete deal")}catch(O){S(O.message||"An error occurred")}};return e.jsx("div",{className:"min-h-screen bg-bg-primary p-4 sm:p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-display font-black text-text-primary mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-text-secondary",children:"Manage vendors and deals"})]}),e.jsxs("div",{className:"flex gap-4 mb-6 border-b border-border-subtle",children:[e.jsx("button",{onClick:()=>s("vendors"),className:`px-4 py-2 font-medium transition-colors ${t==="vendors"?"text-action-primary border-b-2 border-action-primary":"text-text-secondary hover:text-text-primary"}`,children:"Vendors"}),e.jsx("button",{onClick:()=>s("deals"),className:`px-4 py-2 font-medium transition-colors ${t==="deals"?"text-action-primary border-b-2 border-action-primary":"text-text-secondary hover:text-text-primary"}`,children:"Deals"})]}),t==="vendors"&&e.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[e.jsx("div",{className:"lg:sticky lg:top-24 lg:self-start",children:e.jsxs("div",{className:"bg-bg-card rounded-xl border border-border-subtle p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl lg:text-lg font-display font-bold text-gray-900 dark:text-white flex items-center gap-2",children:["ðŸª ",f?"Edit":"Add"]}),e.jsx("p",{className:"text-xs lg:text-xs text-text-secondary mt-1",children:"Vendor details"})]}),f&&e.jsx("button",{onClick:vt,className:"text-xs px-2 py-1 bg-border-subtle text-text-secondary hover:text-text-primary hover:bg-border-subtle/50 rounded-lg transition-colors",children:"âœ•"})]}),e.jsxs("form",{onSubmit:X,className:"space-y-0",children:[e.jsxs(Pe,{icon:"ðŸ“",title:"Basic Info",description:"Name & category",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-text-primary mb-2",children:["Venue Name ",e.jsx("span",{className:"text-urgency-high",children:"*"})]}),e.jsx("input",{type:"text",value:u.name,onChange:N=>x({...u,name:N.target.value}),placeholder:"e.g., Brew Pub",className:"w-full px-3 py-1.5 text-sm bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Category"}),e.jsxs("select",{value:u.category,onChange:N=>x({...u,category:N.target.value}),className:"w-full px-3 py-1.5 text-sm bg-bg-primary border border-border-subtle rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-action-primary",children:[e.jsx("option",{value:"restaurant",children:"ðŸ½ï¸ Restaurant"}),e.jsx("option",{value:"activity",children:"ðŸŽ¯ Activity"}),e.jsx("option",{value:"shopping",children:"ðŸ›ï¸ Shopping"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"City"}),e.jsx("input",{type:"text",value:u.city,onChange:N=>x({...u,city:N.target.value}),placeholder:"Port Alfred",className:"w-full px-3 py-1.5 text-sm bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Address"}),e.jsx("input",{type:"text",value:u.address,onChange:N=>x({...u,address:N.target.value}),placeholder:"123 Main Street",className:"w-full px-3 py-1.5 text-sm bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"})]})]}),e.jsxs(Pe,{icon:"ðŸ”",title:"Auth",description:"Email & PIN",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-text-primary mb-1",children:["Email ",e.jsx("span",{className:"text-urgency-high",children:"*"})]}),e.jsx("input",{type:"email",value:u.email,onChange:N=>x({...u,email:N.target.value}),placeholder:"contact@vendor.com",className:"w-full px-3 py-1.5 text-sm bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-text-primary mb-1",children:["PIN (4 digits) ",e.jsx("span",{className:"text-urgency-high",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:u.pin,onChange:N=>{const W=N.target.value.replace(/\D/g,"").slice(0,4);x({...u,pin:W})},placeholder:"1234",maxLength:4,className:"flex-1 px-3 py-1.5 text-sm bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary font-mono text-center tracking-widest"}),u.pin&&u.pin.length===4&&e.jsx("span",{className:"text-success font-bold",children:"âœ“"})]}),e.jsx("p",{className:"text-xs text-text-secondary mt-1",children:"Staff verification"})]})]}),e.jsxs(Pe,{icon:"ðŸ“ž",title:"Contact",description:"Optional details",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:u.phone,onChange:N=>x({...u,phone:N.target.value}),placeholder:"+27 123 456 789",className:"w-full px-3 py-1.5 text-sm bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Maps Link"}),e.jsx("input",{type:"url",value:u.mapsUrl,onChange:N=>x({...u,mapsUrl:N.target.value}),placeholder:"https://maps.google.com/?q=Venue",className:"w-full px-3 py-1.5 text-xs bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"})]})]}),e.jsxs(Pe,{icon:"ðŸ–¼ï¸",title:"Images",description:"Logo & photos",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Logo"}),e.jsx("input",{type:"url",value:u.imageUrl,onChange:N=>x({...u,imageUrl:N.target.value}),placeholder:"https://example.com/logo.jpg",className:"w-full px-3 py-1.5 text-xs bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"}),e.jsx(jr,{url:u.imageUrl,alt:u.name||"Vendor logo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Photos (URLs)"}),e.jsx("textarea",{value:u.images,onChange:N=>x({...u,images:N.target.value}),placeholder:"https://example.com/photo1.jpg",rows:2,className:"w-full px-3 py-1.5 text-xs bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"})]})]}),y&&e.jsx("div",{className:"mt-3 bg-urgency-high/10 border border-urgency-high rounded-lg p-2",children:e.jsxs("p",{className:"text-xs text-urgency-high font-medium",children:["âš ï¸ ",y]})}),p&&e.jsx("div",{className:"mt-3 bg-success/10 border border-success rounded-lg p-2",children:e.jsxs("p",{className:"text-xs text-success font-medium",children:["âœ“ ",p]})}),e.jsx(M,{variant:"primary",type:"submit",className:"w-full mt-4 text-sm",children:f?"ðŸ’¾ Update":"âž• Add"})]})]})}),e.jsxs("div",{className:"bg-bg-card rounded-xl border border-border-subtle p-6",children:[e.jsxs("h2",{className:"text-xl font-display font-bold text-gray-900 dark:text-white flex items-center gap-2 mb-4",children:["ðŸ“‹ Vendors ",e.jsx("span",{className:"text-sm font-normal text-text-secondary bg-border-subtle px-2 py-0.5 rounded-full",children:r.length})]}),o?e.jsx("p",{className:"text-sm text-text-secondary",children:"Loading..."}):r.length===0?e.jsx("div",{className:"py-8 text-center",children:e.jsx("p",{className:"text-sm text-text-secondary",children:"No vendors"})}):e.jsx("div",{className:"grid gap-3 auto-rows-max",children:r.map(N=>e.jsx("div",{className:"bg-bg-primary rounded-lg p-3 border border-border-subtle hover:border-action-primary/50 hover:bg-bg-primary/80 transition-all group",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1 flex-wrap mb-1",children:[e.jsx("p",{className:"font-semibold text-sm text-text-primary",children:N.name}),e.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded font-medium bg-action-primary/20 text-action-primary",children:[N.category==="restaurant"&&"ðŸ½ï¸",N.category==="activity"&&"ðŸŽ¯",N.category==="shopping"&&"ðŸ›ï¸"]})]}),e.jsx("p",{className:"text-xs text-text-secondary truncate",children:N.email}),e.jsxs("p",{className:"text-xs text-value-highlight font-medium",children:["ðŸ“ ",N.city]})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(N.pin)},className:"text-xs font-mono font-bold text-success bg-success/20 hover:bg-success/30 px-1.5 py-0.5 rounded whitespace-nowrap transition-colors",title:"Copy PIN",children:["ðŸ”‘ ",N.pin]}),e.jsx("button",{onClick:()=>ue(N),className:"text-xs bg-action-primary/20 text-action-primary hover:bg-action-primary/40 px-1.5 py-0.5 rounded transition-colors font-medium",children:"âœï¸"}),e.jsx("button",{onClick:()=>Zt(N.vendorId,N.name),className:"text-xs bg-urgency-high/20 text-urgency-high hover:bg-urgency-high/40 px-1.5 py-0.5 rounded transition-colors font-medium",children:"ðŸ—‘ï¸"})]})]})},N.vendorId))})]})]}),t==="deals"&&e.jsxs("div",{className:"grid gap-8 lg:grid-cols-2",children:[e.jsx("div",{className:"lg:sticky lg:top-24 lg:self-start",children:e.jsxs("div",{className:"bg-bg-card rounded-xl border border-border-subtle p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl lg:text-lg font-display font-bold text-gray-900 dark:text-white flex items-center gap-2",children:["ðŸŽ ",D?"Edit":"Add"]}),e.jsx("p",{className:"text-xs lg:text-xs text-text-secondary mt-1",children:"Deal details"})]}),D&&e.jsx("button",{onClick:Xe,className:"text-xs px-2 py-1 bg-border-subtle text-text-secondary hover:text-text-primary hover:bg-border-subtle/50 rounded-lg transition-colors",children:"âœ•"})]}),e.jsxs("form",{onSubmit:Ut,className:"space-y-0",children:[e.jsxs(Pe,{icon:"ðŸª",title:"Offer",description:"Vendor & description",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-text-primary mb-1",children:["Vendor ",e.jsx("span",{className:"text-urgency-high",children:"*"})]}),e.jsxs("select",{value:b.vendorId,onChange:N=>w({...b,vendorId:N.target.value}),className:"w-full px-3 py-1.5 text-sm bg-bg-primary border border-border-subtle rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-action-primary",children:[e.jsx("option",{value:"",children:"Select vendor..."}),r.map(N=>e.jsx("option",{value:N.vendorId,children:N.name},N.vendorId))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-text-primary mb-1",children:["Name ",e.jsx("span",{className:"text-urgency-high",children:"*"})]}),e.jsx("input",{type:"text",value:b.name,onChange:N=>w({...b,name:N.target.value}),placeholder:"e.g., 2-for-1 Meals",className:"w-full px-3 py-1.5 text-sm bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-text-primary mb-1",children:["Description ",e.jsx("span",{className:"text-urgency-high",children:"*"})]}),e.jsx("textarea",{value:b.offer,onChange:N=>w({...b,offer:N.target.value}),placeholder:"2-for-1 on Main Meals",rows:2,className:"w-full px-3 py-1.5 text-sm bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"})]})]}),e.jsxs(Pe,{icon:"ðŸ’°",title:"Details",description:"Value & location",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Savings (R)"}),e.jsx("input",{type:"number",value:b.savings,onChange:N=>w({...b,savings:N.target.value}),placeholder:"150",className:"w-full px-3 py-1.5 text-sm bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Category"}),e.jsxs("select",{value:b.category,onChange:N=>w({...b,category:N.target.value}),className:"w-full px-3 py-1.5 text-sm bg-bg-primary border border-border-subtle rounded-lg text-text-primary focus:outline-none focus:ring-2 focus:ring-action-primary",children:[e.jsx("option",{value:"restaurant",children:"ðŸ½ï¸"}),e.jsx("option",{value:"activity",children:"ðŸŽ¯"}),e.jsx("option",{value:"shopping",children:"ðŸ›ï¸"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"City"}),e.jsx("input",{type:"text",value:b.city,onChange:N=>w({...b,city:N.target.value}),placeholder:"Port Alfred",className:"w-full px-3 py-1.5 text-sm bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Terms"}),e.jsx("textarea",{value:b.terms,onChange:N=>w({...b,terms:N.target.value}),placeholder:"Valid Mon-Thu...",rows:2,className:"w-full px-3 py-1.5 text-xs bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"})]})]}),e.jsxs(Pe,{icon:"ðŸ–¼ï¸",title:"Images",description:"Main & carousel",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Main Image"}),e.jsx("input",{type:"url",value:b.imageUrl,onChange:N=>w({...b,imageUrl:N.target.value}),placeholder:"https://example.com/deal.jpg",className:"w-full px-3 py-1.5 text-xs bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"}),e.jsx(jr,{url:b.imageUrl,alt:b.name||"Deal image"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-primary mb-1",children:"Carousel (URLs)"}),e.jsx("textarea",{value:b.images,onChange:N=>w({...b,images:N.target.value}),placeholder:"https://example.com/photo.jpg",rows:2,className:"w-full px-3 py-1.5 text-xs bg-bg-primary border border-border-subtle rounded-lg text-text-primary placeholder-text-secondary/50 focus:outline-none focus:ring-2 focus:ring-action-primary"})]})]}),e.jsx(Pe,{icon:"â­",title:"Promote",description:"",children:e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-value-highlight/10 rounded-lg border border-value-highlight/20",children:[e.jsx("input",{type:"checkbox",id:"featured",checked:b.featured,onChange:N=>w({...b,featured:N.target.checked}),className:"w-4 h-4 rounded border-border-subtle bg-bg-primary cursor-pointer accent-value-highlight"}),e.jsx("label",{htmlFor:"featured",className:"text-xs font-medium text-text-primary cursor-pointer flex-1",children:"Featured"})]})}),C&&e.jsx("div",{className:"mt-3 bg-urgency-high/10 border border-urgency-high rounded-lg p-2",children:e.jsxs("p",{className:"text-xs text-urgency-high font-medium",children:["âš ï¸ ",C]})}),A&&e.jsx("div",{className:"mt-3 bg-success/10 border border-success rounded-lg p-2",children:e.jsxs("p",{className:"text-xs text-success font-medium",children:["âœ“ ",A]})}),e.jsx(M,{variant:"primary",type:"submit",className:"w-full mt-4 text-sm",children:D?"ðŸ’¾ Update":"âž• Add"})]})]})}),e.jsxs("div",{className:"bg-bg-card rounded-xl border border-border-subtle p-6",children:[e.jsxs("h2",{className:"text-xl font-display font-bold text-gray-900 dark:text-white flex items-center gap-2 mb-4",children:["ðŸ“¦ Deals ",e.jsx("span",{className:"text-sm font-normal text-text-secondary bg-border-subtle px-2 py-0.5 rounded-full",children:n.length})]}),d?e.jsx("p",{className:"text-sm text-text-secondary",children:"Loading..."}):n.length===0?e.jsx("div",{className:"py-8 text-center",children:e.jsx("p",{className:"text-sm text-text-secondary",children:"No deals"})}):e.jsx("div",{className:"grid gap-3 auto-rows-max",children:n.map(N=>e.jsx(ql,{deal:N,vendor:r.find(W=>W.vendorId===N.vendorId),onEdit:()=>es(N),onDelete:()=>Ue(N.id,N.name)},N.id))})]})]})]})})},Yl=({onClose:t})=>e.jsx("div",{className:"fixed inset-0 bg-bg-primary/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:t,children:e.jsxs("div",{className:"bg-bg-card rounded-2xl shadow-2xl p-6 sm:p-8 max-w-2xl w-full relative border border-border-subtle my-8",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-text-secondary hover:text-text-primary transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-display font-black text-accent-primary mb-4",children:"Cookie Policy"}),e.jsxs("p",{className:"text-text-secondary text-sm",children:["Last updated: ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"space-y-6 text-text-primary overflow-y-auto max-h-[60vh]",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"1. What Are Cookies?"}),e.jsx("p",{children:"Cookies are small text files stored on your device when you visit our website or app. They help us remember your preferences and improve your experience."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"2. Types of Cookies We Use"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Essential Cookies (Required)"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Firebase Auth Session:"})," Keeps you signed in"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"CSRF Protection:"})," Prevents unauthorized actions"]}),e.jsx("li",{children:"Duration: Until browser closed (session)"}),e.jsx("li",{children:"Cannot be disabled without breaking the app"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Preference Cookies (Optional)"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Theme Preference:"})," Remembers light/dark mode"]}),e.jsx("li",{children:"Duration: 1 year"}),e.jsx("li",{children:"Can be deleted via browser settings"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Analytics Cookies (Optional)"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Firebase Analytics:"})," Tracks app usage and crashes"]}),e.jsx("li",{children:"Duration: 30 days"}),e.jsx("li",{children:"We do NOT use Google Analytics"}),e.jsx("li",{children:"Can be disabled via our cookie consent tool"})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"3. Third-Party Cookies"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Firebase (Google):"})," Auth & analytics - Privacy: https://firebase.google.com/support/privacy"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Yoco (Payments):"})," Payment processing - Privacy: https://yoco.com/privacy"]}),e.jsx("li",{children:"All third parties are contractually obligated to protect your data"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"4. Your Cookie Rights"}),e.jsx("p",{className:"mb-3",children:"Under POPIA, you have the right to:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Accept or reject non-essential cookies"}),e.jsx("li",{children:"Delete cookies via browser settings"}),e.jsx("li",{children:"Request a list of cookies we use"}),e.jsx("li",{children:"Opt-out of analytics tracking"})]}),e.jsx("p",{className:"mt-3 text-sm text-text-secondary",children:"Note: Disabling essential cookies may break app functionality."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"5. How to Control Cookies"}),e.jsx("p",{className:"mb-2",children:e.jsx("strong",{children:"In your browser:"})}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm mb-4",children:[e.jsx("li",{children:"Chrome: Settings â†’ Privacy and security â†’ Clear browsing data"}),e.jsx("li",{children:"Firefox: Preferences â†’ Privacy â†’ Cookies and Site Data"}),e.jsx("li",{children:"Safari: Preferences â†’ Privacy â†’ Manage Website Data"}),e.jsx("li",{children:"Edge: Settings â†’ Privacy â†’ Choose what to clear"})]}),e.jsx("p",{children:e.jsx("strong",{children:"Opt-out links:"})}),e.jsx("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:e.jsx("li",{children:"Firebase Analytics: https://tools.google.com/dlpage/gaoptout"})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"6. POPIA Compliance"}),e.jsx("p",{children:"We comply with POPIA Section 12 (notification) by disclosing cookies in this policy and obtaining your consent via our banner on first visit."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-bold text-accent-primary mb-3",children:"7. Questions?"}),e.jsxs("p",{children:["Contact us at:",e.jsx("br",{}),e.jsx("strong",{children:"Email:"})," portalfredholidaypass@gmail.com ",e.jsx("br",{}),e.jsx("strong",{children:"WhatsApp:"})," 065 806 2198"]})]})]}),e.jsx("div",{className:"mt-6 border-t border-border-subtle pt-6",children:e.jsx(M,{type:"button",variant:"primary",className:"w-full",onClick:t,children:"I Understand"})})]})}),_l=()=>{const[t,s]=c.useState(!1),[r,a]=c.useState(!1);c.useEffect(()=>{if(!localStorage.getItem("cookie-consent")){const l=setTimeout(()=>s(!0),1e3);return()=>clearTimeout(l)}},[]);const n=()=>{localStorage.setItem("cookie-consent",JSON.stringify({essential:!0,preferences:!0,analytics:!0,timestamp:new Date().toISOString()})),s(!1)},i=()=>{localStorage.setItem("cookie-consent",JSON.stringify({essential:!0,preferences:!0,analytics:!1,timestamp:new Date().toISOString()})),s(!1)};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-bg-card border-t border-border-subtle p-4 z-40 shadow-lg",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-text-primary mb-2",children:"ðŸª We Use Cookies"}),e.jsxs("p",{className:"text-xs text-text-secondary mb-3",children:["We use essential cookies to keep you signed in, preference cookies to remember your settings, and analytics cookies to improve the app. See our"," ",e.jsx("button",{onClick:()=>a(!0),className:"text-accent-primary underline hover:text-action-primary",children:"Cookie Policy"})," ","for details."]})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx(M,{variant:"secondary",onClick:i,className:"text-xs whitespace-nowrap",children:"Reject Analytics"}),e.jsx(M,{variant:"primary",onClick:n,className:"text-xs whitespace-nowrap",children:"Accept All"})]})]})})}),r&&e.jsx(Yl,{onClose:()=>a(!1)})]}):null},Na=c.createContext(void 0),Gl=({children:t})=>{const[s,r]=c.useState(null),[a,n]=c.useState(null),[i,o]=c.useState(!0),[l,d]=c.useState(void 0),[h,u]=c.useState([]),x=s?a?"signed-in-with-pass":"signed-in":"free";return c.useEffect(()=>{const y=setTimeout(()=>{o(!1)},3e3),g=qo(async p=>{if(r(p),p){p.photoURL&&(d(p.photoURL),localStorage.setItem(`photoURL_${p.uid}`,p.photoURL));try{const f=(await tl(p.uid)).find(j=>j.paymentStatus==="completed");n(f?{passId:f.passId,passHolderName:f.passHolderName,passType:f.passType,expiryDate:f.expiryDate,paymentStatus:f.paymentStatus,purchasePrice:f.purchasePrice}:null)}catch(v){console.error("Failed to fetch user passes:",v),n(null)}}else d(void 0),n(null),u([]);o(!1),clearTimeout(y)});return()=>{g(),clearTimeout(y)}},[]),e.jsx(Na.Provider,{value:{user:s,userState:x,pass:a,isLoading:i,userPhotoURL:l,redeemedDeals:h,setRedeemedDeals:u},children:t})},Kl=()=>{const t=c.useContext(Na);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},Ca="pass_validation_database",Jl=()=>{try{const t=localStorage.getItem(Ca);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to read mock database from localStorage",t),[]}},Xl=t=>{try{localStorage.setItem(Ca,JSON.stringify(t))}catch(s){console.error("Failed to save mock database to localStorage",s)}},Zl=async(t,s,r)=>{await new Promise(l=>setTimeout(l,800));const a=Jl(),n=a.findIndex(l=>l.passId===t&&l.primaryName.toLowerCase()===s.toLowerCase());if(n===-1)return{success:!1,message:"Invalid Pass ID or Primary Name. Please check the details and try again."};const i=a[n];return new Date>new Date(i.expiryDate)?{success:!1,message:"This pass has expired and can no longer be activated."}:i.plusOneName?i.plusOneActivatedBy?{success:!1,message:"This +1 has already been activated on another device."}:i.plusOneAddedBy&&i.plusOneAddedBy.toLowerCase()!==r.toLowerCase()?{success:!1,message:"Only the pass holder who added the +1 can activate it on another device."}:(a[n].plusOneActivatedBy=r,Xl(a),{success:!0,message:"Pass activated successfully!",passData:{passType:i.passType,expiryDate:i.expiryDate,plusOneName:i.plusOneName}}):{success:!1,message:"This pass does not have a +1 to activate."}},ec=()=>{const{user:t,userState:s,pass:r,isLoading:a,userPhotoURL:n,redeemedDeals:i,setRedeemedDeals:o}=Kl(),l=ye(),d=Dt(),[h,u]=c.useState(!1),[x,y]=c.useState(null),[g,p]=c.useState(!1),[v,f]=c.useState(!1),[j,b]=c.useState(!1),[w,C]=c.useState(!1),[S,A]=c.useState(!1),[I,D]=c.useState(!1),[R,k]=c.useState(!1),[B,X]=c.useState(!1),[ue,vt]=c.useState(!1),[Zt,Ut]=c.useState(!1),[es,Xe]=c.useState(!1),[Ue,N]=c.useState(null),[W,O]=c.useState(null),[Z,z]=c.useState(!1),[Ze,Ks]=c.useState(null),[ka,Js]=c.useState(null),[Sa,ts]=c.useState(!1),[Ia,rc]=c.useState(!1);c.useEffect(()=>{new URLSearchParams(window.location.search).get("admin")==="true"&&sessionStorage.setItem("adminParamDetected","true")},[]),c.useEffect(()=>{},[t]);const[ss,Be]=c.useState(null);c.useEffect(()=>{s==="free"&&window.scrollTo(0,0)},[s]),c.useEffect(()=>{const L=window.location.pathname;L.includes("/payment/success")?(Be("success"),window.history.replaceState({},document.title,"/")):L.includes("/payment/failure")?(Be("failure"),window.history.replaceState({},document.title,"/")):(L.includes("/payment/cancel")||L.includes("/payment/return"))&&(Be("cancel"),window.history.replaceState({},document.title,"/"))},[]),c.useEffect(()=>{(async()=>{if(r!=null&&r.passId)try{const G=(await rl(r.passId)).map(ae=>ae.dealName);o(G)}catch(ee){console.error("Failed to load redeemed deals:",ee)}})()},[r==null?void 0:r.passId]),c.useEffect(()=>{const L=new IntersectionObserver(G=>{G.forEach(ae=>{ae.isIntersecting&&ae.target.classList.add("is-visible")})},{threshold:.1}),ee=document.querySelectorAll(".scroll-reveal");return ee.forEach(G=>L.observe(G)),()=>{ee.forEach(G=>L.unobserve(G))}},[]);const Ra=c.useMemo(()=>[{id:"home",label:"Home",path:"/home"},{id:"deals",label:"All Deals",path:"/deals"},...s==="signed-in-with-pass"&&r!==null?[{id:"pass",label:"My Pass",path:"/pass"}]:[],{id:"profile",label:"Profile",path:"/profile"}],[s,r]),Ea=async(L,ee,G)=>{if(!(t!=null&&t.email))return{success:!1,message:"You must be signed in to activate a shared pass."};const ae=await Zl(L,ee,t.email);return ae.success?(p(!1),X(!0),vt(!1),{success:!0,message:ae.message}):{success:!1,message:ae.message}},rs=L=>{if(!t){y(L),f(!0);return}t.displayName?(y(L),u(!0)):(y(L),b(!0))},Aa=()=>{b(!1),x&&setTimeout(()=>{u(!0)},300)},La=()=>{u(!1),y(null)},Bt=()=>{var L;s==="signed-in-with-pass"?X(!0):s==="free"?f(!0):s==="signed-in"&&((L=document.getElementById("pricing-options"))==null||L.scrollIntoView({behavior:"smooth"}))},Da=()=>{X(!1),ue&&vt(!1)},Oa=()=>{X(!1),vt(!1),Ut(!0)},Xs=()=>a?"Checking Pass...":s==="signed-in-with-pass"?"View My Pass":"Get My Pass",Ma=async(L,ee,G)=>{if(r!=null&&r.passId){if(!i.includes(L)){const ae=[...i,L];o(ae),t&&ee&&await sl(r.passId,L,ee,t.uid)}z(!1),Xe(!1),N(null),O(null),Ks(L),Js(G||null)}},Fa=async L=>{try{const G=(await Tt()).find(ae=>ae.name===L);G&&G.vendorId&&(N(L),O(G.vendorId),Xe(!0))}catch{}},Zs=()=>{ts(!0)},Ta=async()=>{(await ga()).success&&ts(!1)};return Ia?e.jsxs("div",{children:[e.jsx(vr,{}),e.jsx(Ql,{})]}):e.jsxs("div",{children:[e.jsx(lo,{}),e.jsx(_l,{}),e.jsx(vr,{}),a&&e.jsx(bl,{}),x&&e.jsx(Po,{isOpen:h,onClose:La,passType:x,userEmail:t==null?void 0:t.email,userId:t==null?void 0:t.uid}),e.jsx(xl,{isOpen:g,onClose:()=>p(!1),onActivate:Ea}),e.jsx(_o,{isOpen:v,onClose:()=>f(!1),onAuthSuccess:()=>{f(!1),setTimeout(()=>{window.scrollTo(0,0)},100),x&&setTimeout(()=>{rs(x)},300)}}),t&&e.jsx(yl,{isOpen:j,userEmail:t.email,onClose:()=>{b(!1),y(null)},onProfileComplete:Aa}),Ue&&W&&e.jsx(el,{isOpen:es,dealName:Ue,vendorId:W,onConfirm:async()=>{Xe(!1),z(!0)},onCancel:()=>{Xe(!1),N(null),O(null)}}),Ue&&W&&e.jsx(hl,{isOpen:Z,vendorId:W,dealName:Ue,onSuccess:async()=>{const L=await Ft(W);await Ma(Ue,W,L==null?void 0:L.name)},onCancel:()=>{z(!1),N(null),O(null)}}),e.jsx(ml,{isOpen:!!Ze,dealName:Ze||"",venueName:ka||"Partner Venue",onClose:()=>{Ks(null),Js(null)}}),e.jsx(fl,{isOpen:Zt,onClose:()=>{Ut(!1),setTimeout(()=>{const L=document.getElementById("deals-showcase");L&&L.scrollIntoView({behavior:"smooth"})},100)}}),B&&r&&e.jsx($o,{name:r.passHolderName,passId:r.passId,onClose:Da,onCardClick:ue?Oa:void 0,isNew:ue,passType:r.passType,expiryDate:r.expiryDate,userEmail:t==null?void 0:t.email}),e.jsx(xo,{onButtonClick:Bt,buttonText:Xs(),onAuthClick:()=>f(!0),onSignOutClick:Zs,onActivateClick:()=>p(!0),isAuthenticated:!!t&&!a,userEmail:t==null?void 0:t.email,userPhotoURL:n,isSignedIn:s!=="free",tabs:s!=="free"?Ra:void 0,currentPath:l.pathname,onTabClick:L=>d(L)}),s==="free"&&e.jsx(Pl,{onSelectPass:rs,onActivateClick:()=>p(!0),onMainCtaClick:Bt,onAuthClick:()=>f(!0)}),(s==="signed-in"||s==="signed-in-with-pass")&&e.jsx(Vl,{userState:s,pass:r,redeemedDeals:i,user:t,userEmail:t==null?void 0:t.email,userPhotoURL:n,onMainCta:Bt,onRedeemClick:Fa,onSignOut:Zs,onSelectPass:rs,onPrivacyClick:()=>C(!0),onTermsClick:()=>A(!0),onCharityClick:()=>D(!0),onFaqClick:()=>k(!0)}),s==="free"&&e.jsx(po,{onButtonClick:Bt,buttonText:Xs(),hasPass:!1,onPrivacyClick:()=>C(!0),onTermsClick:()=>A(!0)}),w&&e.jsx(qs,{onClose:()=>C(!1)}),S&&e.jsx(Qs,{onClose:()=>A(!1)}),I&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 overflow-y-auto",onClick:()=>D(!1),children:e.jsx("div",{className:"min-h-screen flex items-start justify-center pt-8 pb-8",onClick:L=>L.stopPropagation(),children:e.jsxs("div",{className:"bg-bg-primary rounded-2xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>D(!1),className:"sticky top-0 right-0 p-4 text-text-secondary hover:text-text-primary float-right",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("div",{onClick:L=>L.stopPropagation(),children:e.jsx(ya,{})})]})})}),R&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 overflow-y-auto",onClick:()=>k(!1),children:e.jsx("div",{className:"min-h-screen flex items-start justify-center pt-8 pb-8",onClick:L=>L.stopPropagation(),children:e.jsxs("div",{className:"bg-bg-primary rounded-2xl shadow-2xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>k(!1),className:"sticky top-0 right-0 p-4 text-text-secondary hover:text-text-primary float-right",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("div",{onClick:L=>L.stopPropagation(),children:e.jsx(ba,{})})]})})}),e.jsx(pl,{isOpen:Sa,userEmail:t==null?void 0:t.email,onConfirm:Ta,onCancel:()=>ts(!1)}),ss==="success"&&e.jsx(Jo,{onClose:()=>Be(null)}),ss==="failure"&&e.jsx(Xo,{onClose:()=>Be(null),onRetry:()=>{Be(null),x&&u(!0)}}),ss==="cancel"&&e.jsx(Zo,{onClose:()=>Be(null)})]})},tc=new _i;"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(t=>{setInterval(()=>{t.update().catch(()=>{})},6e4)}).catch(()=>{});const Pa=document.getElementById("root");if(!Pa)throw new Error("Could not find root element to mount to");const sc=ds.createRoot(Pa);sc.render(e.jsx(Ke.StrictMode,{children:e.jsx(Ki,{client:tc,children:e.jsx(pi,{children:e.jsx(fo,{children:e.jsx(Gl,{children:e.jsx(co,{children:e.jsx(ec,{})})})})})})}));
